{"version":3,"sources":["webpack://beaver/webpack/universalModuleDefinition","webpack://beaver/webpack/bootstrap","webpack://beaver/./node_modules/@krakenjs/belter/index.js","webpack://beaver/./node_modules/@krakenjs/zalgo-promise/index.js","webpack://beaver/./node_modules/@krakenjs/zalgo-promise/dist/zalgo-promise.js","webpack://beaver/./node_modules/@krakenjs/belter/dist/belter.js","webpack://beaver/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://beaver/./src/constants.ts","webpack://beaver/./src/config.ts","webpack://beaver/./src/util.ts","webpack://beaver/./node_modules/@krakenjs/zalgo-promise/src/utils.js","webpack://beaver/./node_modules/@krakenjs/zalgo-promise/src/exceptions.js","webpack://beaver/./node_modules/@krakenjs/zalgo-promise/src/flush.js","webpack://beaver/./node_modules/@krakenjs/zalgo-promise/src/promise.js","webpack://beaver/./node_modules/@krakenjs/cross-domain-safe-weakmap/node_modules/@krakenjs/cross-domain-utils/src/utils.js","webpack://beaver/./node_modules/@krakenjs/cross-domain-safe-weakmap/node_modules/@krakenjs/cross-domain-utils/src/constants.js","webpack://beaver/./node_modules/@krakenjs/cross-domain-safe-weakmap/src/util.js","webpack://beaver/./node_modules/@krakenjs/cross-domain-safe-weakmap/src/weakmap.js","webpack://beaver/./node_modules/@krakenjs/belter/src/util.js","webpack://beaver/./node_modules/@krakenjs/cross-domain-safe-weakmap/src/native.js","webpack://beaver/./node_modules/@krakenjs/belter/src/dom.js","webpack://beaver/./node_modules/@krakenjs/belter/src/constants.js","webpack://beaver/./node_modules/@krakenjs/belter/src/http.js","webpack://beaver/./node_modules/@krakenjs/cross-domain-utils/dist/esm/utils.js","webpack://beaver/./node_modules/@krakenjs/cross-domain-utils/dist/esm/constants.js","webpack://beaver/./src/http.ts","webpack://beaver/./src/logger.ts"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","hasOwnProperty","p","s","require","e","default","Promise","window","Window","constructor","toString","then","a","u","resolve","f","resolved","rejected","errorHandled","error","handlers","dispatching","stack","reject","prototype","Error","dispatch","setTimeout","indexOf","push","length","asyncReject","onSuccess","onError","h","promise","v","catch","finally","try","timeout","clearTimeout","toPromise","TypeError","lazy","all","slice","hash","map","onPossiblyUnhandledException","cancel","splice","apply","delay","isPromise","flush","__webpack_exports__","getUserAgent","isDevice","isTablet","isWebView","isStandAlone","isFacebookWebView","isFirefox","isFirefoxIOS","isEdgeIOS","isOperaMini","isAndroid","isIos","isIOS14","isGoogleSearchApp","isQQBrowser","isIosWebview","isSFVC","isSFVCorSafari","isAndroidWebview","device_isIE","isIECompHeader","isElectron","isIEIntranet","isMacOsCna","supportsPopups","isChrome","isSafari","isApplePaySupported","isCrossSiteTrackingEnabled","getBody","isDocumentReady","isDocumentInteractive","urlEncode","waitForWindowReady","waitForDocumentReady","waitForDocumentBody","parseQuery","getQueryParam","urlWillRedirectPage","formatQuery","extendQuery","extendUrl","redirect","hasMetaViewPort","isElementVisible","getPerformance","enablePerformance","getPageRenderTime","htmlEncode","dom_isBrowser","querySelectorAll","onClick","getScript","isLocalStorageEnabled","getBrowserLocales","appendChild","getElementSafe","getElement","elementReady","dom_PopupOpenError","popup","writeToWindow","writeElementToWindow","setStyle","awaitFrameLoad","awaitFrameWindow","createElement","iframe","addEventListener","bindEvents","setVendorCSS","animate","makeElementVisible","makeElementInvisible","showElement","hideElement","destroyElement","showAndAnimate","animateAndHide","addClass","removeClass","isElementClosed","watchElementForClose","fixScripts","onResize","getResourceLoadTime","isShadowElement","getShadowRoot","getShadowHost","insertShadowSlot","preventClickFocus","getStackTrace","getCurrentScript","getCurrentScriptUID","submitForm","experiment","getGlobalNameSpace","getStorage","isElement","getFunctionName","setFunctionName","base64encode","base64decode","uniqueID","getGlobal","getObjectID","getEmptyObject","memoize","promiseIdentity","memoizePromise","promisify","inlineMemoize","src_util_noop","once","hashStr","strHashStr","match","awaitKey","stringifyError","stringifyErrorMessage","stringify","domainMatches","patchMethod","extend","util_values","memoizedValues","perc","min","max","roundUp","regexMap","svgToBase64","objFilter","identity","regexTokenize","promiseDebounce","safeInterval","isInteger","isFloat","serializePrimitive","deserializePrimitive","dotify","undotify","eventEmitter","camelToDasherize","dasherizeToCamel","capitalizeFirstLetter","util_get","safeTimeout","defineLazyProp","arrayFrom","isObject","isObjectObject","isPlainObject","replaceObject","copyProp","regex","regexAll","isDefined","cycle","debounce","util_isRegex","util_weakMapMemoize","util_weakMapMemoizePromise","getOrSet","cleanup","tryCatch","removeFromArray","assertExists","unique","constHas","dedupeErrors","util_ExtendableError","request","addHeaderBuilder","types_TYPES","memoized","decorators_promise","isPerc","isPx","toNum","toPx","toCSS","percOf","normalizeDimension","wrapPromise","KEY_CODES","ATTRIBUTES","UID_HASH_LENGTH","sfvcScreens","926","device","textSizeHeights","textSizeHeightsNoTabs","zoomHeight","1.15","1.25","1.5","1.75","2","2.5","3","maybeSafari","896","844","812","736","667","navigator","mockUserAgent","userAgent","TABLET_PATTERN","test","standalone","matchMedia","matches","ua","height","innerHeight","scale","Math","round","screen","width","innerWidth","computedHeight","outerHeight","sfvc","possibleSafariSizes","document","documentMode","Boolean","mHttp","querySelector","mContent","process","versions","electron","status","err","ApplePaySession","supportsVersion","canMakePayments","expectedCookieKey","cookie","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","_extends","assign","target","arguments","source","utils_isPromise","item","_toString","flushPromise","dispatchedErrors","possiblyUnhandledPromiseHandlers","activeCount","flushActive","startActive","endActive","promise_ZalgoPromise","ZalgoPromise","handler","_this","_result","_error","isAsync","res","_proto","result","_this2","_err","j","chain","firstPromise","secondPromise","_handlers$i","_result2","promiseResult","onFinally","time","_this3","promises","count","results","prom","awaitPromises","_loop","items","method","context","args","_delay","IE_WIN_ACCESS_ERROR","getActualProtocol","win","location","protocol","getProtocol","mockDomain","split","isAboutProtocol","canReadFromWindow","getActualDomain","parent","host","getDomain","domain","isSameDomain","desc","getOwnPropertyDescriptor","iframeWindows","iframeFrames","isWindowClosed","allowMock","closed","message","mockclosed","top","iframeIndex","collection","frame","contentWindow","parentNode","doc","ownerDocument","documentElement","contains","isWindow","obj","__cross_domain_utils_window_check__","util_safeIndexOf","objectIDs","weakmap_CrossDomainSafeWeakMap","CrossDomainSafeWeakMap","weakmap","keys","values","random","WeakMap","freeze","testWeakMap","testKey","set","_cleanupClosedWindows","delete","isSafeToReadWrite","entry","writable","index","has","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","construct_construct","Parent","Class","instance","Function","wrapNativeSuper_wrapNativeSuper","_cache","Map","Wrapper","configurable","element","passed","Element","nodeType","style","_","fn","__name__","displayName","str","btoa","encodeURIComponent","replace","p1","String","fromCharCode","parseInt","Buffer","from","atob","decodeURIComponent","charCodeAt","join","chars","charAt","floor","toISOString","toLowerCase","uid","serializeArgs","JSON","subkey","val","memoizeGlobalIndex","memoizeGlobalIndexValidFrom","options","simpleCache","thisCache","_options$thisNamespac","thisNamespace","cacheTime","memoizeIndex","memoizedFunction","_len","Array","_key","cache","cacheKey","_unused","cacheResult","now","reset","memoizedPromiseFunction","_arguments","_len2","_key2","promisifiedFunction","logic","__inline_memoize_cache__","called","pow","sqrt","total","abs","pattern","regmatch","level","newErr","defaultMessage","hostname","original","_arguments2","callOriginal","clear","pixels","percentage","num","nearest","remainder","regexp","svg","filter","text","token","localPromise","loop","parseFloat","prefix","newobj","isArray","every","keyResult","parts","part","isLast","isIndex","triggered","emitter","on","eventName","handlerList","cancelled","listener","trigger","_len3","_key3","_i2","triggerOnce","_len4","_key4","concat","string","g","toUpperCase","path","def","pathParts","interval","replacer","fullKey","_loop2","itemKey","child","_loop3","descriptor","start","RegExp","groups","end","_arguments3","arg","_this4","_this5","cleanErr","tasks","cleaned","cleaner","register","task","shift","arr","thing","_i4","constant","seenErrors","seenStringifiedErrors","stringifiedError","_Error","ExtendableError","_this6","captureStackTrace","ReferenceError","ENTER","SPACE","UID","body","readyState","setInterval","clearInterval","queryString","params","_queryString$split2","pair","search","url","href","originalQuery","props","originalUrl","originalHash","query","_url$split","_originalUrl$split","hashString","meta","el","offsetWidth","offsetHeight","getClientRects","performance","timing","connectEnd","navigationStart","domInteractive","html","selector","event","keyCode","_ref","_ref$host","_ref$reverse","reverse","scripts","getElementsByTagName","script","src","localStorage","setItem","getItem","removeItem","nav","locales","languages","language","userLanguage","locale","_locale$split","country","lang","container","id","awaitFrameLoadPromises","_ExtendableError","PopupOpenError","_options$closeOnUnloa","closeOnUnload","_options$name","left","outerWidth","screenX","screenY","toolbar","menubar","resizable","scrollbars","open","close","write","err2","tag","tagName","_i6","_arrayFrom2","children","removeChild","_i8","_arrayFrom4","styleText","styleSheet","cssText","createTextNode","_promise","loadedFrame","class","className","setAttribute","attributes","_i10","_Object$keys2","innerHTML","allowTransparency","backgroundColor","border","isIE","hasAttribute","removeEventListener","eventNames","_i12","_i14","VENDOR_PREFIXES","capitalizedName","_i16","ANIMATION_START_EVENTS","ANIMATION_END_EVENTS","clean","startTimeout","endTimeout","startEvent","endEvent","hasStarted","cleanUp","animationName","stopPropagation","setProperty","animation","classList","add","remove","sacrificialFrame","sacrificialFrameWin","mutationObservers","_i18","disconnect","elementClosed","MutationObserver","mutationElement","parentElement","mutationObserver","observe","childList","display","frameWin","_i20","_querySelectorAll2","newScript","textContent","replaceChild","_temp","_ref2","_ref2$width","_ref2$height","_ref2$interval","_ref2$win","currentWidth","currentHeight","canceled","observer","check","newWidth","newHeight","ResizeObserver","subtree","characterData","getEntries","entries","duration","shadowRoot","shadowHost","slotName","slot","slotProvider","onFocus","preventDefault","blur","currentScript","stackDetails","exec","scriptLocation","_i22","_Array$prototype$slic2","currentUID","getAttribute","hashedString","dataset","_ref3","_ref3$method","form","_i24","_Object$keys4","_body$key","input","submit","_ref$lifetime","lifetime","accessedStorage","STORAGE_KEY","newStateID","getState","storage","localStorageEnabled","rawStorage","parse","getID","getSession","session","__session__","created","guid","isStateFresh","getSessionState","state","getSessionID","getBelterExperimentStorage","isEventUnique","loggedBeacons","getRandomInteger","range","group","_ref$sample","sample","_ref$logTreatment","logTreatment","_ref$logCheckpoint","logCheckpoint","_ref$sticky","sticky","throttle","throttlePercentiles","treatment","started","forced","exp","isEnabled","isDisabled","getTreatment","log","checkpoint","payload","logStart","logComplete","_ref$version","version","global","globalKey","namespace","defValue","headerBuilders","_ref$method","_ref$headers","headers","json","data","_ref$win","_ref$timeout","normalizedHeaders","accept","builtHeaders","xhr","XMLHttpRequest","responseHeaders","rawHeaders","_rawHeaders$trim$spli2","trim","_line$split","getAllResponseHeaders","contentType","isJSON","responseBody","responseText","evt","setRequestHeader","ontimeout","send","dim","expected","timer","expect","_tryCatch","_handler","avoid","_fn","expectError","_tryCatch2","_handler2","wait","LOG_LEVEL","DEBUG","INFO","WARN","ERROR","PROTOCOL","FILE","AUTO_FLUSH_LEVEL","LOG_LEVEL_PRIORITY","DEFAULT_LOG_LEVEL","canUseSendBeacon","enableSendBeacon","hasHeaders","sendBeacon","Blob","isAmplitude","useBlob","blob","type","extendIfDefined","dispatchPossiblyUnhandledError","undefined","getParent","isMockProtocol","isActuallySameDomain","safeIndexOf","isFrameWindowClosed","hasNativeWeakMap","noop","inferCurrentScript","getHTTPTransport","httpWin","assertSameDomain","beaconResult","headerBuilder","parseHeaders","Logger","logLevel","transport","amplitudeApiKey","flushInterval","events","tracking","payloadBuilders","metaBuilders","trackingBuilders","print","isBrowser","console","warning","immediateFlush","builder","api_key","event_type","transitionName","event_properties","logger","debug","info","warn","track","trackingPayload","addPayloadBuilder","addBuilder","addMetaBuilder","addTrackingBuilder","setTransport","newTransport","configure","opts","logPayload","timestamp","enqueue","builders"],"mappings":"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","file":"beaver-logger.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"beaver\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"beaver\"] = factory();\n\telse\n\t\troot[\"beaver\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/* @flow */\n\n// $FlowFixMe\nmodule.exports = require('./dist/belter'); // eslint-disable-line import/no-commonjs\n","/* eslint flowtype/require-valid-file-annotation: off, import/no-commonjs: off */\nmodule.exports = require('./dist/zalgo-promise');\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"ZalgoPromise\",[],t):\"object\"==typeof exports?exports.ZalgoPromise=t():e.ZalgoPromise=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return{}.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";function n(e){try{if(!e)return!1;if(\"undefined\"!=typeof Promise&&e instanceof Promise)return!0;if(\"undefined\"!=typeof window&&\"function\"==typeof window.Window&&e instanceof window.Window)return!1;if(\"undefined\"!=typeof window&&\"function\"==typeof window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var r=t.call(e);if(\"[object Window]\"===r||\"[object global]\"===r||\"[object DOMWindow]\"===r)return!1}if(\"function\"==typeof e.then)return!0}catch(e){return!1}return!1}r.r(t),r.d(t,\"ZalgoPromise\",(function(){return a}));var o,i=[],c=[],u=0;function s(){if(!u&&o){var e=o;o=null,e.resolve()}}function f(){u+=1}function l(){u-=1,s()}var a=function(){function e(e){var t=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var r,n,o=!1,i=!1,c=!1;f();try{e((function(e){c?t.resolve(e):(o=!0,r=e)}),(function(e){c?t.reject(e):(i=!0,n=e)}))}catch(e){return l(),void this.reject(e)}l(),c=!0,o?this.resolve(r):i&&this.reject(n)}}var t=e.prototype;return t.resolve=function(e){if(this.resolved||this.rejected)return this;if(n(e))throw new Error(\"Can not resolve promise with another promise\");return this.resolved=!0,this.value=e,this.dispatch(),this},t.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if(n(e))throw new Error(\"Can not reject promise with another promise\");if(!e){var r=e&&\"function\"==typeof e.toString?e.toString():{}.toString.call(e);e=new Error(\"Expected reject to be called with Error, got \"+r)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout((function(){t.errorHandled||function(e,t){if(-1===i.indexOf(e)){i.push(e),setTimeout((function(){throw e}),1);for(var r=0;r<c.length;r++)c[r](e,t)}}(e,t)}),1),this.dispatch(),this},t.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},t.dispatch=function(){var t=this.resolved,r=this.rejected,o=this.handlers;if(!this.dispatching&&(t||r)){this.dispatching=!0,f();for(var i=function(e,t){return e.then((function(e){t.resolve(e)}),(function(e){t.reject(e)}))},c=0;c<o.length;c++){var u=o[c],s=u.onSuccess,a=u.onError,h=u.promise,d=void 0;if(t)try{d=s?s(this.value):this.value}catch(e){h.reject(e);continue}else if(r){if(!a){h.reject(this.error);continue}try{d=a(this.error)}catch(e){h.reject(e);continue}}if(d instanceof e&&(d.resolved||d.rejected)){var v=d;v.resolved?h.resolve(v.value):h.reject(v.error),v.errorHandled=!0}else n(d)?d instanceof e&&(d.resolved||d.rejected)?d.resolved?h.resolve(d.value):h.reject(d.error):i(d,h):h.resolve(d)}o.length=0,this.dispatching=!1,l()}},t.then=function(t,r){if(t&&\"function\"!=typeof t&&!t.call)throw new Error(\"Promise.then expected a function for success handler\");if(r&&\"function\"!=typeof r&&!r.call)throw new Error(\"Promise.then expected a function for error handler\");var n=new e;return this.handlers.push({promise:n,onSuccess:t,onError:r}),this.errorHandled=!0,this.dispatch(),n},t.catch=function(e){return this.then(void 0,e)},t.finally=function(t){if(t&&\"function\"!=typeof t&&!t.call)throw new Error(\"Promise.finally expected a function\");return this.then((function(r){return e.try(t).then((function(){return r}))}),(function(r){return e.try(t).then((function(){throw r}))}))},t.timeout=function(e,t){var r=this;if(this.resolved||this.rejected)return this;var n=setTimeout((function(){r.resolved||r.rejected||r.reject(t||new Error(\"Promise timed out after \"+e+\"ms\"))}),e);return this.then((function(e){return clearTimeout(n),e}))},t.toPromise=function(){if(\"undefined\"==typeof Promise)throw new TypeError(\"Could not find Promise\");return Promise.resolve(this)},t.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(t){return t instanceof e?t:n(t)?new e((function(e,r){return t.then(e,r)})):(new e).resolve(t)},e.reject=function(t){return(new e).reject(t)},e.asyncReject=function(t){return(new e).asyncReject(t)},e.all=function(t){var r=new e,o=t.length,i=[].slice();if(!o)return r.resolve(i),r;for(var c=function(e,t,n){return t.then((function(t){i[e]=t,0==(o-=1)&&r.resolve(i)}),(function(e){n.reject(e)}))},u=0;u<t.length;u++){var s=t[u];if(s instanceof e){if(s.resolved){i[u]=s.value,o-=1;continue}}else if(!n(s)){i[u]=s,o-=1;continue}c(u,e.resolve(s),r)}return 0===o&&r.resolve(i),r},e.hash=function(t){var r={},o=[],i=function(e){if(t.hasOwnProperty(e)){var i=t[e];n(i)?o.push(i.then((function(t){r[e]=t}))):r[e]=i}};for(var c in t)i(c);return e.all(o).then((function(){return r}))},e.map=function(t,r){return e.all(t.map(r))},e.onPossiblyUnhandledException=function(e){return function(e){return c.push(e),{cancel:function(){c.splice(c.indexOf(e),1)}}}(e)},e.try=function(t,r,n){if(t&&\"function\"!=typeof t&&!t.call)throw new Error(\"Promise.try expected a function\");var o;f();try{o=t.apply(r,n||[])}catch(t){return l(),e.reject(t)}return l(),e.resolve(o)},e.delay=function(t){return new e((function(e){setTimeout(e,t)}))},e.isPromise=function(t){return!!(t&&t instanceof e)||n(t)},e.flush=function(){return t=o=o||new e,s(),t;var t},e}()}])}));\n//# sourceMappingURL=zalgo-promise.js.map","!function(root, factory) {\n    \"object\" == typeof exports && \"object\" == typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(\"belter\", [], factory) : \"object\" == typeof exports ? exports.belter = factory() : root.belter = factory();\n}(\"undefined\" != typeof self ? self : this, (function() {\n    return function(modules) {\n        var installedModules = {};\n        function __webpack_require__(moduleId) {\n            if (installedModules[moduleId]) return installedModules[moduleId].exports;\n            var module = installedModules[moduleId] = {\n                i: moduleId,\n                l: !1,\n                exports: {}\n            };\n            modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n            module.l = !0;\n            return module.exports;\n        }\n        __webpack_require__.m = modules;\n        __webpack_require__.c = installedModules;\n        __webpack_require__.d = function(exports, name, getter) {\n            __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {\n                enumerable: !0,\n                get: getter\n            });\n        };\n        __webpack_require__.r = function(exports) {\n            \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports, Symbol.toStringTag, {\n                value: \"Module\"\n            });\n            Object.defineProperty(exports, \"__esModule\", {\n                value: !0\n            });\n        };\n        __webpack_require__.t = function(value, mode) {\n            1 & mode && (value = __webpack_require__(value));\n            if (8 & mode) return value;\n            if (4 & mode && \"object\" == typeof value && value && value.__esModule) return value;\n            var ns = Object.create(null);\n            __webpack_require__.r(ns);\n            Object.defineProperty(ns, \"default\", {\n                enumerable: !0,\n                value: value\n            });\n            if (2 & mode && \"string\" != typeof value) for (var key in value) __webpack_require__.d(ns, key, function(key) {\n                return value[key];\n            }.bind(null, key));\n            return ns;\n        };\n        __webpack_require__.n = function(module) {\n            var getter = module && module.__esModule ? function() {\n                return module.default;\n            } : function() {\n                return module;\n            };\n            __webpack_require__.d(getter, \"a\", getter);\n            return getter;\n        };\n        __webpack_require__.o = function(object, property) {\n            return {}.hasOwnProperty.call(object, property);\n        };\n        __webpack_require__.p = \"\";\n        return __webpack_require__(__webpack_require__.s = 0);\n    }([ function(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n        __webpack_require__.r(__webpack_exports__);\n        __webpack_require__.d(__webpack_exports__, \"getUserAgent\", (function() {\n            return getUserAgent;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDevice\", (function() {\n            return isDevice;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isTablet\", (function() {\n            return isTablet;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isWebView\", (function() {\n            return isWebView;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isStandAlone\", (function() {\n            return isStandAlone;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFacebookWebView\", (function() {\n            return isFacebookWebView;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFirefox\", (function() {\n            return isFirefox;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFirefoxIOS\", (function() {\n            return isFirefoxIOS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isEdgeIOS\", (function() {\n            return isEdgeIOS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isOperaMini\", (function() {\n            return isOperaMini;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isAndroid\", (function() {\n            return isAndroid;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIos\", (function() {\n            return isIos;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIOS14\", (function() {\n            return isIOS14;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isGoogleSearchApp\", (function() {\n            return isGoogleSearchApp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isQQBrowser\", (function() {\n            return isQQBrowser;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIosWebview\", (function() {\n            return isIosWebview;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isSFVC\", (function() {\n            return isSFVC;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isSFVCorSafari\", (function() {\n            return isSFVCorSafari;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isAndroidWebview\", (function() {\n            return isAndroidWebview;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIE\", (function() {\n            return device_isIE;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIECompHeader\", (function() {\n            return isIECompHeader;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElectron\", (function() {\n            return isElectron;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIEIntranet\", (function() {\n            return isIEIntranet;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isMacOsCna\", (function() {\n            return isMacOsCna;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"supportsPopups\", (function() {\n            return supportsPopups;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isChrome\", (function() {\n            return isChrome;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isSafari\", (function() {\n            return isSafari;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isApplePaySupported\", (function() {\n            return isApplePaySupported;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isCrossSiteTrackingEnabled\", (function() {\n            return isCrossSiteTrackingEnabled;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getBody\", (function() {\n            return getBody;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDocumentReady\", (function() {\n            return isDocumentReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDocumentInteractive\", (function() {\n            return isDocumentInteractive;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"urlEncode\", (function() {\n            return urlEncode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"waitForWindowReady\", (function() {\n            return waitForWindowReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"waitForDocumentReady\", (function() {\n            return waitForDocumentReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"waitForDocumentBody\", (function() {\n            return waitForDocumentBody;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"parseQuery\", (function() {\n            return parseQuery;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getQueryParam\", (function() {\n            return getQueryParam;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"urlWillRedirectPage\", (function() {\n            return urlWillRedirectPage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"formatQuery\", (function() {\n            return formatQuery;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"extendQuery\", (function() {\n            return extendQuery;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"extendUrl\", (function() {\n            return extendUrl;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"redirect\", (function() {\n            return redirect;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"hasMetaViewPort\", (function() {\n            return hasMetaViewPort;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElementVisible\", (function() {\n            return isElementVisible;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getPerformance\", (function() {\n            return getPerformance;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"enablePerformance\", (function() {\n            return enablePerformance;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getPageRenderTime\", (function() {\n            return getPageRenderTime;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"htmlEncode\", (function() {\n            return htmlEncode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isBrowser\", (function() {\n            return dom_isBrowser;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"querySelectorAll\", (function() {\n            return querySelectorAll;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"onClick\", (function() {\n            return onClick;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getScript\", (function() {\n            return getScript;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isLocalStorageEnabled\", (function() {\n            return isLocalStorageEnabled;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getBrowserLocales\", (function() {\n            return getBrowserLocales;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"appendChild\", (function() {\n            return appendChild;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getElementSafe\", (function() {\n            return getElementSafe;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getElement\", (function() {\n            return getElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"elementReady\", (function() {\n            return elementReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"PopupOpenError\", (function() {\n            return dom_PopupOpenError;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"popup\", (function() {\n            return popup;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"writeToWindow\", (function() {\n            return writeToWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"writeElementToWindow\", (function() {\n            return writeElementToWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"setStyle\", (function() {\n            return setStyle;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"awaitFrameLoad\", (function() {\n            return awaitFrameLoad;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"awaitFrameWindow\", (function() {\n            return awaitFrameWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"createElement\", (function() {\n            return createElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"iframe\", (function() {\n            return iframe;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"addEventListener\", (function() {\n            return addEventListener;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"bindEvents\", (function() {\n            return bindEvents;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"setVendorCSS\", (function() {\n            return setVendorCSS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"animate\", (function() {\n            return animate;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"makeElementVisible\", (function() {\n            return makeElementVisible;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"makeElementInvisible\", (function() {\n            return makeElementInvisible;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"showElement\", (function() {\n            return showElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"hideElement\", (function() {\n            return hideElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"destroyElement\", (function() {\n            return destroyElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"showAndAnimate\", (function() {\n            return showAndAnimate;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"animateAndHide\", (function() {\n            return animateAndHide;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"addClass\", (function() {\n            return addClass;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"removeClass\", (function() {\n            return removeClass;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElementClosed\", (function() {\n            return isElementClosed;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"watchElementForClose\", (function() {\n            return watchElementForClose;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"fixScripts\", (function() {\n            return fixScripts;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"onResize\", (function() {\n            return onResize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getResourceLoadTime\", (function() {\n            return getResourceLoadTime;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isShadowElement\", (function() {\n            return isShadowElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getShadowRoot\", (function() {\n            return getShadowRoot;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getShadowHost\", (function() {\n            return getShadowHost;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"insertShadowSlot\", (function() {\n            return insertShadowSlot;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"preventClickFocus\", (function() {\n            return preventClickFocus;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getStackTrace\", (function() {\n            return getStackTrace;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getCurrentScript\", (function() {\n            return getCurrentScript;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getCurrentScriptUID\", (function() {\n            return getCurrentScriptUID;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"submitForm\", (function() {\n            return submitForm;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"experiment\", (function() {\n            return experiment;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getGlobalNameSpace\", (function() {\n            return getGlobalNameSpace;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getStorage\", (function() {\n            return getStorage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElement\", (function() {\n            return isElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getFunctionName\", (function() {\n            return getFunctionName;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"setFunctionName\", (function() {\n            return setFunctionName;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"base64encode\", (function() {\n            return base64encode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"base64decode\", (function() {\n            return base64decode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"uniqueID\", (function() {\n            return uniqueID;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getGlobal\", (function() {\n            return getGlobal;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getObjectID\", (function() {\n            return getObjectID;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getEmptyObject\", (function() {\n            return getEmptyObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoize\", (function() {\n            return memoize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promiseIdentity\", (function() {\n            return promiseIdentity;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoizePromise\", (function() {\n            return memoizePromise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promisify\", (function() {\n            return promisify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"inlineMemoize\", (function() {\n            return inlineMemoize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"noop\", (function() {\n            return src_util_noop;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"once\", (function() {\n            return once;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"hashStr\", (function() {\n            return hashStr;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"strHashStr\", (function() {\n            return strHashStr;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"match\", (function() {\n            return match;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"awaitKey\", (function() {\n            return awaitKey;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"stringifyError\", (function() {\n            return stringifyError;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"stringifyErrorMessage\", (function() {\n            return stringifyErrorMessage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"stringify\", (function() {\n            return stringify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"domainMatches\", (function() {\n            return domainMatches;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"patchMethod\", (function() {\n            return patchMethod;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"extend\", (function() {\n            return extend;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"values\", (function() {\n            return util_values;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoizedValues\", (function() {\n            return memoizedValues;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"perc\", (function() {\n            return perc;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"min\", (function() {\n            return min;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"max\", (function() {\n            return max;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"roundUp\", (function() {\n            return roundUp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regexMap\", (function() {\n            return regexMap;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"svgToBase64\", (function() {\n            return svgToBase64;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"objFilter\", (function() {\n            return objFilter;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"identity\", (function() {\n            return identity;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regexTokenize\", (function() {\n            return regexTokenize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promiseDebounce\", (function() {\n            return promiseDebounce;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"safeInterval\", (function() {\n            return safeInterval;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isInteger\", (function() {\n            return isInteger;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFloat\", (function() {\n            return isFloat;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"serializePrimitive\", (function() {\n            return serializePrimitive;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"deserializePrimitive\", (function() {\n            return deserializePrimitive;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"dotify\", (function() {\n            return dotify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"undotify\", (function() {\n            return undotify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"eventEmitter\", (function() {\n            return eventEmitter;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"camelToDasherize\", (function() {\n            return camelToDasherize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"dasherizeToCamel\", (function() {\n            return dasherizeToCamel;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"capitalizeFirstLetter\", (function() {\n            return capitalizeFirstLetter;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"get\", (function() {\n            return util_get;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"safeTimeout\", (function() {\n            return safeTimeout;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"defineLazyProp\", (function() {\n            return defineLazyProp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"arrayFrom\", (function() {\n            return arrayFrom;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isObject\", (function() {\n            return isObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isObjectObject\", (function() {\n            return isObjectObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isPlainObject\", (function() {\n            return isPlainObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"replaceObject\", (function() {\n            return replaceObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"copyProp\", (function() {\n            return copyProp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regex\", (function() {\n            return regex;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regexAll\", (function() {\n            return regexAll;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDefined\", (function() {\n            return isDefined;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"cycle\", (function() {\n            return cycle;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"debounce\", (function() {\n            return debounce;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isRegex\", (function() {\n            return util_isRegex;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"weakMapMemoize\", (function() {\n            return util_weakMapMemoize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"weakMapMemoizePromise\", (function() {\n            return util_weakMapMemoizePromise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getOrSet\", (function() {\n            return getOrSet;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"cleanup\", (function() {\n            return cleanup;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"tryCatch\", (function() {\n            return tryCatch;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"removeFromArray\", (function() {\n            return removeFromArray;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"assertExists\", (function() {\n            return assertExists;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"unique\", (function() {\n            return unique;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"constHas\", (function() {\n            return constHas;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"dedupeErrors\", (function() {\n            return dedupeErrors;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"ExtendableError\", (function() {\n            return util_ExtendableError;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"request\", (function() {\n            return request;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"addHeaderBuilder\", (function() {\n            return addHeaderBuilder;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"TYPES\", (function() {\n            return types_TYPES;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoized\", (function() {\n            return memoized;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promise\", (function() {\n            return decorators_promise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isPerc\", (function() {\n            return isPerc;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isPx\", (function() {\n            return isPx;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"toNum\", (function() {\n            return toNum;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"toPx\", (function() {\n            return toPx;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"toCSS\", (function() {\n            return toCSS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"percOf\", (function() {\n            return percOf;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"normalizeDimension\", (function() {\n            return normalizeDimension;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"wrapPromise\", (function() {\n            return wrapPromise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"KEY_CODES\", (function() {\n            return KEY_CODES;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"ATTRIBUTES\", (function() {\n            return ATTRIBUTES;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"UID_HASH_LENGTH\", (function() {\n            return UID_HASH_LENGTH;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"sfvcScreens\", (function() {\n            return sfvcScreens;\n        }));\n        var sfvcScreens = {\n            926: {\n                device: \"iPhone 12/13 Pro Max\",\n                textSizeHeights: [ 752, 748, 744, 738 ],\n                textSizeHeightsNoTabs: [ 860, 858, 856, 854 ],\n                zoomHeight: {\n                    1.15: [ 752, 747, 744, 738 ],\n                    1.25: [ 753, 748, 744, 738 ],\n                    1.5: [ 752, 749, 744, 738 ],\n                    1.75: [ 753, 747, 744, 739 ],\n                    2: [ 752, 748, 744 ],\n                    2.5: [ 753, 748 ],\n                    3: [ 753, 744 ]\n                },\n                maybeSafari: {\n                    2: [ 738 ],\n                    2.5: [ 745, 738 ],\n                    3: [ 747, 738 ]\n                }\n            },\n            896: {\n                device: \"iPhone XS Max, iPhone 11 Pro Max, iPhone XR, iPhone 11\",\n                textSizeHeights: [ 721, 717, 713, 707 ],\n                textSizeHeightsNoTabs: [ 829, 827, 825, 823 ],\n                zoomHeight: {\n                    1.15: [ 721, 716, 713, 707 ],\n                    1.25: [ 721, 718, 713, 708 ],\n                    1.5: [ 722, 717, 713 ],\n                    1.75: [ 721, 718, 712, 707 ],\n                    2: [ 722, 718, 714, 708 ],\n                    2.5: [ 720, 718, 713, 708 ],\n                    3: [ 720, 717, 708 ]\n                },\n                maybeSafari: {\n                    1.5: [ 707 ],\n                    3: [ 714 ]\n                }\n            },\n            844: {\n                device: \"iPhone 12, iPhone 12 Pro\",\n                textSizeHeights: [ 670, 666, 662, 656 ],\n                textSizeHeightsNoTabs: [ 778, 776, 774, 772 ],\n                zoomHeight: {\n                    1.15: [ 670, 666, 662 ],\n                    1.25: [ 670, 666, 663, 656 ],\n                    1.5: [ 671, 666, 662 ],\n                    1.75: [ 670, 667, 662, 656 ],\n                    2: [ 670, 666, 662 ],\n                    2.5: [ 670, 663 ],\n                    3: [ 669, 666, 663, 657 ]\n                },\n                maybeSafari: {\n                    1.15: [ 656 ],\n                    1.5: [ 656 ],\n                    2: [ 656 ],\n                    2.5: [ 665, 655 ],\n                    3: [ 663 ]\n                }\n            },\n            812: {\n                device: \"iPhone X, iPhone XS, iPhone 11 Pro, iPhone 12 Mini\",\n                textSizeHeights: [ 641, 637, 633, 627 ],\n                textSizeHeightsNoTabs: [ 749, 747, 745, 743 ],\n                zoomHeight: {\n                    1.15: [ 641, 637, 633, 627 ],\n                    1.25: [ 641, 638, 633, 628 ],\n                    1.5: [ 641, 638, 633, 627 ],\n                    1.75: [ 641, 637, 634 ],\n                    2: [ 642, 638, 634, 628 ],\n                    2.5: [ 640, 638, 633, 628 ],\n                    3: [ 642, 633 ]\n                },\n                maybeSafari: {\n                    1.75: [ 627 ],\n                    3: [ 636, 627 ]\n                }\n            },\n            736: {\n                device: \"iPhone 6 Plus, iPhone 6S Plus, iPhone 7 Plus, iPhone 8 Plus\",\n                textSizeHeights: [ 628, 624, 620, 614 ],\n                textSizeHeightsNoTabs: [ 736, 734, 732, 730 ],\n                zoomHeight: {\n                    1.15: [ 628, 624, 620, 614 ],\n                    1.25: [ 628, 624, 620, 614 ],\n                    1.5: [ 629, 624, 620 ],\n                    1.75: [ 628, 625, 620, 614 ],\n                    2: [ 628, 624, 620 ],\n                    2.5: [ 628, 625, 620, 615 ],\n                    3: [ 627, 624, 615 ]\n                },\n                maybeSafari: {\n                    1.5: [ 614 ],\n                    2: [ 614 ],\n                    3: [ 621 ]\n                }\n            },\n            667: {\n                device: \"iPhone 6, iPhone 6S, iPhone 7, iPhone 8,  iPhone SE2\",\n                textSizeHeights: [ 559, 555, 551, 545 ],\n                textSizeHeightsNoTabs: [ 667, 665, 663, 661 ],\n                zoomHeight: {\n                    1.15: [ 559, 555, 551, 545 ],\n                    1.25: [ 559, 555, 551, 545 ],\n                    1.5: [ 560, 555, 551 ],\n                    1.75: [ 558, 555, 551 ],\n                    2: [ 560, 556, 552, 546 ],\n                    2.5: [ 560, 555, 550 ],\n                    3: [ 558, 555, 546 ]\n                },\n                maybeSafari: {\n                    1.5: [ 545 ],\n                    1.75: [ 544 ],\n                    2.5: [ 545 ],\n                    3: [ 552 ]\n                }\n            }\n        };\n        function getUserAgent() {\n            return window.navigator.mockUserAgent || window.navigator.userAgent;\n        }\n        var TABLET_PATTERN = /ip(a|ro)d|silk|xoom|playbook|tablet|kindle|Nexus 7|GT-P10|SC-01C|SHW-M180S|SM-T320|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC( Flyer|_Flyer)|Sprint ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos S7|Dell Streak 7|Advent Vega|A101IT|A70BHT|MID7015|Next2|nook|FOLIO|MB511.*RUTEM|Mac OS.*Silk/i;\n        function isDevice(userAgent) {\n            void 0 === userAgent && (userAgent = getUserAgent());\n            return !!userAgent.match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i);\n        }\n        function isTablet(userAgent) {\n            void 0 === userAgent && (userAgent = getUserAgent());\n            return TABLET_PATTERN.test(userAgent);\n        }\n        function isWebView() {\n            var userAgent = getUserAgent();\n            return /(iPhone|iPod|iPad|Macintosh).*AppleWebKit(?!.*Safari)|.*WKWebView/i.test(userAgent) || /\\bwv\\b/.test(userAgent) || /Android.*Version\\/(\\d)\\.(\\d)/i.test(userAgent);\n        }\n        function isStandAlone() {\n            return !0 === window.navigator.standalone || window.matchMedia(\"(display-mode: standalone)\").matches;\n        }\n        function isFacebookWebView(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /FBAN/.test(ua) || /FBAV/.test(ua);\n        }\n        function isFirefox(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Firefox/i.test(ua);\n        }\n        function isFirefoxIOS(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /FxiOS/i.test(ua);\n        }\n        function isEdgeIOS(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /EdgiOS/i.test(ua);\n        }\n        function isOperaMini(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Opera Mini/i.test(ua);\n        }\n        function isAndroid(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Android/.test(ua);\n        }\n        function isIos(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /iPhone|iPod|iPad/.test(ua);\n        }\n        function isIOS14(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /iPhone.*OS.*(1)?(?:(1)[0-4]| [0-9])_/.test(ua);\n        }\n        function isGoogleSearchApp(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /\\bGSA\\b/.test(ua);\n        }\n        function isQQBrowser(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /QQBrowser/.test(ua);\n        }\n        function isIosWebview(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return !!isIos(ua) && (!!isGoogleSearchApp(ua) || /.+AppleWebKit(?!.*Safari)|.*WKWebView/.test(ua));\n        }\n        function isSFVC(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            if (isIos(ua)) {\n                var height = window.innerHeight;\n                var scale = Math.round(window.screen.width / window.innerWidth * 100) / 100;\n                var computedHeight = Math.round(height * scale);\n                var device = null;\n                if (isIOS14(ua)) device = sfvcScreens[window.outerHeight]; else {\n                    if (1 !== scale) return !0;\n                    device = sfvcScreens[window.outerHeight];\n                }\n                return !device || (scale > 1 && device.zoomHeight && device.zoomHeight[scale] ? -1 !== device.zoomHeight[scale].indexOf(computedHeight) : -1 !== device.textSizeHeights.indexOf(computedHeight) || -1 !== device.textSizeHeightsNoTabs.indexOf(computedHeight));\n            }\n            return !1;\n        }\n        function isSFVCorSafari(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            if (isIos(ua)) {\n                var sfvc = isSFVC(ua);\n                var device = isIOS14(ua) ? sfvcScreens[window.outerHeight] : null;\n                if (!device) return !1;\n                var height = window.innerHeight;\n                var scale = Math.round(window.screen.width / window.innerWidth * 100) / 100;\n                var computedHeight = Math.round(height * scale);\n                var possibleSafariSizes = device.maybeSafari;\n                var maybeSafari = !1;\n                scale > 1 && possibleSafariSizes[scale] && -1 !== possibleSafariSizes[scale].indexOf(computedHeight) && (maybeSafari = !0);\n                return sfvc || maybeSafari;\n            }\n            return !1;\n        }\n        function isAndroidWebview(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return !!isAndroid(ua) && /Version\\/[\\d.]+/.test(ua) && !isOperaMini(ua);\n        }\n        function device_isIE() {\n            return !!window.document.documentMode || Boolean(window.navigator && window.navigator.userAgent && /Edge|MSIE|rv:11/i.test(window.navigator.userAgent));\n        }\n        function isIECompHeader() {\n            var mHttp = window.document.querySelector('meta[http-equiv=\"X-UA-Compatible\"]');\n            var mContent = window.document.querySelector('meta[content=\"IE=edge\"]');\n            return !(!mHttp || !mContent);\n        }\n        function isElectron() {\n            return !(\"undefined\" == typeof process || !process.versions || !process.versions.electron);\n        }\n        function isIEIntranet() {\n            if (window.document.documentMode) try {\n                var status = window.status;\n                window.status = \"testIntranetMode\";\n                if (\"testIntranetMode\" === window.status) {\n                    window.status = status;\n                    return !0;\n                }\n                return !1;\n            } catch (err) {\n                return !1;\n            }\n            return !1;\n        }\n        function isMacOsCna() {\n            var userAgent = getUserAgent();\n            return /Macintosh.*AppleWebKit(?!.*Safari)/i.test(userAgent);\n        }\n        function supportsPopups(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return !(isIosWebview(ua) || isAndroidWebview(ua) || isOperaMini(ua) || isFirefoxIOS(ua) || isEdgeIOS(ua) || isFacebookWebView(ua) || isQQBrowser(ua) || isElectron() || isMacOsCna() || isStandAlone());\n        }\n        function isChrome(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Chrome|Chromium|CriOS/.test(ua) && !/SamsungBrowser|Silk|EdgA/.test(ua);\n        }\n        function isSafari(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Safari/.test(ua) && !isChrome(ua) && !/Silk|FxiOS|EdgiOS/.test(ua);\n        }\n        function isApplePaySupported() {\n            try {\n                if (window.ApplePaySession && window.ApplePaySession.supportsVersion(3) && window.ApplePaySession.canMakePayments()) return !0;\n            } catch (e) {\n                return !1;\n            }\n            return !1;\n        }\n        function isCrossSiteTrackingEnabled(expectedCookieKey) {\n            return -1 === window.document.cookie.indexOf(expectedCookieKey);\n        }\n        function _setPrototypeOf(o, p) {\n            return (_setPrototypeOf = Object.setPrototypeOf || function(o, p) {\n                o.__proto__ = p;\n                return o;\n            })(o, p);\n        }\n        function _inheritsLoose(subClass, superClass) {\n            subClass.prototype = Object.create(superClass.prototype);\n            subClass.prototype.constructor = subClass;\n            _setPrototypeOf(subClass, superClass);\n        }\n        function _extends() {\n            return (_extends = Object.assign || function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n                    for (var key in source) ({}).hasOwnProperty.call(source, key) && (target[key] = source[key]);\n                }\n                return target;\n            }).apply(this, arguments);\n        }\n        function utils_isPromise(item) {\n            try {\n                if (!item) return !1;\n                if (\"undefined\" != typeof Promise && item instanceof Promise) return !0;\n                if (\"undefined\" != typeof window && \"function\" == typeof window.Window && item instanceof window.Window) return !1;\n                if (\"undefined\" != typeof window && \"function\" == typeof window.constructor && item instanceof window.constructor) return !1;\n                var _toString = {}.toString;\n                if (_toString) {\n                    var name = _toString.call(item);\n                    if (\"[object Window]\" === name || \"[object global]\" === name || \"[object DOMWindow]\" === name) return !1;\n                }\n                if (\"function\" == typeof item.then) return !0;\n            } catch (err) {\n                return !1;\n            }\n            return !1;\n        }\n        var dispatchedErrors = [];\n        var possiblyUnhandledPromiseHandlers = [];\n        var activeCount = 0;\n        var flushPromise;\n        function flushActive() {\n            if (!activeCount && flushPromise) {\n                var promise = flushPromise;\n                flushPromise = null;\n                promise.resolve();\n            }\n        }\n        function startActive() {\n            activeCount += 1;\n        }\n        function endActive() {\n            activeCount -= 1;\n            flushActive();\n        }\n        var promise_ZalgoPromise = function() {\n            function ZalgoPromise(handler) {\n                var _this = this;\n                this.resolved = void 0;\n                this.rejected = void 0;\n                this.errorHandled = void 0;\n                this.value = void 0;\n                this.error = void 0;\n                this.handlers = void 0;\n                this.dispatching = void 0;\n                this.stack = void 0;\n                this.resolved = !1;\n                this.rejected = !1;\n                this.errorHandled = !1;\n                this.handlers = [];\n                if (handler) {\n                    var _result;\n                    var _error;\n                    var resolved = !1;\n                    var rejected = !1;\n                    var isAsync = !1;\n                    startActive();\n                    try {\n                        handler((function(res) {\n                            if (isAsync) _this.resolve(res); else {\n                                resolved = !0;\n                                _result = res;\n                            }\n                        }), (function(err) {\n                            if (isAsync) _this.reject(err); else {\n                                rejected = !0;\n                                _error = err;\n                            }\n                        }));\n                    } catch (err) {\n                        endActive();\n                        this.reject(err);\n                        return;\n                    }\n                    endActive();\n                    isAsync = !0;\n                    resolved ? this.resolve(_result) : rejected && this.reject(_error);\n                }\n            }\n            var _proto = ZalgoPromise.prototype;\n            _proto.resolve = function(result) {\n                if (this.resolved || this.rejected) return this;\n                if (utils_isPromise(result)) throw new Error(\"Can not resolve promise with another promise\");\n                this.resolved = !0;\n                this.value = result;\n                this.dispatch();\n                return this;\n            };\n            _proto.reject = function(error) {\n                var _this2 = this;\n                if (this.resolved || this.rejected) return this;\n                if (utils_isPromise(error)) throw new Error(\"Can not reject promise with another promise\");\n                if (!error) {\n                    var _err = error && \"function\" == typeof error.toString ? error.toString() : {}.toString.call(error);\n                    error = new Error(\"Expected reject to be called with Error, got \" + _err);\n                }\n                this.rejected = !0;\n                this.error = error;\n                this.errorHandled || setTimeout((function() {\n                    _this2.errorHandled || function(err, promise) {\n                        if (-1 === dispatchedErrors.indexOf(err)) {\n                            dispatchedErrors.push(err);\n                            setTimeout((function() {\n                                throw err;\n                            }), 1);\n                            for (var j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) possiblyUnhandledPromiseHandlers[j](err, promise);\n                        }\n                    }(error, _this2);\n                }), 1);\n                this.dispatch();\n                return this;\n            };\n            _proto.asyncReject = function(error) {\n                this.errorHandled = !0;\n                this.reject(error);\n                return this;\n            };\n            _proto.dispatch = function() {\n                var resolved = this.resolved, rejected = this.rejected, handlers = this.handlers;\n                if (!this.dispatching && (resolved || rejected)) {\n                    this.dispatching = !0;\n                    startActive();\n                    var chain = function(firstPromise, secondPromise) {\n                        return firstPromise.then((function(res) {\n                            secondPromise.resolve(res);\n                        }), (function(err) {\n                            secondPromise.reject(err);\n                        }));\n                    };\n                    for (var i = 0; i < handlers.length; i++) {\n                        var _handlers$i = handlers[i], onSuccess = _handlers$i.onSuccess, onError = _handlers$i.onError, promise = _handlers$i.promise;\n                        var _result2 = void 0;\n                        if (resolved) try {\n                            _result2 = onSuccess ? onSuccess(this.value) : this.value;\n                        } catch (err) {\n                            promise.reject(err);\n                            continue;\n                        } else if (rejected) {\n                            if (!onError) {\n                                promise.reject(this.error);\n                                continue;\n                            }\n                            try {\n                                _result2 = onError(this.error);\n                            } catch (err) {\n                                promise.reject(err);\n                                continue;\n                            }\n                        }\n                        if (_result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected)) {\n                            var promiseResult = _result2;\n                            promiseResult.resolved ? promise.resolve(promiseResult.value) : promise.reject(promiseResult.error);\n                            promiseResult.errorHandled = !0;\n                        } else utils_isPromise(_result2) ? _result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected) ? _result2.resolved ? promise.resolve(_result2.value) : promise.reject(_result2.error) : chain(_result2, promise) : promise.resolve(_result2);\n                    }\n                    handlers.length = 0;\n                    this.dispatching = !1;\n                    endActive();\n                }\n            };\n            _proto.then = function(onSuccess, onError) {\n                if (onSuccess && \"function\" != typeof onSuccess && !onSuccess.call) throw new Error(\"Promise.then expected a function for success handler\");\n                if (onError && \"function\" != typeof onError && !onError.call) throw new Error(\"Promise.then expected a function for error handler\");\n                var promise = new ZalgoPromise;\n                this.handlers.push({\n                    promise: promise,\n                    onSuccess: onSuccess,\n                    onError: onError\n                });\n                this.errorHandled = !0;\n                this.dispatch();\n                return promise;\n            };\n            _proto.catch = function(onError) {\n                return this.then(void 0, onError);\n            };\n            _proto.finally = function(onFinally) {\n                if (onFinally && \"function\" != typeof onFinally && !onFinally.call) throw new Error(\"Promise.finally expected a function\");\n                return this.then((function(result) {\n                    return ZalgoPromise.try(onFinally).then((function() {\n                        return result;\n                    }));\n                }), (function(err) {\n                    return ZalgoPromise.try(onFinally).then((function() {\n                        throw err;\n                    }));\n                }));\n            };\n            _proto.timeout = function(time, err) {\n                var _this3 = this;\n                if (this.resolved || this.rejected) return this;\n                var timeout = setTimeout((function() {\n                    _this3.resolved || _this3.rejected || _this3.reject(err || new Error(\"Promise timed out after \" + time + \"ms\"));\n                }), time);\n                return this.then((function(result) {\n                    clearTimeout(timeout);\n                    return result;\n                }));\n            };\n            _proto.toPromise = function() {\n                if (\"undefined\" == typeof Promise) throw new TypeError(\"Could not find Promise\");\n                return Promise.resolve(this);\n            };\n            _proto.lazy = function() {\n                this.errorHandled = !0;\n                return this;\n            };\n            ZalgoPromise.resolve = function(value) {\n                return value instanceof ZalgoPromise ? value : utils_isPromise(value) ? new ZalgoPromise((function(resolve, reject) {\n                    return value.then(resolve, reject);\n                })) : (new ZalgoPromise).resolve(value);\n            };\n            ZalgoPromise.reject = function(error) {\n                return (new ZalgoPromise).reject(error);\n            };\n            ZalgoPromise.asyncReject = function(error) {\n                return (new ZalgoPromise).asyncReject(error);\n            };\n            ZalgoPromise.all = function(promises) {\n                var promise = new ZalgoPromise;\n                var count = promises.length;\n                var results = [].slice();\n                if (!count) {\n                    promise.resolve(results);\n                    return promise;\n                }\n                var chain = function(i, firstPromise, secondPromise) {\n                    return firstPromise.then((function(res) {\n                        results[i] = res;\n                        0 == (count -= 1) && promise.resolve(results);\n                    }), (function(err) {\n                        secondPromise.reject(err);\n                    }));\n                };\n                for (var i = 0; i < promises.length; i++) {\n                    var prom = promises[i];\n                    if (prom instanceof ZalgoPromise) {\n                        if (prom.resolved) {\n                            results[i] = prom.value;\n                            count -= 1;\n                            continue;\n                        }\n                    } else if (!utils_isPromise(prom)) {\n                        results[i] = prom;\n                        count -= 1;\n                        continue;\n                    }\n                    chain(i, ZalgoPromise.resolve(prom), promise);\n                }\n                0 === count && promise.resolve(results);\n                return promise;\n            };\n            ZalgoPromise.hash = function(promises) {\n                var result = {};\n                var awaitPromises = [];\n                var _loop = function(key) {\n                    if (promises.hasOwnProperty(key)) {\n                        var value = promises[key];\n                        utils_isPromise(value) ? awaitPromises.push(value.then((function(res) {\n                            result[key] = res;\n                        }))) : result[key] = value;\n                    }\n                };\n                for (var key in promises) _loop(key);\n                return ZalgoPromise.all(awaitPromises).then((function() {\n                    return result;\n                }));\n            };\n            ZalgoPromise.map = function(items, method) {\n                return ZalgoPromise.all(items.map(method));\n            };\n            ZalgoPromise.onPossiblyUnhandledException = function(handler) {\n                return function(handler) {\n                    possiblyUnhandledPromiseHandlers.push(handler);\n                    return {\n                        cancel: function() {\n                            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n                        }\n                    };\n                }(handler);\n            };\n            ZalgoPromise.try = function(method, context, args) {\n                if (method && \"function\" != typeof method && !method.call) throw new Error(\"Promise.try expected a function\");\n                var result;\n                startActive();\n                try {\n                    result = method.apply(context, args || []);\n                } catch (err) {\n                    endActive();\n                    return ZalgoPromise.reject(err);\n                }\n                endActive();\n                return ZalgoPromise.resolve(result);\n            };\n            ZalgoPromise.delay = function(_delay) {\n                return new ZalgoPromise((function(resolve) {\n                    setTimeout(resolve, _delay);\n                }));\n            };\n            ZalgoPromise.isPromise = function(value) {\n                return !!(value && value instanceof ZalgoPromise) || utils_isPromise(value);\n            };\n            ZalgoPromise.flush = function() {\n                return function(Zalgo) {\n                    var promise = flushPromise = flushPromise || new Zalgo;\n                    flushActive();\n                    return promise;\n                }(ZalgoPromise);\n            };\n            return ZalgoPromise;\n        }();\n        var IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\n        function getActualProtocol(win) {\n            void 0 === win && (win = window);\n            return win.location.protocol;\n        }\n        function getProtocol(win) {\n            void 0 === win && (win = window);\n            if (win.mockDomain) {\n                var protocol = win.mockDomain.split(\"//\")[0];\n                if (protocol) return protocol;\n            }\n            return getActualProtocol(win);\n        }\n        function isAboutProtocol(win) {\n            void 0 === win && (win = window);\n            return \"about:\" === getProtocol(win);\n        }\n        function canReadFromWindow(win) {\n            try {\n                return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function getActualDomain(win) {\n            void 0 === win && (win = window);\n            var location = win.location;\n            if (!location) throw new Error(\"Can not read window location\");\n            var protocol = getActualProtocol(win);\n            if (!protocol) throw new Error(\"Can not read window protocol\");\n            if (\"file:\" === protocol) return \"file://\";\n            if (\"about:\" === protocol) {\n                var parent = function(win) {\n                    void 0 === win && (win = window);\n                    if (win) try {\n                        if (win.parent && win.parent !== win) return win.parent;\n                    } catch (err) {}\n                }(win);\n                return parent && canReadFromWindow() ? getActualDomain(parent) : \"about://\";\n            }\n            var host = location.host;\n            if (!host) throw new Error(\"Can not read window host\");\n            return protocol + \"//\" + host;\n        }\n        function getDomain(win) {\n            void 0 === win && (win = window);\n            var domain = getActualDomain(win);\n            return domain && win.mockDomain && 0 === win.mockDomain.indexOf(\"mock:\") ? win.mockDomain : domain;\n        }\n        function isSameDomain(win) {\n            if (!function(win) {\n                try {\n                    if (win === window) return !0;\n                } catch (err) {}\n                try {\n                    var desc = Object.getOwnPropertyDescriptor(win, \"location\");\n                    if (desc && !1 === desc.enumerable) return !1;\n                } catch (err) {}\n                try {\n                    if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                } catch (err) {}\n                try {\n                    if (function(win) {\n                        void 0 === win && (win = window);\n                        return \"mock:\" === getProtocol(win);\n                    }(win) && canReadFromWindow()) return !0;\n                } catch (err) {}\n                try {\n                    if (getActualDomain(win) === getActualDomain(window)) return !0;\n                } catch (err) {}\n                return !1;\n            }(win)) return !1;\n            try {\n                if (win === window) return !0;\n                if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                if (getDomain(window) === getDomain(win)) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        var iframeWindows = [];\n        var iframeFrames = [];\n        function isWindowClosed(win, allowMock) {\n            void 0 === allowMock && (allowMock = !0);\n            try {\n                if (win === window) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (!win) return !0;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (win.closed) return !0;\n            } catch (err) {\n                return !err || err.message !== IE_WIN_ACCESS_ERROR;\n            }\n            if (allowMock && isSameDomain(win)) try {\n                if (win.mockclosed) return !0;\n            } catch (err) {}\n            try {\n                if (!win.parent || !win.top) return !0;\n            } catch (err) {}\n            var iframeIndex = function(collection, item) {\n                for (var i = 0; i < collection.length; i++) try {\n                    if (collection[i] === item) return i;\n                } catch (err) {}\n                return -1;\n            }(iframeWindows, win);\n            if (-1 !== iframeIndex) {\n                var frame = iframeFrames[iframeIndex];\n                if (frame && function(frame) {\n                    if (!frame.contentWindow) return !0;\n                    if (!frame.parentNode) return !0;\n                    var doc = frame.ownerDocument;\n                    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n                        var parent = frame;\n                        for (;parent.parentNode && parent.parentNode !== parent; ) parent = parent.parentNode;\n                        if (!parent.host || !doc.documentElement.contains(parent.host)) return !0;\n                    }\n                    return !1;\n                }(frame)) return !0;\n            }\n            return !1;\n        }\n        function isWindow(obj) {\n            try {\n                if (obj === window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (\"[object Window]\" === {}.toString.call(obj)) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (window.Window && obj instanceof window.Window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.self === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.parent === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.top === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && \"__unlikely_value__\" === obj.__cross_domain_utils_window_check__) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (\"postMessage\" in obj && \"self\" in obj && \"location\" in obj) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function util_safeIndexOf(collection, item) {\n            for (var i = 0; i < collection.length; i++) try {\n                if (collection[i] === item) return i;\n            } catch (err) {}\n            return -1;\n        }\n        var weakmap_CrossDomainSafeWeakMap = function() {\n            function CrossDomainSafeWeakMap() {\n                this.name = void 0;\n                this.weakmap = void 0;\n                this.keys = void 0;\n                this.values = void 0;\n                this.name = \"__weakmap_\" + (1e9 * Math.random() >>> 0) + \"__\";\n                if (function() {\n                    if (\"undefined\" == typeof WeakMap) return !1;\n                    if (void 0 === Object.freeze) return !1;\n                    try {\n                        var testWeakMap = new WeakMap;\n                        var testKey = {};\n                        Object.freeze(testKey);\n                        testWeakMap.set(testKey, \"__testvalue__\");\n                        return \"__testvalue__\" === testWeakMap.get(testKey);\n                    } catch (err) {\n                        return !1;\n                    }\n                }()) try {\n                    this.weakmap = new WeakMap;\n                } catch (err) {}\n                this.keys = [];\n                this.values = [];\n            }\n            var _proto = CrossDomainSafeWeakMap.prototype;\n            _proto._cleanupClosedWindows = function() {\n                var weakmap = this.weakmap;\n                var keys = this.keys;\n                for (var i = 0; i < keys.length; i++) {\n                    var value = keys[i];\n                    if (isWindow(value) && isWindowClosed(value)) {\n                        if (weakmap) try {\n                            weakmap.delete(value);\n                        } catch (err) {}\n                        keys.splice(i, 1);\n                        this.values.splice(i, 1);\n                        i -= 1;\n                    }\n                }\n            };\n            _proto.isSafeToReadWrite = function(key) {\n                return !isWindow(key);\n            };\n            _proto.set = function(key, value) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.set(key, value);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var name = this.name;\n                    var entry = key[name];\n                    entry && entry[0] === key ? entry[1] = value : Object.defineProperty(key, name, {\n                        value: [ key, value ],\n                        writable: !0\n                    });\n                    return;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var values = this.values;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 === index) {\n                    keys.push(key);\n                    values.push(value);\n                } else values[index] = value;\n            };\n            _proto.get = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return weakmap.get(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return entry && entry[0] === key ? entry[1] : void 0;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var index = util_safeIndexOf(this.keys, key);\n                if (-1 !== index) return this.values[index];\n            };\n            _proto.delete = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.delete(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    entry && entry[0] === key && (entry[0] = entry[1] = void 0);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 !== index) {\n                    keys.splice(index, 1);\n                    this.values.splice(index, 1);\n                }\n            };\n            _proto.has = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return !0;\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return !(!entry || entry[0] !== key);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                return -1 !== util_safeIndexOf(this.keys, key);\n            };\n            _proto.getOrSet = function(key, getter) {\n                if (this.has(key)) return this.get(key);\n                var value = getter();\n                this.set(key, value);\n                return value;\n            };\n            return CrossDomainSafeWeakMap;\n        }();\n        function _getPrototypeOf(o) {\n            return (_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\n                return o.__proto__ || Object.getPrototypeOf(o);\n            })(o);\n        }\n        function _isNativeReflectConstruct() {\n            if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n            if (Reflect.construct.sham) return !1;\n            if (\"function\" == typeof Proxy) return !0;\n            try {\n                Date.prototype.toString.call(Reflect.construct(Date, [], (function() {})));\n                return !0;\n            } catch (e) {\n                return !1;\n            }\n        }\n        function construct_construct(Parent, args, Class) {\n            return (construct_construct = _isNativeReflectConstruct() ? Reflect.construct : function(Parent, args, Class) {\n                var a = [ null ];\n                a.push.apply(a, args);\n                var instance = new (Function.bind.apply(Parent, a));\n                Class && _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            }).apply(null, arguments);\n        }\n        function wrapNativeSuper_wrapNativeSuper(Class) {\n            var _cache = \"function\" == typeof Map ? new Map : void 0;\n            return (wrapNativeSuper_wrapNativeSuper = function(Class) {\n                if (null === Class || !(fn = Class, -1 !== Function.toString.call(fn).indexOf(\"[native code]\"))) return Class;\n                var fn;\n                if (\"function\" != typeof Class) throw new TypeError(\"Super expression must either be null or a function\");\n                if (void 0 !== _cache) {\n                    if (_cache.has(Class)) return _cache.get(Class);\n                    _cache.set(Class, Wrapper);\n                }\n                function Wrapper() {\n                    return construct_construct(Class, arguments, _getPrototypeOf(this).constructor);\n                }\n                Wrapper.prototype = Object.create(Class.prototype, {\n                    constructor: {\n                        value: Wrapper,\n                        enumerable: !1,\n                        writable: !0,\n                        configurable: !0\n                    }\n                });\n                return _setPrototypeOf(Wrapper, Class);\n            })(Class);\n        }\n        function isElement(element) {\n            var passed = !1;\n            try {\n                (element instanceof window.Element || null !== element && \"object\" == typeof element && 1 === element.nodeType && \"object\" == typeof element.style && \"object\" == typeof element.ownerDocument) && (passed = !0);\n            } catch (_) {}\n            return passed;\n        }\n        function getFunctionName(fn) {\n            return fn.name || fn.__name__ || fn.displayName || \"anonymous\";\n        }\n        function setFunctionName(fn, name) {\n            try {\n                delete fn.name;\n                fn.name = name;\n            } catch (err) {}\n            fn.__name__ = fn.displayName = name;\n            return fn;\n        }\n        function base64encode(str) {\n            if (\"function\" == typeof btoa) return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (function(m, p1) {\n                return String.fromCharCode(parseInt(p1, 16));\n            }))).replace(/[=]/g, \"\");\n            if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"utf8\").toString(\"base64\").replace(/[=]/g, \"\");\n            throw new Error(\"Can not find window.btoa or Buffer\");\n        }\n        function base64decode(str) {\n            if (\"function\" == typeof atob) return decodeURIComponent([].map.call(atob(str), (function(c) {\n                return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n            })).join(\"\"));\n            if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"base64\").toString(\"utf8\");\n            throw new Error(\"Can not find window.atob or Buffer\");\n        }\n        function uniqueID() {\n            var chars = \"0123456789abcdef\";\n            return \"uid_\" + \"xxxxxxxxxx\".replace(/./g, (function() {\n                return chars.charAt(Math.floor(Math.random() * chars.length));\n            })) + \"_\" + base64encode((new Date).toISOString().slice(11, 19).replace(\"T\", \".\")).replace(/[^a-zA-Z0-9]/g, \"\").toLowerCase();\n        }\n        function getGlobal() {\n            if (\"undefined\" != typeof window) return window;\n            if (\"undefined\" != typeof window) return window;\n            if (\"undefined\" != typeof global) return global;\n            throw new Error(\"No global found\");\n        }\n        var objectIDs;\n        function getObjectID(obj) {\n            objectIDs = objectIDs || new weakmap_CrossDomainSafeWeakMap;\n            if (null == obj || \"object\" != typeof obj && \"function\" != typeof obj) throw new Error(\"Invalid object\");\n            var uid = objectIDs.get(obj);\n            if (!uid) {\n                uid = typeof obj + \":\" + uniqueID();\n                objectIDs.set(obj, uid);\n            }\n            return uid;\n        }\n        function serializeArgs(args) {\n            try {\n                return JSON.stringify([].slice.call(args), (function(subkey, val) {\n                    return \"function\" == typeof val ? \"memoize[\" + getObjectID(val) + \"]\" : isElement(val) ? {} : val;\n                }));\n            } catch (err) {\n                throw new Error(\"Arguments not serializable -- can not be used to memoize\");\n            }\n        }\n        function getEmptyObject() {\n            return {};\n        }\n        var memoizeGlobalIndex = 0;\n        var memoizeGlobalIndexValidFrom = 0;\n        function memoize(method, options) {\n            void 0 === options && (options = {});\n            var _options$thisNamespac = options.thisNamespace, thisNamespace = void 0 !== _options$thisNamespac && _options$thisNamespac, cacheTime = options.time;\n            var simpleCache;\n            var thisCache;\n            var memoizeIndex = memoizeGlobalIndex;\n            memoizeGlobalIndex += 1;\n            var memoizedFunction = function() {\n                for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n                if (memoizeIndex < memoizeGlobalIndexValidFrom) {\n                    simpleCache = null;\n                    thisCache = null;\n                    memoizeIndex = memoizeGlobalIndex;\n                    memoizeGlobalIndex += 1;\n                }\n                var cache;\n                cache = thisNamespace ? (thisCache = thisCache || new weakmap_CrossDomainSafeWeakMap).getOrSet(this, getEmptyObject) : simpleCache = simpleCache || {};\n                var cacheKey;\n                try {\n                    cacheKey = serializeArgs(args);\n                } catch (_unused) {\n                    return method.apply(this, arguments);\n                }\n                var cacheResult = cache[cacheKey];\n                if (cacheResult && cacheTime && Date.now() - cacheResult.time < cacheTime) {\n                    delete cache[cacheKey];\n                    cacheResult = null;\n                }\n                if (cacheResult) return cacheResult.value;\n                var time = Date.now();\n                var value = method.apply(this, arguments);\n                cache[cacheKey] = {\n                    time: time,\n                    value: value\n                };\n                return value;\n            };\n            memoizedFunction.reset = function() {\n                simpleCache = null;\n                thisCache = null;\n            };\n            return setFunctionName(memoizedFunction, (options.name || getFunctionName(method)) + \"::memoized\");\n        }\n        memoize.clear = function() {\n            memoizeGlobalIndexValidFrom = memoizeGlobalIndex;\n        };\n        function promiseIdentity(item) {\n            return promise_ZalgoPromise.resolve(item);\n        }\n        function memoizePromise(method) {\n            var cache = {};\n            function memoizedPromiseFunction() {\n                var _arguments = arguments, _this = this;\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n                var key = serializeArgs(args);\n                if (cache.hasOwnProperty(key)) return cache[key];\n                cache[key] = promise_ZalgoPromise.try((function() {\n                    return method.apply(_this, _arguments);\n                })).finally((function() {\n                    delete cache[key];\n                }));\n                return cache[key];\n            }\n            memoizedPromiseFunction.reset = function() {\n                cache = {};\n            };\n            return setFunctionName(memoizedPromiseFunction, getFunctionName(method) + \"::promiseMemoized\");\n        }\n        function promisify(method, options) {\n            void 0 === options && (options = {});\n            function promisifiedFunction() {\n                return promise_ZalgoPromise.try(method, this, arguments);\n            }\n            options.name && (promisifiedFunction.displayName = options.name + \":promisified\");\n            return setFunctionName(promisifiedFunction, getFunctionName(method) + \"::promisified\");\n        }\n        function inlineMemoize(method, logic, args) {\n            void 0 === args && (args = []);\n            var cache = method.__inline_memoize_cache__ = method.__inline_memoize_cache__ || {};\n            var key = serializeArgs(args);\n            return cache.hasOwnProperty(key) ? cache[key] : cache[key] = logic.apply(void 0, args);\n        }\n        function src_util_noop() {}\n        function once(method) {\n            var called = !1;\n            return setFunctionName((function() {\n                if (!called) {\n                    called = !0;\n                    return method.apply(this, arguments);\n                }\n            }), getFunctionName(method) + \"::once\");\n        }\n        function hashStr(str) {\n            var hash = 0;\n            for (var i = 0; i < str.length; i++) hash += str[i].charCodeAt(0) * Math.pow(i % 10 + 1, 5);\n            return Math.floor(Math.pow(Math.sqrt(hash), 5));\n        }\n        function strHashStr(str) {\n            var hash = \"\";\n            for (var i = 0; i < str.length; i++) {\n                var total = str[i].charCodeAt(0) * i;\n                str[i + 1] && (total += str[i + 1].charCodeAt(0) * (i - 1));\n                hash += String.fromCharCode(97 + Math.abs(total) % 26);\n            }\n            return hash;\n        }\n        function match(str, pattern) {\n            var regmatch = str.match(pattern);\n            if (regmatch) return regmatch[1];\n        }\n        function awaitKey(obj, key) {\n            return new promise_ZalgoPromise((function(resolve) {\n                var value = obj[key];\n                if (value) return resolve(value);\n                delete obj[key];\n                Object.defineProperty(obj, key, {\n                    configurable: !0,\n                    set: function(item) {\n                        (value = item) && resolve(value);\n                    },\n                    get: function() {\n                        return value;\n                    }\n                });\n            }));\n        }\n        function stringifyError(err, level) {\n            void 0 === level && (level = 1);\n            if (level >= 3) return \"stringifyError stack overflow\";\n            try {\n                if (!err) return \"<unknown error: \" + {}.toString.call(err) + \">\";\n                if (\"string\" == typeof err) return err;\n                if (err instanceof Error) {\n                    var stack = err && err.stack;\n                    var message = err && err.message;\n                    if (stack && message) return -1 !== stack.indexOf(message) ? stack : message + \"\\n\" + stack;\n                    if (stack) return stack;\n                    if (message) return message;\n                }\n                return err && err.toString && \"function\" == typeof err.toString ? err.toString() : {}.toString.call(err);\n            } catch (newErr) {\n                return \"Error while stringifying error: \" + stringifyError(newErr, level + 1);\n            }\n        }\n        function stringifyErrorMessage(err) {\n            var defaultMessage = \"<unknown error: \" + {}.toString.call(err) + \">\";\n            return err ? err instanceof Error ? err.message || defaultMessage : \"string\" == typeof err.message && err.message || defaultMessage : defaultMessage;\n        }\n        function stringify(item) {\n            return \"string\" == typeof item ? item : item && item.toString && \"function\" == typeof item.toString ? item.toString() : {}.toString.call(item);\n        }\n        function domainMatches(hostname, domain) {\n            var index = (hostname = hostname.split(\"://\")[1]).indexOf(domain);\n            return -1 !== index && hostname.slice(index) === domain;\n        }\n        function patchMethod(obj, name, handler) {\n            var original = obj[name];\n            obj[name] = function() {\n                var _arguments2 = arguments, _this2 = this;\n                return handler({\n                    context: this,\n                    args: [].slice.call(arguments),\n                    original: original,\n                    callOriginal: function() {\n                        return original.apply(_this2, _arguments2);\n                    }\n                });\n            };\n        }\n        function extend(obj, source) {\n            if (!source) return obj;\n            if (Object.assign) return Object.assign(obj, source);\n            for (var key in source) source.hasOwnProperty(key) && (obj[key] = source[key]);\n            return obj;\n        }\n        function util_values(obj) {\n            if (Object.values) return Object.values(obj);\n            var result = [];\n            for (var key in obj) obj.hasOwnProperty(key) && result.push(obj[key]);\n            return result;\n        }\n        var memoizedValues = memoize(util_values);\n        function perc(pixels, percentage) {\n            return Math.round(pixels * percentage / 100);\n        }\n        function min() {\n            return Math.min.apply(Math, arguments);\n        }\n        function max() {\n            return Math.max.apply(Math, arguments);\n        }\n        function roundUp(num, nearest) {\n            var remainder = num % nearest;\n            return remainder ? num - remainder + nearest : num;\n        }\n        function regexMap(str, regexp, handler) {\n            var results = [];\n            str.replace(regexp, (function(item) {\n                results.push(handler ? handler.apply(null, arguments) : item);\n            }));\n            return results;\n        }\n        function svgToBase64(svg) {\n            return \"data:image/svg+xml;base64,\" + base64encode(svg);\n        }\n        function objFilter(obj, filter) {\n            void 0 === filter && (filter = Boolean);\n            var result = {};\n            for (var key in obj) obj.hasOwnProperty(key) && filter(obj[key], key) && (result[key] = obj[key]);\n            return result;\n        }\n        function identity(item) {\n            return item;\n        }\n        function regexTokenize(text, regexp) {\n            var result = [];\n            text.replace(regexp, (function(token) {\n                result.push(token);\n                return \"\";\n            }));\n            return result;\n        }\n        function promiseDebounce(method, delay) {\n            void 0 === delay && (delay = 50);\n            var promise;\n            var timeout;\n            return setFunctionName((function() {\n                timeout && clearTimeout(timeout);\n                var localPromise = promise = promise || new promise_ZalgoPromise;\n                timeout = setTimeout((function() {\n                    promise = null;\n                    timeout = null;\n                    promise_ZalgoPromise.try(method).then((function(result) {\n                        localPromise.resolve(result);\n                    }), (function(err) {\n                        localPromise.reject(err);\n                    }));\n                }), delay);\n                return localPromise;\n            }), getFunctionName(method) + \"::promiseDebounced\");\n        }\n        function safeInterval(method, time) {\n            var timeout;\n            !function loop() {\n                timeout = setTimeout((function() {\n                    method();\n                    loop();\n                }), time);\n            }();\n            return {\n                cancel: function() {\n                    clearTimeout(timeout);\n                }\n            };\n        }\n        function isInteger(str) {\n            return Boolean(str.match(/^[0-9]+$/));\n        }\n        function isFloat(str) {\n            return Boolean(str.match(/^[0-9]+\\.[0-9]+$/));\n        }\n        function serializePrimitive(value) {\n            return value.toString();\n        }\n        function deserializePrimitive(value) {\n            return \"true\" === value || \"false\" !== value && (isInteger(value) ? parseInt(value, 10) : isFloat(value) ? parseFloat(value) : value);\n        }\n        function dotify(obj, prefix, newobj) {\n            void 0 === prefix && (prefix = \"\");\n            void 0 === newobj && (newobj = {});\n            prefix = prefix ? prefix + \".\" : prefix;\n            for (var key in obj) obj.hasOwnProperty(key) && null != obj[key] && \"function\" != typeof obj[key] && (obj[key] && Array.isArray(obj[key]) && obj[key].length && obj[key].every((function(val) {\n                return \"object\" != typeof val;\n            })) ? newobj[\"\" + prefix + key + \"[]\"] = obj[key].join(\",\") : obj[key] && \"object\" == typeof obj[key] ? newobj = dotify(obj[key], \"\" + prefix + key, newobj) : newobj[\"\" + prefix + key] = serializePrimitive(obj[key]));\n            return newobj;\n        }\n        function undotify(obj) {\n            var result = {};\n            for (var key in obj) if (obj.hasOwnProperty(key) && \"string\" == typeof obj[key]) {\n                var value = obj[key];\n                if (key.match(/^.+\\[\\]$/)) {\n                    key = key.slice(0, -2);\n                    value = value.split(\",\").map(deserializePrimitive);\n                } else value = deserializePrimitive(value);\n                var keyResult = result;\n                var parts = key.split(\".\");\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    var isLast = i + 1 === parts.length;\n                    var isIndex = !isLast && isInteger(parts[i + 1]);\n                    if (\"constructor\" === part || \"prototype\" === part || \"__proto__\" === part) throw new Error(\"Disallowed key: \" + part);\n                    isLast ? keyResult[part] = value : keyResult = keyResult[part] = keyResult[part] || (isIndex ? [] : {});\n                }\n            }\n            return result;\n        }\n        function eventEmitter() {\n            var triggered = {};\n            var handlers = {};\n            var emitter = {\n                on: function(eventName, handler) {\n                    var handlerList = handlers[eventName] = handlers[eventName] || [];\n                    handlerList.push(handler);\n                    var cancelled = !1;\n                    return {\n                        cancel: function() {\n                            if (!cancelled) {\n                                cancelled = !0;\n                                handlerList.splice(handlerList.indexOf(handler), 1);\n                            }\n                        }\n                    };\n                },\n                once: function(eventName, handler) {\n                    var listener = emitter.on(eventName, (function() {\n                        listener.cancel();\n                        handler();\n                    }));\n                    return listener;\n                },\n                trigger: function(eventName) {\n                    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) args[_key3 - 1] = arguments[_key3];\n                    var handlerList = handlers[eventName];\n                    var promises = [];\n                    if (handlerList) {\n                        var _loop = function(_i2) {\n                            var handler = handlerList[_i2];\n                            promises.push(promise_ZalgoPromise.try((function() {\n                                return handler.apply(void 0, args);\n                            })));\n                        };\n                        for (var _i2 = 0; _i2 < handlerList.length; _i2++) _loop(_i2);\n                    }\n                    return promise_ZalgoPromise.all(promises).then(src_util_noop);\n                },\n                triggerOnce: function(eventName) {\n                    if (triggered[eventName]) return promise_ZalgoPromise.resolve();\n                    triggered[eventName] = !0;\n                    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) args[_key4 - 1] = arguments[_key4];\n                    return emitter.trigger.apply(emitter, [ eventName ].concat(args));\n                },\n                reset: function() {\n                    handlers = {};\n                }\n            };\n            return emitter;\n        }\n        function camelToDasherize(string) {\n            return string.replace(/([A-Z])/g, (function(g) {\n                return \"-\" + g.toLowerCase();\n            }));\n        }\n        function dasherizeToCamel(string) {\n            return string.replace(/-([a-z])/g, (function(g) {\n                return g[1].toUpperCase();\n            }));\n        }\n        function capitalizeFirstLetter(string) {\n            return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n        }\n        function util_get(item, path, def) {\n            if (!path) return def;\n            var pathParts = path.split(\".\");\n            for (var i = 0; i < pathParts.length; i++) {\n                if (\"object\" != typeof item || null === item) return def;\n                item = item[pathParts[i]];\n            }\n            return void 0 === item ? def : item;\n        }\n        function safeTimeout(method, time) {\n            var interval = safeInterval((function() {\n                if ((time -= 100) <= 0) {\n                    interval.cancel();\n                    method();\n                }\n            }), 100);\n        }\n        function defineLazyProp(obj, key, getter) {\n            if (Array.isArray(obj)) {\n                if (\"number\" != typeof key) throw new TypeError(\"Array key must be number\");\n            } else if (\"object\" == typeof obj && null !== obj && \"string\" != typeof key) throw new TypeError(\"Object key must be string\");\n            Object.defineProperty(obj, key, {\n                configurable: !0,\n                enumerable: !0,\n                get: function() {\n                    delete obj[key];\n                    var value = getter();\n                    obj[key] = value;\n                    return value;\n                },\n                set: function(value) {\n                    delete obj[key];\n                    obj[key] = value;\n                }\n            });\n        }\n        function arrayFrom(item) {\n            return [].slice.call(item);\n        }\n        function isObject(item) {\n            return \"object\" == typeof item && null !== item;\n        }\n        function isObjectObject(obj) {\n            return isObject(obj) && \"[object Object]\" === {}.toString.call(obj);\n        }\n        function isPlainObject(obj) {\n            if (!isObjectObject(obj)) return !1;\n            var constructor = obj.constructor;\n            if (\"function\" != typeof constructor) return !1;\n            var prototype = constructor.prototype;\n            return !!isObjectObject(prototype) && !!prototype.hasOwnProperty(\"isPrototypeOf\");\n        }\n        function replaceObject(item, replacer, fullKey) {\n            void 0 === fullKey && (fullKey = \"\");\n            if (Array.isArray(item)) {\n                var length = item.length;\n                var result = [];\n                var _loop2 = function(i) {\n                    defineLazyProp(result, i, (function() {\n                        var itemKey = fullKey ? fullKey + \".\" + i : \"\" + i;\n                        var child = replacer(item[i], i, itemKey);\n                        (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n                        return child;\n                    }));\n                };\n                for (var i = 0; i < length; i++) _loop2(i);\n                return result;\n            }\n            if (isPlainObject(item)) {\n                var _result = {};\n                var _loop3 = function(key) {\n                    if (!item.hasOwnProperty(key)) return \"continue\";\n                    defineLazyProp(_result, key, (function() {\n                        var itemKey = fullKey ? fullKey + \".\" + key : \"\" + key;\n                        var child = replacer(item[key], key, itemKey);\n                        (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n                        return child;\n                    }));\n                };\n                for (var key in item) _loop3(key);\n                return _result;\n            }\n            throw new Error(\"Pass an object or array\");\n        }\n        function copyProp(source, target, name, def) {\n            if (source.hasOwnProperty(name)) {\n                var descriptor = Object.getOwnPropertyDescriptor(source, name);\n                Object.defineProperty(target, name, descriptor);\n            } else target[name] = def;\n        }\n        function regex(pattern, string, start) {\n            void 0 === start && (start = 0);\n            \"string\" == typeof pattern && (pattern = new RegExp(pattern));\n            var result = string.slice(start).match(pattern);\n            if (result) {\n                var index = result.index;\n                var regmatch = result[0];\n                return {\n                    text: regmatch,\n                    groups: result.slice(1),\n                    start: start + index,\n                    end: start + index + regmatch.length,\n                    length: regmatch.length,\n                    replace: function(text) {\n                        return regmatch ? \"\" + regmatch.slice(0, start + index) + text + regmatch.slice(index + regmatch.length) : \"\";\n                    }\n                };\n            }\n        }\n        function regexAll(pattern, string) {\n            var matches = [];\n            var start = 0;\n            for (;;) {\n                var regmatch = regex(pattern, string, start);\n                if (!regmatch) break;\n                matches.push(regmatch);\n                start = match.end;\n            }\n            return matches;\n        }\n        function isDefined(value) {\n            return null != value;\n        }\n        function cycle(method) {\n            return promise_ZalgoPromise.try(method).then((function() {\n                return cycle(method);\n            }));\n        }\n        function debounce(method, time) {\n            void 0 === time && (time = 100);\n            var timeout;\n            return setFunctionName((function() {\n                var _arguments3 = arguments, _this3 = this;\n                clearTimeout(timeout);\n                timeout = setTimeout((function() {\n                    return method.apply(_this3, _arguments3);\n                }), time);\n            }), getFunctionName(method) + \"::debounced\");\n        }\n        function util_isRegex(item) {\n            return \"[object RegExp]\" === {}.toString.call(item);\n        }\n        var util_weakMapMemoize = function(method) {\n            var weakmap = new weakmap_CrossDomainSafeWeakMap;\n            return function(arg) {\n                var _this4 = this;\n                return weakmap.getOrSet(arg, (function() {\n                    return method.call(_this4, arg);\n                }));\n            };\n        };\n        var util_weakMapMemoizePromise = function(method) {\n            var weakmap = new weakmap_CrossDomainSafeWeakMap;\n            return function(arg) {\n                var _this5 = this;\n                return weakmap.getOrSet(arg, (function() {\n                    return method.call(_this5, arg).finally((function() {\n                        weakmap.delete(arg);\n                    }));\n                }));\n            };\n        };\n        function getOrSet(obj, key, getter) {\n            if (obj.hasOwnProperty(key)) return obj[key];\n            var val = getter();\n            obj[key] = val;\n            return val;\n        }\n        function cleanup(obj) {\n            var tasks = [];\n            var cleaned = !1;\n            var cleanErr;\n            var cleaner = {\n                set: function(name, item) {\n                    if (!cleaned) {\n                        obj[name] = item;\n                        cleaner.register((function() {\n                            delete obj[name];\n                        }));\n                    }\n                    return item;\n                },\n                register: function(method) {\n                    var task = once((function() {\n                        return method(cleanErr);\n                    }));\n                    cleaned ? method(cleanErr) : tasks.push(task);\n                    return {\n                        cancel: function() {\n                            var index = tasks.indexOf(task);\n                            -1 !== index && tasks.splice(index, 1);\n                        }\n                    };\n                },\n                all: function(err) {\n                    cleanErr = err;\n                    var results = [];\n                    cleaned = !0;\n                    for (;tasks.length; ) {\n                        var task = tasks.shift();\n                        results.push(task());\n                    }\n                    return promise_ZalgoPromise.all(results).then(src_util_noop);\n                }\n            };\n            return cleaner;\n        }\n        function tryCatch(fn) {\n            var result;\n            var error;\n            try {\n                result = fn();\n            } catch (err) {\n                error = err;\n            }\n            return {\n                result: result,\n                error: error\n            };\n        }\n        function removeFromArray(arr, item) {\n            var index = arr.indexOf(item);\n            -1 !== index && arr.splice(index, 1);\n        }\n        function assertExists(name, thing) {\n            if (null == thing) throw new Error(\"Expected \" + name + \" to be present\");\n            return thing;\n        }\n        function unique(arr) {\n            var result = {};\n            for (var _i4 = 0; _i4 < arr.length; _i4++) result[arr[_i4]] = !0;\n            return Object.keys(result);\n        }\n        var constHas = function(constant, value) {\n            return -1 !== memoizedValues(constant).indexOf(value);\n        };\n        function dedupeErrors(handler) {\n            var seenErrors = [];\n            var seenStringifiedErrors = {};\n            return function(err) {\n                if (-1 === seenErrors.indexOf(err)) {\n                    seenErrors.push(err);\n                    var stringifiedError = stringifyError(err);\n                    if (!seenStringifiedErrors[stringifiedError]) {\n                        seenStringifiedErrors[stringifiedError] = !0;\n                        return handler(err);\n                    }\n                }\n            };\n        }\n        var util_ExtendableError = function(_Error) {\n            _inheritsLoose(ExtendableError, _Error);\n            function ExtendableError(message) {\n                var _this6;\n                (_this6 = _Error.call(this, message) || this).name = _this6.constructor.name;\n                \"function\" == typeof Error.captureStackTrace ? Error.captureStackTrace(function(self) {\n                    if (void 0 === self) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n                    return self;\n                }(_this6), _this6.constructor) : _this6.stack = new Error(message).stack;\n                return _this6;\n            }\n            return ExtendableError;\n        }(wrapNativeSuper_wrapNativeSuper(Error));\n        var KEY_CODES = {\n            ENTER: 13,\n            SPACE: 32\n        };\n        var ATTRIBUTES = {\n            UID: \"data-uid\"\n        };\n        var UID_HASH_LENGTH = 30;\n        function getBody() {\n            var body = document.body;\n            if (!body) throw new Error(\"Body element not found\");\n            return body;\n        }\n        function isDocumentReady() {\n            return Boolean(document.body) && \"complete\" === document.readyState;\n        }\n        function isDocumentInteractive() {\n            return Boolean(document.body) && \"interactive\" === document.readyState;\n        }\n        function urlEncode(str) {\n            return encodeURIComponent(str);\n        }\n        function waitForWindowReady() {\n            return inlineMemoize(waitForWindowReady, (function() {\n                return new promise_ZalgoPromise((function(resolve) {\n                    isDocumentReady() && resolve();\n                    window.addEventListener(\"load\", (function() {\n                        return resolve();\n                    }));\n                }));\n            }));\n        }\n        var waitForDocumentReady = memoize((function() {\n            return new promise_ZalgoPromise((function(resolve) {\n                if (isDocumentReady() || isDocumentInteractive()) return resolve();\n                var interval = setInterval((function() {\n                    if (isDocumentReady() || isDocumentInteractive()) {\n                        clearInterval(interval);\n                        return resolve();\n                    }\n                }), 10);\n            }));\n        }));\n        function waitForDocumentBody() {\n            return promise_ZalgoPromise.try((function() {\n                return document.body ? document.body : waitForDocumentReady().then((function() {\n                    if (document.body) return document.body;\n                    throw new Error(\"Document ready but document.body not present\");\n                }));\n            }));\n        }\n        function parseQuery(queryString) {\n            return inlineMemoize(parseQuery, (function() {\n                var params = {};\n                if (!queryString) return params;\n                if (-1 === queryString.indexOf(\"=\")) return params;\n                for (var _i2 = 0, _queryString$split2 = queryString.split(\"&\"); _i2 < _queryString$split2.length; _i2++) {\n                    var pair = _queryString$split2[_i2];\n                    (pair = pair.split(\"=\"))[0] && pair[1] && (params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]));\n                }\n                return params;\n            }), [ queryString ]);\n        }\n        function getQueryParam(name) {\n            return parseQuery(window.location.search.slice(1))[name];\n        }\n        function urlWillRedirectPage(url) {\n            return -1 === url.indexOf(\"#\") || 0 !== url.indexOf(\"#\") && url.split(\"#\")[0] !== window.location.href.split(\"#\")[0];\n        }\n        function formatQuery(obj) {\n            void 0 === obj && (obj = {});\n            return Object.keys(obj).filter((function(key) {\n                return \"string\" == typeof obj[key] || \"boolean\" == typeof obj[key];\n            })).map((function(key) {\n                var val = obj[key];\n                if (\"string\" != typeof val && \"boolean\" != typeof val) throw new TypeError(\"Invalid type for query\");\n                return urlEncode(key) + \"=\" + urlEncode(val.toString());\n            })).join(\"&\");\n        }\n        function extendQuery(originalQuery, props) {\n            void 0 === props && (props = {});\n            return props && Object.keys(props).length ? formatQuery(_extends({}, parseQuery(originalQuery), props)) : originalQuery;\n        }\n        function extendUrl(url, options) {\n            var query = options.query || {};\n            var hash = options.hash || {};\n            var originalUrl;\n            var originalHash;\n            var _url$split = url.split(\"#\");\n            originalHash = _url$split[1];\n            var _originalUrl$split = (originalUrl = _url$split[0]).split(\"?\");\n            originalUrl = _originalUrl$split[0];\n            var queryString = extendQuery(_originalUrl$split[1], query);\n            var hashString = extendQuery(originalHash, hash);\n            queryString && (originalUrl = originalUrl + \"?\" + queryString);\n            hashString && (originalUrl = originalUrl + \"#\" + hashString);\n            return originalUrl;\n        }\n        function redirect(url, win) {\n            void 0 === win && (win = window);\n            return new promise_ZalgoPromise((function(resolve) {\n                win.location = url;\n                urlWillRedirectPage(url) || resolve();\n            }));\n        }\n        function hasMetaViewPort() {\n            var meta = document.querySelector(\"meta[name=viewport]\");\n            return !(isDevice() && window.screen.width < 660 && !meta);\n        }\n        function isElementVisible(el) {\n            return Boolean(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n        }\n        function getPerformance() {\n            return inlineMemoize(getPerformance, (function() {\n                var performance = window.performance;\n                if (performance && performance.now && performance.timing && performance.timing.connectEnd && performance.timing.navigationStart && Math.abs(performance.now() - Date.now()) > 1e3 && performance.now() - (performance.timing.connectEnd - performance.timing.navigationStart) > 0) return performance;\n            }));\n        }\n        function enablePerformance() {\n            return Boolean(getPerformance());\n        }\n        function getPageRenderTime() {\n            return waitForDocumentReady().then((function() {\n                var performance = getPerformance();\n                if (performance) {\n                    var timing = performance.timing;\n                    return timing.connectEnd && timing.domInteractive ? timing.domInteractive - timing.connectEnd : void 0;\n                }\n            }));\n        }\n        function htmlEncode(html) {\n            void 0 === html && (html = \"\");\n            return html.toString().replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/\\//g, \"&#x2F;\");\n        }\n        function dom_isBrowser() {\n            return \"undefined\" != typeof window && void 0 !== window.location;\n        }\n        function querySelectorAll(selector, doc) {\n            void 0 === doc && (doc = window.document);\n            return [].slice.call(doc.querySelectorAll(selector));\n        }\n        function onClick(element, handler) {\n            element.addEventListener(\"touchstart\", src_util_noop);\n            element.addEventListener(\"click\", handler);\n            element.addEventListener(\"keypress\", (function(event) {\n                if (event.keyCode === KEY_CODES.ENTER || event.keyCode === KEY_CODES.SPACE) return handler(event);\n            }));\n        }\n        function getScript(_ref) {\n            var _ref$host = _ref.host, host = void 0 === _ref$host ? window.location.host : _ref$host, path = _ref.path, _ref$reverse = _ref.reverse, reverse = void 0 !== _ref$reverse && _ref$reverse;\n            return inlineMemoize(getScript, (function() {\n                var url = \"\" + host + path;\n                var scripts = [].slice.call(document.getElementsByTagName(\"script\"));\n                reverse && scripts.reverse();\n                for (var _i4 = 0; _i4 < scripts.length; _i4++) {\n                    var script = scripts[_i4];\n                    if (script.src && script.src.replace(/^https?:\\/\\//, \"\").split(\"?\")[0] === url) return script;\n                }\n            }), [ path ]);\n        }\n        function isLocalStorageEnabled() {\n            return inlineMemoize(isLocalStorageEnabled, (function() {\n                try {\n                    if (\"undefined\" == typeof window) return !1;\n                    if (window.localStorage) {\n                        var value = Math.random().toString();\n                        window.localStorage.setItem(\"__test__localStorage__\", value);\n                        var result = window.localStorage.getItem(\"__test__localStorage__\");\n                        window.localStorage.removeItem(\"__test__localStorage__\");\n                        if (value === result) return !0;\n                    }\n                } catch (err) {}\n                return !1;\n            }));\n        }\n        function getBrowserLocales() {\n            var nav = window.navigator;\n            var locales = nav.languages ? [].concat(nav.languages) : [];\n            nav.language && locales.push(nav.language);\n            nav.userLanguage && locales.push(nav.userLanguage);\n            return locales.map((function(locale) {\n                if (locale && locale.match(/^[a-z]{2}[-_][A-Z]{2}$/)) {\n                    var _locale$split = locale.split(/[-_]/);\n                    return {\n                        country: _locale$split[1],\n                        lang: _locale$split[0]\n                    };\n                }\n                return locale && locale.match(/^[a-z]{2}$/) ? {\n                    lang: locale\n                } : null;\n            })).filter(Boolean);\n        }\n        function appendChild(container, child) {\n            container.appendChild(child);\n        }\n        function getElementSafe(id, doc) {\n            void 0 === doc && (doc = document);\n            return isElement(id) ? id : \"string\" == typeof id ? doc.querySelector(id) : void 0;\n        }\n        function getElement(id, doc) {\n            void 0 === doc && (doc = document);\n            var element = getElementSafe(id, doc);\n            if (element) return element;\n            throw new Error(\"Can not find element: \" + stringify(id));\n        }\n        function elementReady(id) {\n            return new promise_ZalgoPromise((function(resolve, reject) {\n                var name = stringify(id);\n                var el = getElementSafe(id);\n                if (el) return resolve(el);\n                if (isDocumentReady()) return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n                var interval = setInterval((function() {\n                    if (el = getElementSafe(id)) {\n                        resolve(el);\n                        clearInterval(interval);\n                    } else if (isDocumentReady()) {\n                        clearInterval(interval);\n                        return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n                    }\n                }), 10);\n            }));\n        }\n        var dom_PopupOpenError = function(_ExtendableError) {\n            _inheritsLoose(PopupOpenError, _ExtendableError);\n            function PopupOpenError() {\n                return _ExtendableError.apply(this, arguments) || this;\n            }\n            return PopupOpenError;\n        }(util_ExtendableError);\n        function popup(url, options) {\n            var _options$closeOnUnloa = (options = options || {}).closeOnUnload, closeOnUnload = void 0 === _options$closeOnUnloa ? 1 : _options$closeOnUnloa, _options$name = options.name, name = void 0 === _options$name ? \"\" : _options$name, width = options.width, height = options.height;\n            var top = 0;\n            var left = 0;\n            width && (window.outerWidth ? left = Math.round((window.outerWidth - width) / 2) + window.screenX : window.screen.width && (left = Math.round((window.screen.width - width) / 2)));\n            height && (window.outerHeight ? top = Math.round((window.outerHeight - height) / 2) + window.screenY : window.screen.height && (top = Math.round((window.screen.height - height) / 2)));\n            delete options.closeOnUnload;\n            delete options.name;\n            width && height && (options = _extends({\n                top: top,\n                left: left,\n                width: width,\n                height: height,\n                status: 1,\n                toolbar: 0,\n                menubar: 0,\n                resizable: 1,\n                scrollbars: 1\n            }, options));\n            var params = Object.keys(options).map((function(key) {\n                if (null != options[key]) return key + \"=\" + stringify(options[key]);\n            })).filter(Boolean).join(\",\");\n            var win;\n            try {\n                win = window.open(url, name, params);\n            } catch (err) {\n                throw new dom_PopupOpenError(\"Can not open popup window - \" + (err.stack || err.message));\n            }\n            if (isWindowClosed(win)) {\n                var err;\n                throw new dom_PopupOpenError(\"Can not open popup window - blocked\");\n            }\n            closeOnUnload && window.addEventListener(\"unload\", (function() {\n                return win.close();\n            }));\n            return win;\n        }\n        function writeToWindow(win, html) {\n            try {\n                win.document.open();\n                win.document.write(html);\n                win.document.close();\n            } catch (err) {\n                try {\n                    win.location = \"javascript: document.open(); document.write(\" + JSON.stringify(html) + \"); document.close();\";\n                } catch (err2) {}\n            }\n        }\n        function writeElementToWindow(win, el) {\n            var tag = el.tagName.toLowerCase();\n            if (\"html\" !== tag) throw new Error(\"Expected element to be html, got \" + tag);\n            var documentElement = win.document.documentElement;\n            for (var _i6 = 0, _arrayFrom2 = arrayFrom(documentElement.children); _i6 < _arrayFrom2.length; _i6++) documentElement.removeChild(_arrayFrom2[_i6]);\n            for (var _i8 = 0, _arrayFrom4 = arrayFrom(el.children); _i8 < _arrayFrom4.length; _i8++) documentElement.appendChild(_arrayFrom4[_i8]);\n        }\n        function setStyle(el, styleText, doc) {\n            void 0 === doc && (doc = window.document);\n            el.styleSheet ? el.styleSheet.cssText = styleText : el.appendChild(doc.createTextNode(styleText));\n        }\n        var awaitFrameLoadPromises;\n        function awaitFrameLoad(frame) {\n            if ((awaitFrameLoadPromises = awaitFrameLoadPromises || new weakmap_CrossDomainSafeWeakMap).has(frame)) {\n                var _promise = awaitFrameLoadPromises.get(frame);\n                if (_promise) return _promise;\n            }\n            var promise = new promise_ZalgoPromise((function(resolve, reject) {\n                frame.addEventListener(\"load\", (function() {\n                    !function(frame) {\n                        !function() {\n                            for (var i = 0; i < iframeWindows.length; i++) {\n                                var closed = !1;\n                                try {\n                                    closed = iframeWindows[i].closed;\n                                } catch (err) {}\n                                if (closed) {\n                                    iframeFrames.splice(i, 1);\n                                    iframeWindows.splice(i, 1);\n                                }\n                            }\n                        }();\n                        if (frame && frame.contentWindow) try {\n                            iframeWindows.push(frame.contentWindow);\n                            iframeFrames.push(frame);\n                        } catch (err) {}\n                    }(frame);\n                    resolve(frame);\n                }));\n                frame.addEventListener(\"error\", (function(err) {\n                    frame.contentWindow ? resolve(frame) : reject(err);\n                }));\n            }));\n            awaitFrameLoadPromises.set(frame, promise);\n            return promise;\n        }\n        function awaitFrameWindow(frame) {\n            return awaitFrameLoad(frame).then((function(loadedFrame) {\n                if (!loadedFrame.contentWindow) throw new Error(\"Could not find window in iframe\");\n                return loadedFrame.contentWindow;\n            }));\n        }\n        function createElement(tag, options, container) {\n            void 0 === tag && (tag = \"div\");\n            void 0 === options && (options = {});\n            tag = tag.toLowerCase();\n            var element = document.createElement(tag);\n            options.style && extend(element.style, options.style);\n            options.class && (element.className = options.class.join(\" \"));\n            options.id && element.setAttribute(\"id\", options.id);\n            if (options.attributes) for (var _i10 = 0, _Object$keys2 = Object.keys(options.attributes); _i10 < _Object$keys2.length; _i10++) {\n                var key = _Object$keys2[_i10];\n                element.setAttribute(key, options.attributes[key]);\n            }\n            options.styleSheet && setStyle(element, options.styleSheet);\n            container && appendChild(container, element);\n            if (options.html) if (\"iframe\" === tag) {\n                if (!container || !element.contentWindow) throw new Error(\"Iframe html can not be written unless container provided and iframe in DOM\");\n                writeToWindow(element.contentWindow, options.html);\n            } else element.innerHTML = options.html;\n            return element;\n        }\n        function iframe(options, container) {\n            void 0 === options && (options = {});\n            var style = options.style || {};\n            var frame = createElement(\"iframe\", {\n                attributes: _extends({\n                    allowTransparency: \"true\"\n                }, options.attributes || {}),\n                style: _extends({\n                    backgroundColor: \"transparent\",\n                    border: \"none\"\n                }, style),\n                html: options.html,\n                class: options.class\n            });\n            var isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n            frame.hasAttribute(\"id\") || frame.setAttribute(\"id\", uniqueID());\n            awaitFrameLoad(frame);\n            container && getElement(container).appendChild(frame);\n            (options.url || isIE) && frame.setAttribute(\"src\", options.url || \"about:blank\");\n            return frame;\n        }\n        function addEventListener(obj, event, handler) {\n            obj.addEventListener(event, handler);\n            return {\n                cancel: function() {\n                    obj.removeEventListener(event, handler);\n                }\n            };\n        }\n        function bindEvents(element, eventNames, handler) {\n            handler = once(handler);\n            for (var _i12 = 0; _i12 < eventNames.length; _i12++) element.addEventListener(eventNames[_i12], handler);\n            return {\n                cancel: once((function() {\n                    for (var _i14 = 0; _i14 < eventNames.length; _i14++) element.removeEventListener(eventNames[_i14], handler);\n                }))\n            };\n        }\n        var VENDOR_PREFIXES = [ \"webkit\", \"moz\", \"ms\", \"o\" ];\n        function setVendorCSS(element, name, value) {\n            element.style[name] = value;\n            var capitalizedName = capitalizeFirstLetter(name);\n            for (var _i16 = 0; _i16 < VENDOR_PREFIXES.length; _i16++) element.style[\"\" + VENDOR_PREFIXES[_i16] + capitalizedName] = value;\n        }\n        var ANIMATION_START_EVENTS = [ \"animationstart\", \"webkitAnimationStart\", \"oAnimationStart\", \"MSAnimationStart\" ];\n        var ANIMATION_END_EVENTS = [ \"animationend\", \"webkitAnimationEnd\", \"oAnimationEnd\", \"MSAnimationEnd\" ];\n        function animate(element, name, clean, timeout) {\n            void 0 === timeout && (timeout = 1e3);\n            return new promise_ZalgoPromise((function(resolve, reject) {\n                var el = getElement(element);\n                if (!el) return resolve();\n                var hasStarted = !1;\n                var startTimeout;\n                var endTimeout;\n                var startEvent;\n                var endEvent;\n                function cleanUp() {\n                    clearTimeout(startTimeout);\n                    clearTimeout(endTimeout);\n                    startEvent.cancel();\n                    endEvent.cancel();\n                }\n                startEvent = bindEvents(el, ANIMATION_START_EVENTS, (function(event) {\n                    if (event.target === el && event.animationName === name) {\n                        clearTimeout(startTimeout);\n                        event.stopPropagation();\n                        startEvent.cancel();\n                        hasStarted = !0;\n                        endTimeout = setTimeout((function() {\n                            cleanUp();\n                            resolve();\n                        }), timeout);\n                    }\n                }));\n                endEvent = bindEvents(el, ANIMATION_END_EVENTS, (function(event) {\n                    if (event.target === el && event.animationName === name) {\n                        cleanUp();\n                        return \"string\" == typeof event.animationName && event.animationName !== name ? reject(\"Expected animation name to be \" + name + \", found \" + event.animationName) : resolve();\n                    }\n                }));\n                setVendorCSS(el, \"animationName\", name);\n                startTimeout = setTimeout((function() {\n                    if (!hasStarted) {\n                        cleanUp();\n                        return resolve();\n                    }\n                }), 200);\n                clean && clean(cleanUp);\n            }));\n        }\n        function makeElementVisible(element) {\n            element.style.setProperty(\"visibility\", \"\");\n        }\n        function makeElementInvisible(element) {\n            element.style.setProperty(\"visibility\", \"hidden\", \"important\");\n        }\n        function showElement(element) {\n            element.style.setProperty(\"display\", \"\");\n        }\n        function hideElement(element) {\n            element.style.setProperty(\"display\", \"none\", \"important\");\n        }\n        function destroyElement(element) {\n            element && element.parentNode && element.parentNode.removeChild(element);\n        }\n        function showAndAnimate(element, name, clean) {\n            var animation = animate(element, name, clean);\n            showElement(element);\n            return animation;\n        }\n        function animateAndHide(element, name, clean) {\n            return animate(element, name, clean).then((function() {\n                hideElement(element);\n            }));\n        }\n        function addClass(element, name) {\n            element.classList.add(name);\n        }\n        function removeClass(element, name) {\n            element.classList.remove(name);\n        }\n        function isElementClosed(el) {\n            return !(el && el.parentNode && el.ownerDocument && el.ownerDocument.documentElement && el.ownerDocument.documentElement.contains(el));\n        }\n        function watchElementForClose(element, handler) {\n            handler = once(handler);\n            var cancelled = !1;\n            var mutationObservers = [];\n            var interval;\n            var sacrificialFrame;\n            var sacrificialFrameWin;\n            var cancel = function() {\n                cancelled = !0;\n                for (var _i18 = 0; _i18 < mutationObservers.length; _i18++) mutationObservers[_i18].disconnect();\n                interval && interval.cancel();\n                sacrificialFrameWin && sacrificialFrameWin.removeEventListener(\"unload\", elementClosed);\n                sacrificialFrame && destroyElement(sacrificialFrame);\n            };\n            var elementClosed = function() {\n                if (!cancelled) {\n                    handler();\n                    cancel();\n                }\n            };\n            if (isElementClosed(element)) {\n                elementClosed();\n                return {\n                    cancel: cancel\n                };\n            }\n            if (window.MutationObserver) {\n                var mutationElement = element.parentElement;\n                for (;mutationElement; ) {\n                    var mutationObserver = new window.MutationObserver((function() {\n                        isElementClosed(element) && elementClosed();\n                    }));\n                    mutationObserver.observe(mutationElement, {\n                        childList: !0\n                    });\n                    mutationObservers.push(mutationObserver);\n                    mutationElement = mutationElement.parentElement;\n                }\n            }\n            (sacrificialFrame = document.createElement(\"iframe\")).setAttribute(\"name\", \"__detect_close_\" + uniqueID() + \"__\");\n            sacrificialFrame.style.display = \"none\";\n            awaitFrameWindow(sacrificialFrame).then((function(frameWin) {\n                (sacrificialFrameWin = function(win) {\n                    if (!isSameDomain(win)) throw new Error(\"Expected window to be same domain\");\n                    return win;\n                }(frameWin)).addEventListener(\"unload\", elementClosed);\n            }));\n            element.appendChild(sacrificialFrame);\n            interval = safeInterval((function() {\n                isElementClosed(element) && elementClosed();\n            }), 1e3);\n            return {\n                cancel: cancel\n            };\n        }\n        function fixScripts(el, doc) {\n            void 0 === doc && (doc = window.document);\n            for (var _i20 = 0, _querySelectorAll2 = querySelectorAll(\"script\", el); _i20 < _querySelectorAll2.length; _i20++) {\n                var script = _querySelectorAll2[_i20];\n                var parentNode = script.parentNode;\n                if (parentNode) {\n                    var newScript = doc.createElement(\"script\");\n                    newScript.text = script.textContent;\n                    parentNode.replaceChild(newScript, script);\n                }\n            }\n        }\n        function onResize(el, handler, _temp) {\n            var _ref2 = void 0 === _temp ? {} : _temp, _ref2$width = _ref2.width, width = void 0 === _ref2$width || _ref2$width, _ref2$height = _ref2.height, height = void 0 === _ref2$height || _ref2$height, _ref2$interval = _ref2.interval, interval = void 0 === _ref2$interval ? 100 : _ref2$interval, _ref2$win = _ref2.win, win = void 0 === _ref2$win ? window : _ref2$win;\n            var currentWidth = el.offsetWidth;\n            var currentHeight = el.offsetHeight;\n            var canceled = !1;\n            handler({\n                width: currentWidth,\n                height: currentHeight\n            });\n            var check = function() {\n                if (!canceled && isElementVisible(el)) {\n                    var newWidth = el.offsetWidth;\n                    var newHeight = el.offsetHeight;\n                    (width && newWidth !== currentWidth || height && newHeight !== currentHeight) && handler({\n                        width: newWidth,\n                        height: newHeight\n                    });\n                    currentWidth = newWidth;\n                    currentHeight = newHeight;\n                }\n            };\n            var observer;\n            var timeout;\n            win.addEventListener(\"resize\", check);\n            if (void 0 !== win.ResizeObserver) {\n                (observer = new win.ResizeObserver(check)).observe(el);\n                timeout = safeInterval(check, 10 * interval);\n            } else if (void 0 !== win.MutationObserver) {\n                (observer = new win.MutationObserver(check)).observe(el, {\n                    attributes: !0,\n                    childList: !0,\n                    subtree: !0,\n                    characterData: !1\n                });\n                timeout = safeInterval(check, 10 * interval);\n            } else timeout = safeInterval(check, interval);\n            return {\n                cancel: function() {\n                    canceled = !0;\n                    observer.disconnect();\n                    window.removeEventListener(\"resize\", check);\n                    timeout.cancel();\n                }\n            };\n        }\n        function getResourceLoadTime(url) {\n            var performance = getPerformance();\n            if (performance && \"function\" == typeof performance.getEntries) {\n                var entries = performance.getEntries();\n                for (var i = 0; i < entries.length; i++) {\n                    var entry = entries[i];\n                    if (entry && entry.name && 0 === entry.name.indexOf(url) && \"number\" == typeof entry.duration) return Math.floor(entry.duration);\n                }\n            }\n        }\n        function isShadowElement(element) {\n            for (;element.parentNode; ) element = element.parentNode;\n            return \"[object ShadowRoot]\" === element.toString();\n        }\n        function getShadowRoot(element) {\n            for (;element.parentNode; ) element = element.parentNode;\n            if (isShadowElement(element)) return element;\n        }\n        function getShadowHost(element) {\n            var shadowRoot = getShadowRoot(element);\n            if (shadowRoot && shadowRoot.host) return shadowRoot.host;\n        }\n        function insertShadowSlot(element) {\n            var shadowHost = getShadowHost(element);\n            if (!shadowHost) throw new Error(\"Element is not in shadow dom\");\n            var slotName = \"shadow-slot-\" + uniqueID();\n            var slot = document.createElement(\"slot\");\n            slot.setAttribute(\"name\", slotName);\n            element.appendChild(slot);\n            var slotProvider = document.createElement(\"div\");\n            slotProvider.setAttribute(\"slot\", slotName);\n            shadowHost.appendChild(slotProvider);\n            return isShadowElement(shadowHost) ? insertShadowSlot(slotProvider) : slotProvider;\n        }\n        function preventClickFocus(el) {\n            var onFocus = function onFocus(event) {\n                el.removeEventListener(\"focus\", onFocus);\n                event.preventDefault();\n                el.blur();\n                return !1;\n            };\n            el.addEventListener(\"mousedown\", (function() {\n                el.addEventListener(\"focus\", onFocus);\n                setTimeout((function() {\n                    el.removeEventListener(\"focus\", onFocus);\n                }), 1);\n            }));\n        }\n        function getStackTrace() {\n            try {\n                throw new Error(\"_\");\n            } catch (err) {\n                return err.stack || \"\";\n            }\n        }\n        var currentScript = \"undefined\" != typeof document ? document.currentScript : null;\n        var getCurrentScript = memoize((function() {\n            if (currentScript) return currentScript;\n            if (currentScript = function() {\n                try {\n                    var stack = getStackTrace();\n                    var stackDetails = /.*at [^(]*\\((.*):(.+):(.+)\\)$/gi.exec(stack);\n                    var scriptLocation = stackDetails && stackDetails[1];\n                    if (!scriptLocation) return;\n                    for (var _i22 = 0, _Array$prototype$slic2 = [].slice.call(document.getElementsByTagName(\"script\")).reverse(); _i22 < _Array$prototype$slic2.length; _i22++) {\n                        var script = _Array$prototype$slic2[_i22];\n                        if (script.src && script.src === scriptLocation) return script;\n                    }\n                } catch (err) {}\n            }()) return currentScript;\n            throw new Error(\"Can not determine current script\");\n        }));\n        var currentUID = uniqueID();\n        var getCurrentScriptUID = memoize((function() {\n            var script;\n            try {\n                script = getCurrentScript();\n            } catch (err) {\n                return currentUID;\n            }\n            var uid = script.getAttribute(ATTRIBUTES.UID);\n            if (uid && \"string\" == typeof uid) return uid;\n            if ((uid = script.getAttribute(ATTRIBUTES.UID + \"-auto\")) && \"string\" == typeof uid) return uid;\n            if (script.src) {\n                var hashedString = strHashStr(JSON.stringify({\n                    src: script.src,\n                    dataset: script.dataset\n                }));\n                uid = \"uid_\" + hashedString.slice(hashedString.length - UID_HASH_LENGTH);\n            } else uid = uniqueID();\n            script.setAttribute(ATTRIBUTES.UID + \"-auto\", uid);\n            return uid;\n        }));\n        function submitForm(_ref3) {\n            var url = _ref3.url, target = _ref3.target, body = _ref3.body, _ref3$method = _ref3.method, method = void 0 === _ref3$method ? \"post\" : _ref3$method;\n            var form = document.createElement(\"form\");\n            form.setAttribute(\"target\", target);\n            form.setAttribute(\"method\", method);\n            form.setAttribute(\"action\", url);\n            form.style.display = \"none\";\n            if (body) for (var _i24 = 0, _Object$keys4 = Object.keys(body); _i24 < _Object$keys4.length; _i24++) {\n                var _body$key;\n                var key = _Object$keys4[_i24];\n                var input = document.createElement(\"input\");\n                input.setAttribute(\"name\", key);\n                input.setAttribute(\"value\", null == (_body$key = body[key]) ? void 0 : _body$key.toString());\n                form.appendChild(input);\n            }\n            getBody().appendChild(form);\n            form.submit();\n            getBody().removeChild(form);\n        }\n        function getStorage(_ref) {\n            var name = _ref.name, _ref$lifetime = _ref.lifetime, lifetime = void 0 === _ref$lifetime ? 12e5 : _ref$lifetime;\n            return inlineMemoize(getStorage, (function() {\n                var STORAGE_KEY = \"__\" + name + \"_storage__\";\n                var newStateID = uniqueID();\n                var accessedStorage;\n                function getState(handler) {\n                    var localStorageEnabled = isLocalStorageEnabled();\n                    var storage;\n                    accessedStorage && (storage = accessedStorage);\n                    if (!storage && localStorageEnabled) {\n                        var rawStorage = window.localStorage.getItem(STORAGE_KEY);\n                        rawStorage && (storage = JSON.parse(rawStorage));\n                    }\n                    storage || (storage = getGlobal()[STORAGE_KEY]);\n                    storage || (storage = {\n                        id: newStateID\n                    });\n                    storage.id || (storage.id = newStateID);\n                    accessedStorage = storage;\n                    var result = handler(storage);\n                    localStorageEnabled ? window.localStorage.setItem(STORAGE_KEY, JSON.stringify(storage)) : getGlobal()[STORAGE_KEY] = storage;\n                    accessedStorage = null;\n                    return result;\n                }\n                function getID() {\n                    return getState((function(storage) {\n                        return storage.id;\n                    }));\n                }\n                function getSession(handler) {\n                    return getState((function(storage) {\n                        var session = storage.__session__;\n                        var now = Date.now();\n                        session && now - session.created > lifetime && (session = null);\n                        session || (session = {\n                            guid: uniqueID(),\n                            created: now\n                        });\n                        storage.__session__ = session;\n                        return handler(session);\n                    }));\n                }\n                return {\n                    getState: getState,\n                    getID: getID,\n                    isStateFresh: function() {\n                        return getID() === newStateID;\n                    },\n                    getSessionState: function(handler) {\n                        return getSession((function(session) {\n                            session.state = session.state || {};\n                            return handler(session.state);\n                        }));\n                    },\n                    getSessionID: function() {\n                        return getSession((function(session) {\n                            return session.guid;\n                        }));\n                    }\n                };\n            }), [ {\n                name: name,\n                lifetime: lifetime\n            } ]);\n        }\n        function getBelterExperimentStorage() {\n            return getStorage({\n                name: \"belter_experiment\"\n            });\n        }\n        function isEventUnique(name) {\n            return getBelterExperimentStorage().getSessionState((function(state) {\n                state.loggedBeacons = state.loggedBeacons || [];\n                if (-1 === state.loggedBeacons.indexOf(name)) {\n                    state.loggedBeacons.push(name);\n                    return !0;\n                }\n                return !1;\n            }));\n        }\n        function getRandomInteger(range) {\n            return Math.floor(Math.random() * range);\n        }\n        function experiment(_ref) {\n            var name = _ref.name, _ref$sample = _ref.sample, sample = void 0 === _ref$sample ? 50 : _ref$sample, _ref$logTreatment = _ref.logTreatment, logTreatment = void 0 === _ref$logTreatment ? src_util_noop : _ref$logTreatment, _ref$logCheckpoint = _ref.logCheckpoint, logCheckpoint = void 0 === _ref$logCheckpoint ? src_util_noop : _ref$logCheckpoint, _ref$sticky = _ref.sticky;\n            var throttle = void 0 === _ref$sticky || _ref$sticky ? function(name) {\n                return getBelterExperimentStorage().getState((function(state) {\n                    state.throttlePercentiles = state.throttlePercentiles || {};\n                    state.throttlePercentiles[name] = state.throttlePercentiles[name] || getRandomInteger(100);\n                    return state.throttlePercentiles[name];\n                }));\n            }(name) : getRandomInteger(100);\n            var group;\n            var treatment = name + \"_\" + (group = throttle < sample ? \"test\" : sample >= 50 || sample <= throttle && throttle < 2 * sample ? \"control\" : \"throttle\");\n            var started = !1;\n            var forced = !1;\n            try {\n                window.localStorage && window.localStorage.getItem(name) && (forced = !0);\n            } catch (err) {}\n            var exp = {\n                isEnabled: function() {\n                    return \"test\" === group || forced;\n                },\n                isDisabled: function() {\n                    return \"test\" !== group && !forced;\n                },\n                getTreatment: function() {\n                    return treatment;\n                },\n                log: function(checkpoint, payload) {\n                    void 0 === payload && (payload = {});\n                    if (!started) return exp;\n                    isEventUnique(treatment + \"_\" + JSON.stringify(payload)) && logTreatment({\n                        name: name,\n                        treatment: treatment,\n                        payload: payload,\n                        throttle: throttle\n                    });\n                    isEventUnique(treatment + \"_\" + checkpoint + \"_\" + JSON.stringify(payload)) && logCheckpoint({\n                        name: name,\n                        treatment: treatment,\n                        checkpoint: checkpoint,\n                        payload: payload,\n                        throttle: throttle\n                    });\n                    return exp;\n                },\n                logStart: function(payload) {\n                    void 0 === payload && (payload = {});\n                    started = !0;\n                    return exp.log(\"start\", payload);\n                },\n                logComplete: function(payload) {\n                    void 0 === payload && (payload = {});\n                    return exp.log(\"complete\", payload);\n                }\n            };\n            return exp;\n        }\n        function getGlobalNameSpace(_ref) {\n            var name = _ref.name, _ref$version = _ref.version, version = void 0 === _ref$version ? \"latest\" : _ref$version;\n            var global = getGlobal();\n            var globalKey = \"__\" + name + \"__\" + version + \"_global__\";\n            var namespace = global[globalKey] = global[globalKey] || {};\n            return {\n                get: function(key, defValue) {\n                    defValue = defValue || {};\n                    return namespace[key] = namespace[key] || defValue;\n                }\n            };\n        }\n        var headerBuilders = [];\n        function request(_ref) {\n            var url = _ref.url, _ref$method = _ref.method, method = void 0 === _ref$method ? \"get\" : _ref$method, _ref$headers = _ref.headers, headers = void 0 === _ref$headers ? {} : _ref$headers, json = _ref.json, data = _ref.data, body = _ref.body, _ref$win = _ref.win, win = void 0 === _ref$win ? window : _ref$win, _ref$timeout = _ref.timeout, timeout = void 0 === _ref$timeout ? 0 : _ref$timeout;\n            return new promise_ZalgoPromise((function(resolve, reject) {\n                if (json && data || json && body || data && json) throw new Error(\"Only options.json or options.data or options.body should be passed\");\n                var normalizedHeaders = {};\n                for (var _i4 = 0, _Object$keys2 = Object.keys(headers); _i4 < _Object$keys2.length; _i4++) {\n                    var _key2 = _Object$keys2[_i4];\n                    normalizedHeaders[_key2.toLowerCase()] = headers[_key2];\n                }\n                json ? normalizedHeaders[\"content-type\"] = normalizedHeaders[\"content-type\"] || \"application/json\" : (data || body) && (normalizedHeaders[\"content-type\"] = normalizedHeaders[\"content-type\"] || \"application/x-www-form-urlencoded; charset=utf-8\");\n                normalizedHeaders.accept = normalizedHeaders.accept || \"application/json\";\n                for (var _i6 = 0; _i6 < headerBuilders.length; _i6++) {\n                    var builtHeaders = (0, headerBuilders[_i6])();\n                    for (var _i8 = 0, _Object$keys4 = Object.keys(builtHeaders); _i8 < _Object$keys4.length; _i8++) {\n                        var _key3 = _Object$keys4[_i8];\n                        normalizedHeaders[_key3.toLowerCase()] = builtHeaders[_key3];\n                    }\n                }\n                var xhr = new win.XMLHttpRequest;\n                xhr.addEventListener(\"load\", (function() {\n                    var responseHeaders = function(rawHeaders) {\n                        void 0 === rawHeaders && (rawHeaders = \"\");\n                        var result = {};\n                        for (var _i2 = 0, _rawHeaders$trim$spli2 = rawHeaders.trim().split(\"\\n\"); _i2 < _rawHeaders$trim$spli2.length; _i2++) {\n                            var _line$split = _rawHeaders$trim$spli2[_i2].split(\":\"), _key = _line$split[0], values = _line$split.slice(1);\n                            result[_key.toLowerCase()] = values.join(\":\").trim();\n                        }\n                        return result;\n                    }(this.getAllResponseHeaders());\n                    if (!this.status) return reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" failed: no response status code.\"));\n                    var contentType = responseHeaders[\"content-type\"];\n                    var isJSON = contentType && (0 === contentType.indexOf(\"application/json\") || 0 === contentType.indexOf(\"text/json\"));\n                    var responseBody = this.responseText;\n                    try {\n                        responseBody = JSON.parse(responseBody);\n                    } catch (err) {\n                        if (isJSON) return reject(new Error(\"Invalid json: \" + this.responseText + \".\"));\n                    }\n                    return resolve({\n                        status: this.status,\n                        headers: responseHeaders,\n                        body: responseBody\n                    });\n                }), !1);\n                xhr.addEventListener(\"error\", (function(evt) {\n                    reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" failed: \" + evt.toString() + \".\"));\n                }), !1);\n                xhr.open(method, url, !0);\n                for (var _key4 in normalizedHeaders) normalizedHeaders.hasOwnProperty(_key4) && xhr.setRequestHeader(_key4, normalizedHeaders[_key4]);\n                json ? body = JSON.stringify(json) : data && (body = Object.keys(data).map((function(key) {\n                    return encodeURIComponent(key) + \"=\" + (data ? encodeURIComponent(data[key]) : \"\");\n                })).join(\"&\"));\n                xhr.timeout = timeout;\n                xhr.ontimeout = function() {\n                    reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" has timed out\"));\n                };\n                xhr.send(body);\n            }));\n        }\n        function addHeaderBuilder(method) {\n            headerBuilders.push(method);\n        }\n        var types_TYPES = !0;\n        function memoized(target, name, descriptor) {\n            descriptor.value = memoize(descriptor.value, {\n                name: name,\n                thisNamespace: !0\n            });\n        }\n        function decorators_promise(target, name, descriptor) {\n            descriptor.value = promisify(descriptor.value, {\n                name: name\n            });\n        }\n        function isPerc(str) {\n            return \"string\" == typeof str && /^[0-9]+%$/.test(str);\n        }\n        function isPx(str) {\n            return \"string\" == typeof str && /^[0-9]+px$/.test(str);\n        }\n        function toNum(val) {\n            if (\"number\" == typeof val) return val;\n            var match = val.match(/^([0-9]+)(px|%)$/);\n            if (!match) throw new Error(\"Could not match css value from \" + val);\n            return parseInt(match[1], 10);\n        }\n        function toPx(val) {\n            return toNum(val) + \"px\";\n        }\n        function toCSS(val) {\n            return \"number\" == typeof val ? toPx(val) : isPerc(val) ? val : toPx(val);\n        }\n        function percOf(num, perc) {\n            return parseInt(num * toNum(perc) / 100, 10);\n        }\n        function normalizeDimension(dim, max) {\n            if (\"number\" == typeof dim) return dim;\n            if (isPerc(dim)) return percOf(max, dim);\n            if (isPx(dim)) return toNum(dim);\n            throw new Error(\"Can not normalize dimension: \" + dim);\n        }\n        function wrapPromise(method, _temp) {\n            var _ref$timeout = (void 0 === _temp ? {} : _temp).timeout, timeout = void 0 === _ref$timeout ? 5e3 : _ref$timeout;\n            var expected = [];\n            var promises = [];\n            return new promise_ZalgoPromise((function(resolve, reject) {\n                var timer = setTimeout((function() {\n                    expected.length && reject(new Error(\"Expected \" + expected[0].name + \" to be called in \" + timeout + \"ms\"));\n                    promises.length && reject(new Error(\"Expected \" + promises[0].name + \" promise to complete in \" + timeout + \"ms\"));\n                }), timeout);\n                var expect = function(name, handler) {\n                    void 0 === handler && (handler = src_util_noop);\n                    var exp = {\n                        name: name,\n                        handler: handler\n                    };\n                    expected.push(exp);\n                    return function() {\n                        var _this = this;\n                        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n                        removeFromArray(expected, exp);\n                        var _tryCatch = tryCatch((function() {\n                            var _handler;\n                            return (_handler = handler).call.apply(_handler, [ _this ].concat(args));\n                        })), result = _tryCatch.result, error = _tryCatch.error;\n                        if (error) {\n                            promises.push({\n                                name: name,\n                                promise: promise_ZalgoPromise.asyncReject(error)\n                            });\n                            throw error;\n                        }\n                        promises.push({\n                            name: name,\n                            promise: promise_ZalgoPromise.resolve(result)\n                        });\n                        return result;\n                    };\n                };\n                var avoid = function(name, fn) {\n                    void 0 === fn && (fn = src_util_noop);\n                    return function() {\n                        var _fn;\n                        promises.push({\n                            name: name,\n                            promise: promise_ZalgoPromise.asyncReject(new Error(\"Expected \" + name + \" to not be called\"))\n                        });\n                        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n                        return (_fn = fn).call.apply(_fn, [ this ].concat(args));\n                    };\n                };\n                var expectError = function(name, handler) {\n                    void 0 === handler && (handler = src_util_noop);\n                    var exp = {\n                        name: name,\n                        handler: handler\n                    };\n                    expected.push(exp);\n                    return function() {\n                        var _this2 = this;\n                        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];\n                        removeFromArray(expected, exp);\n                        var _tryCatch2 = tryCatch((function() {\n                            var _handler2;\n                            return (_handler2 = handler).call.apply(_handler2, [ _this2 ].concat(args));\n                        })), result = _tryCatch2.result, error = _tryCatch2.error;\n                        if (error) throw error;\n                        promises.push({\n                            name: name,\n                            promise: promise_ZalgoPromise.resolve(result).then((function() {\n                                throw new Error(\"Expected \" + name + \" to throw an error\");\n                            }), src_util_noop)\n                        });\n                        return result;\n                    };\n                };\n                promises.push({\n                    name: \"wrapPromise handler\",\n                    promise: promise_ZalgoPromise.try((function() {\n                        return method({\n                            expect: expect,\n                            avoid: avoid,\n                            expectError: expectError,\n                            error: avoid,\n                            wait: function() {\n                                return promise_ZalgoPromise.resolve();\n                            }\n                        });\n                    }))\n                });\n                (function wait() {\n                    return promise_ZalgoPromise.try((function() {\n                        if (promises.length) {\n                            var prom = promises[0];\n                            return prom.promise.finally((function() {\n                                removeFromArray(promises, prom);\n                            })).then(wait);\n                        }\n                    })).then((function() {\n                        if (expected.length) return promise_ZalgoPromise.delay(10).then(wait);\n                    }));\n                })().finally((function() {\n                    clearTimeout(timer);\n                })).then(resolve, reject);\n            }));\n        }\n    } ]);\n}));","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export const LOG_LEVEL = {\n  DEBUG: \"debug\" as const,\n  INFO: \"info\" as const,\n  WARN: \"warn\" as const,\n  ERROR: \"error\" as const,\n};\n\nexport const PROTOCOL = {\n  FILE: \"file:\",\n};\n","import { LOG_LEVEL } from \"./constants\";\n\nexport const AUTO_FLUSH_LEVEL = [LOG_LEVEL.WARN, LOG_LEVEL.ERROR];\nexport const LOG_LEVEL_PRIORITY = [\n  LOG_LEVEL.ERROR,\n  LOG_LEVEL.WARN,\n  LOG_LEVEL.INFO,\n  LOG_LEVEL.DEBUG,\n];\nexport const FLUSH_INTERVAL = 60 * 1000;\n// eslint-disable-next-line no-constant-condition\nexport const DEFAULT_LOG_LEVEL = \"__DEBUG__\" ? LOG_LEVEL.DEBUG : LOG_LEVEL.WARN;\nexport const AMPLITUDE_URL = \"https://api2.amplitude.com/2/httpapi\";\n","// @ts-ignore\nimport type { SameDomainWindowType } from \"@krakenjs/cross-domain-utils\";\n\nimport { AMPLITUDE_URL } from \"./config\";\nimport type { Payload } from \"./types\";\n\ntype CanUseBeaconOptions = {\n  headers: Record<string, unknown>;\n  enableSendBeacon: boolean;\n};\n\nconst canUseSendBeacon = ({\n  headers,\n  enableSendBeacon,\n}: CanUseBeaconOptions): boolean => {\n  const hasHeaders = headers && Object.keys(headers).length;\n\n  if (\n    window &&\n    // @ts-ignore\n    window.navigator.sendBeacon &&\n    !hasHeaders &&\n    enableSendBeacon &&\n    window.Blob\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nconst isAmplitude = (url: string): boolean => {\n  if (url === AMPLITUDE_URL) {\n    return true;\n  }\n\n  return false;\n};\n\ntype SendBeaconOptions = {\n  win: SameDomainWindowType;\n  url: string;\n  data: JSON;\n  useBlob: boolean;\n};\n\nconst sendBeacon = ({\n  win = window,\n  url,\n  data,\n  useBlob = true,\n}: SendBeaconOptions): boolean => {\n  try {\n    const json = JSON.stringify(data);\n\n    if (!win.navigator.sendBeacon) {\n      throw new Error(`No sendBeacon available`);\n    }\n\n    if (useBlob) {\n      const blob = new Blob([json], {\n        type: \"application/json\",\n      });\n      return win.navigator.sendBeacon(url, blob);\n    }\n\n    return win.navigator.sendBeacon(url, json);\n  } catch (e) {\n    return false;\n  }\n};\n\nconst extendIfDefined = (target: Payload, source: Payload): void => {\n  for (const key in source) {\n    if (source.hasOwnProperty(key)) {\n      // @ts-ignore\n      target[key] = source[key];\n    }\n  }\n};\n\nexport { canUseSendBeacon, extendIfDefined, isAmplitude, sendBeacon };\n","/* @flow */\n\nexport function isPromise(item : mixed) : boolean {\n    try {\n        if (!item) {\n            return false;\n        }\n\n        if (typeof Promise !== 'undefined' && item instanceof Promise) {\n            return true;\n        }\n\n        if (typeof window !== 'undefined' && typeof window.Window === 'function' && item instanceof window.Window) {\n            return false;\n        }\n\n        if (typeof window !== 'undefined' && typeof window.constructor === 'function' && item instanceof window.constructor) {\n            return false;\n        }\n\n        const toString = ({}).toString;\n\n        if (toString) {\n            const name = toString.call(item);\n\n            if (name === '[object Window]' || name === '[object global]' || name === '[object DOMWindow]') {\n                return false;\n            }\n        }\n\n        if (typeof item.then === 'function') {\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n\n    return false;\n}\n","/* @flow */\n\nimport type { ZalgoPromise } from './promise';\n\nconst dispatchedErrors = [];\nconst possiblyUnhandledPromiseHandlers : Array<(mixed, promise? : ZalgoPromise<mixed>) => void> = [];\n\nexport function dispatchPossiblyUnhandledError<T>(err : mixed, promise : ZalgoPromise<T>) {\n\n    if (dispatchedErrors.indexOf(err) !== -1) {\n        return;\n    }\n\n    dispatchedErrors.push(err);\n\n    setTimeout(() => {\n        if (__DEBUG__) {\n            // $FlowFixMe\n            throw new Error(`${ err.stack || err.toString() }\\n\\nFrom promise:\\n\\n${ promise.stack }`);\n        }\n\n        throw err;\n    }, 1);\n\n    for (let j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n        // $FlowFixMe\n        possiblyUnhandledPromiseHandlers[j](err, promise);\n    }\n}\n\nexport function onPossiblyUnhandledException(handler : (mixed, promise? : ZalgoPromise<mixed>) => void) : {| cancel : () => void |} {\n    possiblyUnhandledPromiseHandlers.push(handler);\n\n    return {\n        cancel() {\n            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n        }\n    };\n}\n","/* @flow */\n\nimport type { ZalgoPromise } from './promise';\n\nlet activeCount = 0;\nlet flushPromise;\n\nfunction flushActive() {\n    if (!activeCount && flushPromise) {\n        const promise = flushPromise;\n        flushPromise = null;\n        promise.resolve();\n    }\n}\n\nexport function startActive() {\n    activeCount += 1;\n}\n\nexport function endActive() {\n    activeCount -= 1;\n    flushActive();\n}\n\nexport function awaitActive(Zalgo : Class<ZalgoPromise<*>>) : ZalgoPromise<void> { // eslint-disable-line no-undef\n    const promise = flushPromise = flushPromise || new Zalgo();\n    flushActive();\n    return promise;\n}\n","/* @flow */\n/* eslint no-use-before-define: off */\n\nimport { isPromise } from './utils';\nimport { onPossiblyUnhandledException, dispatchPossiblyUnhandledError } from './exceptions';\nimport { startActive, endActive, awaitActive } from './flush';\n\nexport class ZalgoPromise<R : mixed> {\n\n    resolved : boolean;\n    rejected : boolean;\n    errorHandled : boolean;\n    value : R;\n    error : mixed;\n    // eslint-disable-next-line flowtype/no-mutable-array\n    handlers : Array<{|\n        promise : ZalgoPromise<*>,\n        onSuccess : void | (result : R) => mixed,\n        onError : void | (error : mixed) => mixed\n    |}>;\n    dispatching : boolean;\n    stack : string;\n\n    constructor(handler : ?(resolve : (result : R) => void, reject : (error : mixed) => void) => void) {\n\n        this.resolved = false;\n        this.rejected = false;\n        this.errorHandled = false;\n\n        this.handlers = [];\n\n        if (handler) {\n\n            let result;\n            let error;\n            let resolved = false;\n            let rejected = false;\n            let isAsync = false;\n\n            startActive();\n\n            try {\n                handler(res => {\n                    if (isAsync) {\n                        this.resolve(res);\n                    } else {\n                        resolved = true;\n                        result = res;\n                    }\n\n                }, err => {\n                    if (isAsync) {\n                        this.reject(err);\n                    } else {\n                        rejected = true;\n                        error = err;\n                    }\n                });\n\n            } catch (err) {\n                endActive();\n                this.reject(err);\n                return;\n            }\n\n            endActive();\n\n            isAsync = true;\n\n            if (resolved) {\n                // $FlowFixMe\n                this.resolve(result);\n            } else if (rejected) {\n                this.reject(error);\n            }\n        }\n\n        if (__DEBUG__) {\n            try {\n                throw new Error(`ZalgoPromise`);\n            } catch (err) {\n                this.stack = err.stack;\n            }\n        }\n    }\n\n    resolve(result : R) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(result)) {\n            throw new Error('Can not resolve promise with another promise');\n        }\n\n        this.resolved = true;\n        this.value = result;\n        this.dispatch();\n\n        return this;\n    }\n\n    reject(error : mixed) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(error)) {\n            throw new Error('Can not reject promise with another promise');\n        }\n\n        if (!error) {\n            // $FlowFixMe\n            const err = (error && typeof error.toString === 'function' ? error.toString() : Object.prototype.toString.call(error));\n            error = new Error(`Expected reject to be called with Error, got ${ err }`);\n        }\n\n        this.rejected = true;\n        this.error = error;\n\n        if (!this.errorHandled) {\n            setTimeout(() => {\n                if (!this.errorHandled) {\n                    dispatchPossiblyUnhandledError(error, this);\n                }\n            }, 1);\n        }\n\n        this.dispatch();\n\n        return this;\n    }\n\n    asyncReject(error : mixed) : ZalgoPromise<R> {\n        this.errorHandled = true;\n        this.reject(error);\n        return this;\n    }\n\n    dispatch() {\n\n        const { dispatching, resolved, rejected, handlers } = this;\n\n        if (dispatching) {\n            return;\n        }\n\n        if (!resolved && !rejected) {\n            return;\n        }\n\n        this.dispatching = true;\n        startActive();\n\n        const chain = <T>(firstPromise : ZalgoPromise<T>, secondPromise : ZalgoPromise<T>) => {\n            return firstPromise.then(res => {\n                secondPromise.resolve(res);\n            }, err => {\n                secondPromise.reject(err);\n            });\n        };\n\n        for (let i = 0; i < handlers.length; i++) {\n\n            const { onSuccess, onError, promise } = handlers[i];\n\n            let result;\n\n            if (resolved) {\n\n                try {\n                    result = onSuccess ? onSuccess(this.value) : this.value;\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n\n            } else if (rejected) {\n\n                if (!onError) {\n                    promise.reject(this.error);\n                    continue;\n                }\n\n                try {\n                    result = onError(this.error);\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n            }\n\n            if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n                const promiseResult : ZalgoPromise<*> = result;\n\n                if (promiseResult.resolved) {\n                    promise.resolve(promiseResult.value);\n                } else {\n                    promise.reject(promiseResult.error);\n                }\n\n                promiseResult.errorHandled = true;\n\n            } else if (isPromise(result)) {\n\n                if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n                    if (result.resolved) {\n                        promise.resolve(result.value);\n                    } else {\n                        promise.reject(result.error);\n                    }\n\n                } else {\n                    // $FlowFixMe\n                    chain(result, promise);\n                }\n\n            } else {\n\n                promise.resolve(result);\n            }\n        }\n\n        handlers.length = 0;\n        this.dispatching = false;\n        endActive();\n    }\n\n    then<X, Y>(onSuccess : void | (result : R) => (ZalgoPromise<X> | Y), onError : void | (error : mixed) => (ZalgoPromise<X> | Y)) : ZalgoPromise<X | Y> {\n\n        if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n            throw new Error('Promise.then expected a function for success handler');\n        }\n\n        if (onError && typeof onError !== 'function' && !onError.call) {\n            throw new Error('Promise.then expected a function for error handler');\n        }\n\n        const promise = new ZalgoPromise();\n\n        this.handlers.push({\n            promise,\n            onSuccess,\n            onError\n        });\n\n        this.errorHandled = true;\n\n        this.dispatch();\n\n        return promise;\n    }\n\n    catch<X, Y>(onError : (error : mixed) => ZalgoPromise<X> | Y) : ZalgoPromise<X | Y> {\n        // $FlowFixMe incompatible-call\n        const resultPromise : ZalgoPromise<X | Y> = this.then(undefined, onError);\n        return resultPromise;\n    }\n\n    finally(onFinally : () => mixed) : ZalgoPromise<R> {\n\n        if (onFinally && typeof onFinally !== 'function' && !onFinally.call) {\n            throw new Error('Promise.finally expected a function');\n        }\n\n        return this.then((result) => {\n            return ZalgoPromise.try(onFinally)\n                .then(() => {\n                    return result;\n                });\n        }, (err) => {\n            return ZalgoPromise.try(onFinally)\n                .then(() => {\n                    throw err;\n                });\n        });\n    }\n\n    timeout(time : number, err : ?Error) : ZalgoPromise<R> {\n\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        const timeout = setTimeout(() => {\n\n            if (this.resolved || this.rejected) {\n                return;\n            }\n\n            this.reject(err || new Error(`Promise timed out after ${ time }ms`));\n\n        }, time);\n\n        return this.then(result => {\n            clearTimeout(timeout);\n            return result;\n        });\n    }\n\n    // $FlowFixMe\n    toPromise() : Promise<R> {\n        // $FlowFixMe\n        if (typeof Promise === 'undefined') {\n            throw new TypeError(`Could not find Promise`);\n        }\n        // $FlowFixMe\n        return Promise.resolve(this); // eslint-disable-line compat/compat\n    }\n\n    lazy() : ZalgoPromise<R> {\n        this.errorHandled = true;\n        return this;\n    }\n\n    static resolve<X, Y>(value : ZalgoPromise<X> | Y) : ZalgoPromise<X | Y> {\n\n        if (value instanceof ZalgoPromise) {\n            // $FlowFixMe incompatible-type-arg\n            const result : ZalgoPromise<X | Y> = value;\n            return result;\n        }\n\n        if (isPromise(value)) {\n            // $FlowFixMe\n            return new ZalgoPromise((resolve, reject) => value.then(resolve, reject));\n        }\n\n        return new ZalgoPromise().resolve(value);\n    }\n\n    static reject(error : mixed) : ZalgoPromise<R> {\n        return new ZalgoPromise().reject(error);\n    }\n\n    static asyncReject(error : mixed) : ZalgoPromise<R> {\n        return new ZalgoPromise().asyncReject(error);\n    }\n\n    static all<X : $ReadOnlyArray<mixed>>(promises : X) : ZalgoPromise<$TupleMap<X, <Y>(ZalgoPromise<Y> | Y) => Y>> { // eslint-disable-line no-undef\n\n        const promise = new ZalgoPromise();\n        let count = promises.length;\n        // eslint-disable-next-line no-undef, unicorn/prefer-spread\n        const results = ([] : $TupleMap<X, <Y>(ZalgoPromise<Y> | Y) => Y>).slice();\n\n        if (!count) {\n            promise.resolve(results);\n            return promise;\n        }\n\n        const chain = <T>(i : number, firstPromise : ZalgoPromise<T>, secondPromise : ZalgoPromise<T>) => {\n            return firstPromise.then(res => {\n                results[i] = res;\n                count -= 1;\n                if (count === 0) {\n                    promise.resolve(results);\n                }\n            }, err => {\n                secondPromise.reject(err);\n            });\n        };\n\n        for (let i = 0; i < promises.length; i++) {\n            const prom = promises[i];\n\n            if (prom instanceof ZalgoPromise) {\n                if (prom.resolved) {\n                    results[i] = prom.value;\n                    count -= 1;\n                    continue;\n                }\n            } else if (!isPromise(prom)) {\n                results[i] = prom;\n                count -= 1;\n                continue;\n            }\n\n            chain(i, ZalgoPromise.resolve(prom), promise);\n        }\n\n        if (count === 0) {\n            promise.resolve(results);\n        }\n\n        return promise;\n    }\n\n    static hash<O : Object>(promises : O) : ZalgoPromise<$ObjMap<O, <Y>(ZalgoPromise<Y> | Y) => Y>> { // eslint-disable-line no-undef\n        const result = {};\n        const awaitPromises = [];\n\n        for (const key in promises) {\n            if (promises.hasOwnProperty(key)) {\n                const value = promises[key];\n\n                if (isPromise(value)) {\n                    awaitPromises.push(value.then(res => {\n                        result[key] = res;\n                    }));\n                } else {\n                    result[key] = value;\n                }\n            }\n        }\n\n        return ZalgoPromise.all(awaitPromises).then(() => result);\n    }\n\n    static map<T, X>(items : $ReadOnlyArray<T>, method : (T) => (ZalgoPromise<X> | X)) : ZalgoPromise<$ReadOnlyArray<X>> {\n        // $FlowFixMe\n        return ZalgoPromise.all(items.map(method));\n    }\n\n    static onPossiblyUnhandledException(handler : (err : mixed) => void) : {| cancel : () => void |} {\n        return onPossiblyUnhandledException(handler);\n    }\n\n    static try<X, Y, C : mixed, A : $ReadOnlyArray<mixed>>(method : (...args : $ReadOnlyArray<mixed>) => (ZalgoPromise<X> | Y), context? : C, args? : A) : ZalgoPromise<X | Y> {\n\n        if (method && typeof method !== 'function' && !method.call) {\n            throw new Error('Promise.try expected a function');\n        }\n\n        let result : ZalgoPromise<X> | Y;\n\n        startActive();\n\n        try {\n            result = method.apply(context, args || []);\n        } catch (err) {\n            endActive();\n            return ZalgoPromise.reject(err);\n        }\n\n        endActive();\n\n        // $FlowFixMe incompatible-call\n        const resultPromise = ZalgoPromise.resolve(result);\n\n        return resultPromise;\n    }\n\n    static delay(delay : number) : ZalgoPromise<void> {\n        return new ZalgoPromise(resolve => {\n            setTimeout(resolve, delay);\n        });\n    }\n\n    static isPromise(value : mixed) : boolean {\n\n        if (value && value instanceof ZalgoPromise) {\n            return true;\n        }\n\n        return isPromise(value);\n    }\n\n    static flush() : ZalgoPromise<void> {\n        return awaitActive(ZalgoPromise);\n    }\n}\n","/* @flow */\n/* eslint max-lines: 0 */\n\nimport { isRegex, noop } from './util';\nimport type { CrossDomainWindowType, SameDomainWindowType, DomainMatcher } from './types';\nimport { PROTOCOL, WILDCARD } from './constants';\n\nconst IE_WIN_ACCESS_ERROR = 'Call was rejected by callee.\\r\\n';\n\nexport function getActualProtocol(win : SameDomainWindowType = window) : ?string {\n    return win.location.protocol;\n}\n\nexport function getProtocol(win : SameDomainWindowType = window) : ?string {\n    if (win.mockDomain) {\n        const protocol = win.mockDomain.split('//')[0];\n\n        if (protocol) {\n            return protocol;\n        }\n    }\n\n    return getActualProtocol(win);\n}\n\nexport function isFileProtocol(win : SameDomainWindowType = window) : boolean {\n    return getProtocol(win) === PROTOCOL.FILE;\n}\n\nexport function isAboutProtocol(win : SameDomainWindowType = window) : boolean {\n    return getProtocol(win) === PROTOCOL.ABOUT;\n}\n\nexport function isMockProtocol(win : SameDomainWindowType = window) : boolean {\n    return getProtocol(win) === PROTOCOL.MOCK;\n}\n\nexport function getParent(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.parent && win.parent !== win) {\n            return win.parent;\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function getOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    // Make sure we're not actually an iframe which has had window.open() called on us\n    if (getParent(win)) {\n        return;\n    }\n\n    try {\n        return win.opener;\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function canReadFromWindow(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        noop(win && win.location && win.location.href);\n        return true;\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function getActualDomain(win? : SameDomainWindowType = window) : string {\n\n    const location = win.location;\n\n    if (!location) {\n        throw new Error(`Can not read window location`);\n    }\n\n    const protocol = getActualProtocol(win);\n\n    if (!protocol) {\n        throw new Error(`Can not read window protocol`);\n    }\n\n    if (protocol === PROTOCOL.FILE) {\n        return `${ PROTOCOL.FILE }//`;\n    }\n\n    if (protocol === PROTOCOL.ABOUT) {\n\n        const parent = getParent(win);\n        if (parent && canReadFromWindow(parent)) {\n            // $FlowFixMe\n            return getActualDomain(parent);\n        }\n\n        return `${ PROTOCOL.ABOUT }//`;\n    }\n\n    const host = location.host;\n\n    if (!host) {\n        throw new Error(`Can not read window host`);\n    }\n\n    return `${ protocol }//${ host }`;\n}\n\nexport function getDomain(win? : SameDomainWindowType = window) : string {\n\n    const domain = getActualDomain(win);\n\n    if (domain && win.mockDomain && win.mockDomain.indexOf(PROTOCOL.MOCK) === 0) {\n        return win.mockDomain;\n    }\n\n    return domain;\n}\n\nexport function isBlankDomain(win : CrossDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        if (!win.location.href) {\n            return true;\n        }\n\n        if (win.location.href === 'about:blank') {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isActuallySameDomain(win : CrossDomainWindowType) : boolean {\n\n    try {\n        if (win === window) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        const desc = Object.getOwnPropertyDescriptor(win, 'location');\n\n        if (desc && desc.enumerable === false) {\n            return false;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (isMockProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (getActualDomain(win) === getActualDomain(window)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n\n    if (!isActuallySameDomain(win)) {\n        return false;\n    }\n\n    try {\n        if (win === window) {\n            return true;\n        }\n        \n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n\n        // $FlowFixMe\n        if (getDomain(window) === getDomain(win)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\n\nexport function assertSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : SameDomainWindowType {\n    if (!isSameDomain(win)) {\n        throw new Error(`Expected window to be same domain`);\n    }\n\n    // $FlowFixMe\n    return win;\n}\n\nexport function getParents(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const result = [];\n\n    try {\n\n        while (win.parent !== win) {\n            result.push(win.parent);\n            win = win.parent;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return result;\n}\n\nexport function isAncestorParent(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    if (!parent || !child) {\n        return false;\n    }\n\n    const childParent = getParent(child);\n\n    if (childParent) {\n        return childParent === parent;\n    }\n\n    if (getParents(child).indexOf(parent) !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getFrames(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const result = [];\n\n    let frames;\n\n    try {\n        frames = win.frames;\n    } catch (err) {\n        frames = win;\n    }\n\n    let len;\n\n    try {\n        len = frames.length;\n    } catch (err) {\n        // pass\n    }\n\n    if (len === 0) {\n        return result;\n    }\n\n    if (len) {\n        for (let i = 0; i < len; i++) {\n\n            let frame;\n\n            try {\n                frame = frames[i];\n            } catch (err) {\n                continue;\n            }\n\n            result.push(frame);\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < 100; i++) {\n        let frame;\n\n        try {\n            frame = frames[i];\n        } catch (err) {\n            return result;\n        }\n\n        if (!frame) {\n            return result;\n        }\n\n        result.push(frame);\n    }\n\n    return result;\n}\n\n\nexport function getAllChildFrames(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const result = [];\n\n    for (const frame of getFrames(win)) {\n        result.push(frame);\n\n        for (const childFrame of getAllChildFrames(frame)) {\n            result.push(childFrame);\n        }\n    }\n\n    return result;\n}\n\nexport function getTop(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    try {\n        if (win.top) {\n            return win.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    if (getParent(win) === win) {\n        return win;\n    }\n\n    try {\n        if (isAncestorParent(window, win) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isAncestorParent(win, window) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    for (const frame of getAllChildFrames(win)) {\n        try {\n            if (frame.top) {\n                return frame.top;\n            }\n        } catch (err) {\n            // pass\n        }\n\n        if (getParent(frame) === frame) {\n            return frame;\n        }\n    }\n}\n\nexport function getNextOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    return getOpener(getTop(win) || win);\n}\n\nexport function getUltimateTop(win? : CrossDomainWindowType = window) : CrossDomainWindowType {\n    const opener = getNextOpener(win);\n\n    if (opener) {\n        return getUltimateTop(opener);\n    }\n\n    return top;\n}\n\nexport function getAllFramesInWindow(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n    const top = getTop(win);\n\n    if (!top) {\n        throw new Error(`Can not determine top window`);\n    }\n\n    let result = [ ...getAllChildFrames(top), top ];\n\n    // Win may be in shadow dom\n    if (result.indexOf(win) === -1) {\n        result = [ ...result, win, ...getAllChildFrames(win) ];\n    }\n\n    return result;\n}\n\nexport function getAllWindows(win? : CrossDomainWindowType = window) : $ReadOnlyArray<CrossDomainWindowType> {\n    const frames = getAllFramesInWindow(win);\n    const opener = getNextOpener(win);\n\n    if (opener) {\n        return [ ...getAllWindows(opener), ...frames ];\n    } else {\n        return frames;\n    }\n}\n\nexport function isTop(win : CrossDomainWindowType) : boolean {\n    return win === getTop(win);\n}\n\nexport function isFrameWindowClosed(frame : HTMLIFrameElement) : boolean {\n\n    if (!frame.contentWindow) {\n        return true;\n    }\n\n    if (!frame.parentNode) {\n        return true;\n    }\n\n    const doc = frame.ownerDocument;\n\n    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n        let parent = frame;\n\n        while (parent.parentNode && parent.parentNode !== parent) {\n            parent = parent.parentNode;\n        }\n\n        // $FlowFixMe\n        if (!parent.host || !doc.documentElement.contains(parent.host)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction safeIndexOf<T>(collection : $ReadOnlyArray<T>, item : T) : number {\n    for (let i = 0; i < collection.length; i++) {\n\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\nconst iframeWindows = [];\nconst iframeFrames = [];\n\nexport function isWindowClosed(win : CrossDomainWindowType, allowMock : boolean = true) : boolean {\n\n    try {\n        if (win === window) {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (!win) {\n            return true;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (win.closed) {\n            return true;\n        }\n\n    } catch (err) {\n\n        // I love you so much IE\n\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    if (allowMock && isSameDomain(win)) {\n        try {\n            // $FlowFixMe\n            if (win.mockclosed) {\n                return true;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    // Mobile safari\n\n    try {\n        if (!win.parent || !win.top) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    // Yes, this actually happens in IE. win === win errors out when the window\n    // is from an iframe, and the iframe was removed from the page.\n\n    try {\n        noop(win === win); // eslint-disable-line no-self-compare\n    } catch (err) {\n        return true;\n    }\n\n    // IE orphaned frame\n\n    const iframeIndex = safeIndexOf(iframeWindows, win);\n\n    if (iframeIndex !== -1) {\n        const frame = iframeFrames[iframeIndex];\n\n        if (frame && isFrameWindowClosed(frame)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction cleanIframes() {\n    for (let i = 0; i < iframeWindows.length; i++) {\n        let closed = false;\n\n        try {\n            closed = iframeWindows[i].closed;\n        } catch (err) {\n            // pass\n        }\n\n        if (closed) {\n            iframeFrames.splice(i, 1);\n            iframeWindows.splice(i, 1);\n        }\n    }\n}\n\nexport function linkFrameWindow(frame : HTMLIFrameElement) {\n\n    cleanIframes();\n\n    if (frame && frame.contentWindow) {\n        try {\n            iframeWindows.push(frame.contentWindow);\n            iframeFrames.push(frame);\n        } catch (err) {\n            // pass\n        }\n    }\n}\n\nexport function getUserAgent(win : ?SameDomainWindowType) : string {\n    win = win || window;\n    return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\n\nexport function getFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    const winFrames = getFrames(win);\n\n    for (const childFrame of winFrames) {\n        try {\n            // $FlowFixMe\n            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n                return childFrame;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    try {\n        // $FlowFixMe\n        if (winFrames.indexOf(win.frames[name]) !== -1) {\n            // $FlowFixMe\n            return win.frames[name];\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (winFrames.indexOf(win[name]) !== -1) {\n            return win[name];\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function findChildFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    const frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    for (const childFrame of getFrames(win)) {\n        const namedFrame = findChildFrameByName(childFrame, name);\n\n        if (namedFrame) {\n            return namedFrame;\n        }\n    }\n}\n\nexport function findFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n    const frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    const top = getTop(win) || win;\n\n    return findChildFrameByName(top, name);\n}\n\nexport function isParent(win : CrossDomainWindowType, frame : CrossDomainWindowType) : boolean {\n\n    const frameParent = getParent(frame);\n\n    if (frameParent) {\n        return frameParent === win;\n    }\n\n    for (const childFrame of getFrames(win)) {\n        if (childFrame === frame) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isOpener(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    return parent === getOpener(child);\n}\n\nexport function getAncestor(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    win = win || window;\n\n    const opener = getOpener(win);\n\n    if (opener) {\n        return opener;\n    }\n\n    const parent = getParent(win);\n\n    if (parent) {\n        return parent;\n    }\n}\n\nexport function getAncestors(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const results = [];\n\n    let ancestor = win;\n\n    while (ancestor) {\n        ancestor = getAncestor(ancestor);\n        if (ancestor) {\n            results.push(ancestor);\n        }\n    }\n\n    return results;\n}\n\n\nexport function isAncestor(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    const actualParent = getAncestor(child);\n\n    if (actualParent) {\n        if (actualParent === parent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    if (child === parent) {\n        return false;\n    }\n\n    if (getTop(child) === child) {\n        return false;\n    }\n\n    for (const frame of getFrames(parent)) {\n        if (frame === child) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isPopup(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(getOpener(win));\n}\n\nexport function isIframe(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(getParent(win));\n}\n\nexport function isFullpage(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(!isIframe(win) && !isPopup(win));\n}\n\nfunction anyMatch(collection1, collection2) : boolean {\n\n    for (const item1 of collection1) {\n        for (const item2 of collection2) {\n            if (item1 === item2) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nexport function getDistanceFromTop(win : CrossDomainWindowType = window) : number {\n    let distance = 0;\n    let parent = win;\n\n    while (parent) {\n        parent = getParent(parent);\n        if (parent) {\n            distance += 1;\n        }\n    }\n\n    return distance;\n}\n\nexport function getNthParent(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    let parent = win;\n\n    for (let i = 0; i < n; i++) {\n        if (!parent) {\n            return;\n        }\n\n        parent = getParent(parent);\n    }\n\n    return parent;\n}\n\nexport function getNthParentFromTop(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    return getNthParent(win, getDistanceFromTop(win) - n);\n}\n\nexport function isSameTopWindow(win1 : CrossDomainWindowType, win2 : CrossDomainWindowType) : boolean {\n\n    const top1 = getTop(win1) || win1;\n    const top2 = getTop(win2) || win2;\n\n    try {\n        if (top1 && top2) {\n            if (top1 === top2) {\n                return true;\n            }\n\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    const allFrames1 = getAllFramesInWindow(win1);\n    const allFrames2 = getAllFramesInWindow(win2);\n\n    if (anyMatch(allFrames1, allFrames2)) {\n        return true;\n    }\n\n    const opener1 = getOpener(top1);\n    const opener2 = getOpener(top2);\n\n    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n        return false;\n    }\n\n    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n        return false;\n    }\n\n    return false;\n}\n\nexport function matchDomain(pattern : DomainMatcher, origin : DomainMatcher) : boolean {\n\n    if (typeof pattern === 'string') {\n\n        if (typeof origin === 'string') {\n            return pattern === WILDCARD || origin === pattern;\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n    }\n\n    if (isRegex(pattern)) {\n\n        if (isRegex(origin)) {\n            return pattern.toString() === origin.toString();\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        // $FlowFixMe\n        return Boolean(origin.match(pattern));\n    }\n\n    if (Array.isArray(pattern)) {\n\n        if (Array.isArray(origin)) {\n            return JSON.stringify(pattern) === JSON.stringify(origin);\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        return pattern.some(subpattern => matchDomain(subpattern, origin));\n    }\n\n    return false;\n}\n\nexport function stringifyDomainPattern(pattern : DomainMatcher) : string {\n    if (Array.isArray(pattern)) {\n        return `(${ pattern.join(' | ') })`;\n    } else if (isRegex(pattern)) {\n        return `RegExp(${ pattern.toString() })`;\n    } else {\n        return pattern.toString();\n    }\n}\n\nexport function getDomainFromUrl(url : string) : string {\n\n    let domain;\n\n    if (url.match(/^(https?|mock|file):\\/\\//)) {\n        domain = url;\n    } else {\n        return getDomain();\n    }\n\n    domain = domain.split('/').slice(0, 3).join('/');\n\n    return domain;\n}\n\nexport function onCloseWindow(win : CrossDomainWindowType, callback : Function, delay : number = 1000, maxtime : number = Infinity) : {| cancel : () => void |} {\n\n    let timeout;\n\n    const check = () => {\n\n        if (isWindowClosed(win)) {\n\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n\n            return callback();\n        }\n\n        if (maxtime <= 0) {\n            clearTimeout(timeout);\n        } else {\n            maxtime -= delay;\n            timeout = setTimeout(check, delay);\n        }\n    };\n\n    check();\n\n    return {\n        cancel() {\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n        }\n    };\n}\n\n// eslint-disable-next-line complexity\nexport function isWindow(obj : Object) : boolean {\n\n    try {\n        if (obj === window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        // $FlowFixMe method-unbinding\n        if (Object.prototype.toString.call(obj) === '[object Window]') {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (window.Window && obj instanceof window.Window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.self === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.parent === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.top === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (noop(obj === obj) === '__unlikely_value__') { // eslint-disable-line no-self-compare\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (obj && obj.__cross_domain_utils_window_check__ === '__unlikely_value__') {\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if ('postMessage' in obj && 'self' in obj && 'location' in obj) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isBrowser() : boolean {\n    return (typeof window !== 'undefined' && typeof window.location !== 'undefined');\n}\n\nexport function isCurrentDomain(domain : string) : boolean {\n    if (!isBrowser()) {\n        return false;\n    }\n\n    return (getDomain() === domain);\n}\n\nexport function isMockDomain(domain : string) : boolean {\n    return domain.indexOf(PROTOCOL.MOCK) === 0;\n}\n\nexport function normalizeMockUrl(url : string) : string {\n    if (!isMockDomain(getDomainFromUrl(url))) {\n        return url;\n    }\n\n    if (!__TEST__) {\n        throw new Error(`Mock urls not supported out of test mode`);\n    }\n\n    return url.replace(/^mock:\\/\\/[^/]+/, getActualDomain(window));\n}\n\nexport function getFrameForWindow(win : CrossDomainWindowType) : ?HTMLElement {\n    if (isSameDomain(win)) {\n        return assertSameDomain(win).frameElement;\n    }\n\n    for (const frame of document.querySelectorAll('iframe')) {\n        if (frame && frame.contentWindow && frame.contentWindow === win) {\n            return frame;\n        }\n    }\n}\n\nexport function closeWindow(win : CrossDomainWindowType) {\n    if (isIframe(win)) {\n        const frame = getFrameForWindow(win);\n        if (frame && frame.parentElement) {\n            frame.parentElement.removeChild(frame);\n            return;\n        }\n    }\n\n    try {\n        win.close();\n    } catch (err) {\n        // pass\n    }\n}\n","/* @flow */\n\nexport const PROTOCOL = {\n    MOCK:  ('mock:' : 'mock:'),\n    FILE:  ('file:' : 'file:'),\n    ABOUT: ('about:' : 'about:')\n};\n\nexport const WILDCARD = '*';\n\nexport const WINDOW_TYPE = {\n    IFRAME: ('iframe' : 'iframe'),\n    POPUP:  ('popup' : 'popup')\n};\n","/* @flow */\n\nexport function safeIndexOf<T>(collection : $ReadOnlyArray<T>, item : T) : number {\n    for (let i = 0; i < collection.length; i++) {\n\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args : $ReadOnlyArray<mixed>) {\n    // pass\n}\n","/* @flow */\n\nimport { isWindow, isWindowClosed } from '@krakenjs/cross-domain-utils/src';\n\nimport { hasNativeWeakMap } from './native';\nimport { noop, safeIndexOf } from './util';\n\nexport class CrossDomainSafeWeakMap<K : Object, V : mixed> {\n\n    name : string;\n    weakmap : ?WeakMap<K, V>;\n    // eslint-disable-next-line flowtype/no-mutable-array\n    keys : Array<K>;\n    // eslint-disable-next-line flowtype/no-mutable-array\n    values : Array<V>;\n\n    constructor() {\n        // eslint-disable-next-line no-bitwise\n        this.name = `__weakmap_${ Math.random() * 1e9 >>> 0 }__`;\n\n        if (hasNativeWeakMap()) {\n            try {\n                this.weakmap = new WeakMap();\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this.keys  = [];\n        this.values = [];\n    }\n\n    _cleanupClosedWindows() {\n\n        const weakmap = this.weakmap;\n        const keys = this.keys;\n\n        for (let i = 0; i < keys.length; i++) {\n            const value = keys[i];\n\n            if (isWindow(value) && isWindowClosed(value)) {\n\n                if (weakmap) {\n                    try {\n                        weakmap.delete(value);\n                    } catch (err) {\n                        // pass\n                    }\n                }\n\n                keys.splice(i, 1);\n                this.values.splice(i, 1);\n\n                i -= 1;\n            }\n        }\n    }\n\n    isSafeToReadWrite(key : K) : boolean {\n\n        if (isWindow(key)) {\n            return false;\n        }\n\n        try {\n            noop(key && key.self);\n            noop(key && key[this.name]);\n        } catch (err) {\n            return false;\n        }\n\n        return true;\n    }\n\n    set(key : K, value : V) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.set(key, value);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const name = this.name;\n                const entry = key[name];\n\n                if (entry && entry[0] === key) {\n                    entry[1] = value;\n                } else {\n                    Object.defineProperty(key, name, {\n                        value:    [ key, value ],\n                        writable: true\n                    });\n                }\n\n                return;\n\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const values = this.values;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            keys.push(key);\n            values.push(value);\n        } else {\n            values[index] = value;\n        }\n    }\n\n    get(key : K) : V | void {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return weakmap.get(key);\n                }\n\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return entry[1];\n                }\n\n                return;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            return;\n        }\n\n        return this.values[index];\n    }\n\n    delete(key : K) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.delete(key);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    entry[0] = entry[1] = undefined;\n                }\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index !== -1) {\n            keys.splice(index, 1);\n            this.values.splice(index, 1);\n        }\n    }\n\n    has(key : K) : boolean {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return true;\n                }\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return true;\n                }\n\n                return false;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const index = safeIndexOf(this.keys, key);\n        return index !== -1;\n    }\n\n    getOrSet(key : K, getter : () => V) : V {\n        if (this.has(key)) {\n            // $FlowFixMe\n            return this.get(key);\n        }\n\n        const value = getter();\n        this.set(key, value);\n        return value;\n    }\n}\n","\n/* @flow */\n/* eslint max-lines: 0 */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { WeakMap } from '@krakenjs/cross-domain-safe-weakmap/src';\n\nimport type { CancelableType } from './types';\n\nexport function isElement(element : mixed) : boolean {\n    let passed = false;\n\n    try {\n        if (element instanceof window.Element) {\n            passed = true;\n        } else if (element !== null && typeof element === 'object' && element.nodeType === 1 && typeof element.style === 'object' && typeof element.ownerDocument === 'object') {\n            passed = true;\n        }\n    } catch (_) {\n        // we don't have an element\n    }\n\n    return passed;\n}\n\nexport function getFunctionName <T : Function>(fn : T) : string {\n    return fn.name || fn.__name__ || fn.displayName || 'anonymous';\n}\n\nexport function setFunctionName <T : Function>(fn : T, name : string) : T {\n    try {\n        delete fn.name;\n        fn.name = name;\n    } catch (err) {\n        // pass\n    }\n\n    fn.__name__ = fn.displayName = name;\n    return fn;\n}\n\nexport function base64encode(str : string) : string {\n    if (typeof btoa === 'function') {\n        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (m, p1) => {\n            return String.fromCharCode(parseInt(p1, 16));\n        })).replace(/[=]/g, '');\n    }\n\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'utf8').toString('base64').replace(/[=]/g, '');\n    }\n\n    throw new Error(`Can not find window.btoa or Buffer`);\n}\n\nexport function base64decode(str : string) : string {\n    if (typeof atob === 'function') {\n        // $FlowFixMe[method-unbinding]\n        return decodeURIComponent(Array.prototype.map.call(atob(str), c => {\n            // eslint-disable-next-line prefer-template\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n    }\n\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'base64').toString('utf8');\n    }\n\n    throw new Error(`Can not find window.atob or Buffer`);\n}\n\nexport function uniqueID() : string {\n\n    const chars = '0123456789abcdef';\n\n    const randomID = 'xxxxxxxxxx'.replace(/./g, () => {\n        return chars.charAt(Math.floor(Math.random() * chars.length));\n    });\n\n    const timeID = base64encode(\n        new Date().toISOString().slice(11, 19).replace('T', '.')\n    ).replace(/[^a-zA-Z0-9]/g, '').toLowerCase();\n\n    return `uid_${ randomID }_${ timeID }`;\n}\n\nexport function getGlobal() : Object {\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    if (typeof __GLOBAL__ !== 'undefined') {\n        return __GLOBAL__;\n    }\n    throw new Error(`No global found`);\n}\n\nlet objectIDs;\n\nexport function getObjectID(obj : Object) : string {\n\n    objectIDs = objectIDs || new WeakMap();\n\n    if (obj === null || obj === undefined || (typeof obj !== 'object' && typeof obj !== 'function')) {\n        throw new Error(`Invalid object`);\n    }\n\n    let uid = objectIDs.get(obj);\n\n    if (!uid) {\n        uid = `${ typeof obj }:${ uniqueID() }`;\n        objectIDs.set(obj, uid);\n    }\n\n    return uid;\n}\n\nfunction serializeArgs<T>(args : $ReadOnlyArray<T>) : string {\n    try {\n        // $FlowFixMe[method-unbinding]\n        return JSON.stringify(Array.prototype.slice.call(args), (subkey, val) => {\n\n            // Treat each distinct function as unique for purposes of memoization\n            // e.g. even if someFunction.stringify() is the same, we may use a different memoize cache\n            // if the actual function is different.\n            if (typeof val === 'function') {\n                return `memoize[${ getObjectID(val) }]`;\n            }\n\n            // By default JSON.stringify(domElement) returns '{}'. This ensures that stays true even for non-standard\n            // elements (e.g. React-rendered dom elements) with custom properties\n            if (isElement(val)) {\n                return {};\n            }\n\n            return val;\n        });\n    } catch (err) {\n        throw new Error(`Arguments not serializable -- can not be used to memoize`);\n    }\n}\n\nexport function getEmptyObject() : {||} {\n    // $FlowFixMe\n    return {};\n}\n\ntype MemoizeOptions = {|\n    name? : string,\n    time? : number,\n    thisNamespace? : boolean\n|};\n\nconst getDefaultMemoizeOptions = () : MemoizeOptions => {\n    // $FlowFixMe\n    return {};\n};\n\nexport type Memoized<F> = F & {| reset : () => void |};\n\nlet memoizeGlobalIndex = 0;\nlet memoizeGlobalIndexValidFrom = 0;\n\nexport function memoize<F : Function>(method : F, options? : MemoizeOptions = getDefaultMemoizeOptions()) : Memoized<F> {\n    const { thisNamespace = false, time: cacheTime } = options;\n\n    let simpleCache;\n    let thisCache;\n\n    let memoizeIndex = memoizeGlobalIndex;\n    memoizeGlobalIndex += 1;\n\n    const memoizedFunction = function memoizedFunction(...args) : mixed {\n        if (memoizeIndex < memoizeGlobalIndexValidFrom) {\n            simpleCache = null;\n            thisCache = null;\n            memoizeIndex = memoizeGlobalIndex;\n            memoizeGlobalIndex += 1;\n        }\n\n        let cache;\n\n        if (thisNamespace) {\n            thisCache = thisCache || new WeakMap();\n            cache = thisCache.getOrSet(this, getEmptyObject);\n        } else {\n            cache = simpleCache = simpleCache || {};\n        }\n\n        let cacheKey;\n\n        try {\n            cacheKey = serializeArgs(args);\n        } catch {\n            return method.apply(this, arguments);\n        }\n\n        let cacheResult = cache[cacheKey];\n\n        if (cacheResult && cacheTime && (Date.now() - cacheResult.time) < cacheTime) {\n            delete cache[cacheKey];\n            cacheResult = null;\n        }\n\n        if (cacheResult) {\n            return cacheResult.value;\n        }\n\n        const time  = Date.now();\n        const value = method.apply(this, arguments);\n\n        cache[cacheKey] = { time, value };\n\n        return value;\n    };\n\n    memoizedFunction.reset = () => {\n        simpleCache = null;\n        thisCache = null;\n    };\n\n    // $FlowFixMe\n    const result : F = memoizedFunction;\n\n    return setFunctionName(result, `${ options.name || getFunctionName(method) }::memoized`);\n}\n\nmemoize.clear = () => {\n    memoizeGlobalIndexValidFrom = memoizeGlobalIndex;\n};\n\nexport function promiseIdentity<T : mixed>(item : ZalgoPromise<T> | T) : ZalgoPromise<T> {\n    // $FlowFixMe\n    return ZalgoPromise.resolve(item);\n}\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function memoizePromise<R>(method : (...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) : ((...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) {\n    let cache = {};\n\n    // eslint-disable-next-line flowtype/no-weak-types\n    function memoizedPromiseFunction(...args : $ReadOnlyArray<any>) : ZalgoPromise<R> {\n        const key : string = serializeArgs(args);\n\n        if (cache.hasOwnProperty(key)) {\n            return cache[key];\n        }\n\n        cache[key] = ZalgoPromise.try(() => method.apply(this, arguments))\n            .finally(() => {\n                delete cache[key];\n            });\n\n        return cache[key];\n    }\n\n    memoizedPromiseFunction.reset = () => {\n        cache = {};\n    };\n\n    return setFunctionName(memoizedPromiseFunction, `${ getFunctionName(method) }::promiseMemoized`);\n}\n\ntype PromisifyOptions = {|\n    name ? : string\n|};\n\nconst getDefaultPromisifyOptions = () : PromisifyOptions => {\n    // $FlowFixMe\n    return {};\n};\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function promisify<R>(method : (...args : $ReadOnlyArray<any>) => R, options : PromisifyOptions = getDefaultPromisifyOptions()) : ((...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) {\n    function promisifiedFunction() : ZalgoPromise<R> {\n        return ZalgoPromise.try(method, this, arguments);\n    }\n\n    if (options.name) {\n        promisifiedFunction.displayName = `${ options.name }:promisified`;\n    }\n\n    return setFunctionName(promisifiedFunction, `${ getFunctionName(method) }::promisified`);\n}\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function inlineMemoize<R>(method : (...args : $ReadOnlyArray<any>) => R, logic : (...args : $ReadOnlyArray<any>) => R, args : $ReadOnlyArray<any> = []) : R {\n    // $FlowFixMe\n    const cache : {| [string] : R |} = method.__inline_memoize_cache__ = method.__inline_memoize_cache__ || {};\n    const key = serializeArgs(args);\n\n    if (cache.hasOwnProperty(key)) {\n        return cache[key];\n    }\n\n    const result = cache[key] = logic(...args);\n\n    return result;\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args : $ReadOnlyArray<mixed>) {\n    // pass\n}\n\nexport function once(method : Function) : Function {\n    let called = false;\n\n    const onceFunction = function() : mixed {\n        if (!called) {\n            called = true;\n            return method.apply(this, arguments);\n        }\n    };\n\n    return setFunctionName(onceFunction, `${ getFunctionName(method) }::once`);\n}\n\nexport function hashStr(str : string) : number {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n        hash += str[i].charCodeAt(0) * Math.pow((i % 10) + 1, 5);\n    }\n    return Math.floor(Math.pow(Math.sqrt(hash), 5));\n}\n\nexport function strHashStr(str : string) : string {\n    let hash = '';\n\n    for (let i = 0; i < str.length; i++) {\n        let total = (str[i].charCodeAt(0) * i);\n\n        if (str[i + 1]) {\n            total += (str[i + 1].charCodeAt(0) * (i - 1));\n        }\n\n        hash += String.fromCharCode(97 + (Math.abs(total) % 26));\n    }\n\n    return hash;\n}\n\nexport function match(str : string, pattern : RegExp) : ?string {\n    const regmatch = str.match(pattern);\n    if (regmatch) {\n        return regmatch[1];\n    }\n}\n\nexport function awaitKey<T: mixed>(obj : Object, key : string) : ZalgoPromise<T> {\n    return new ZalgoPromise(resolve => {\n\n        let value = obj[key];\n\n        if (value) {\n            return resolve(value);\n        }\n\n        delete obj[key];\n\n        Object.defineProperty(obj, key, {\n\n            configurable: true,\n\n            set(item) {\n                value = item;\n\n                if (value) {\n                    resolve(value);\n                }\n            },\n\n            get() : T {\n                return value;\n            }\n        });\n    });\n}\n\nexport function stringifyError(err : mixed, level : number = 1) : string {\n\n    if (level >= 3) {\n        return 'stringifyError stack overflow';\n    }\n\n    try {\n        if (!err) {\n            // $FlowFixMe[method-unbinding]\n            return `<unknown error: ${ Object.prototype.toString.call(err) }>`;\n        }\n\n        if (typeof err === 'string') {\n            return err;\n        }\n\n        if (err instanceof Error) {\n            const stack = err && err.stack;\n            const message = err && err.message;\n\n            if (stack && message) {\n                if (stack.indexOf(message) !== -1) {\n                    return stack;\n                } else {\n                    return `${ message }\\n${ stack }`;\n                }\n            } else if (stack) {\n                return stack;\n            } else if (message) {\n                return message;\n            }\n        }\n\n        if (err && err.toString && typeof err.toString === 'function') {\n            // $FlowFixMe\n            return err.toString();\n        }\n\n        // $FlowFixMe[method-unbinding]\n        return Object.prototype.toString.call(err);\n\n    } catch (newErr) {\n        return `Error while stringifying error: ${ stringifyError(newErr, level + 1) }`;\n    }\n}\n\nexport function stringifyErrorMessage(err : mixed) : string {\n\n    // $FlowFixMe[method-unbinding]\n    const defaultMessage = `<unknown error: ${ Object.prototype.toString.call(err) }>`;\n\n    if (!err) {\n        return defaultMessage;\n    }\n\n    if (err instanceof Error) {\n        return err.message || defaultMessage;\n    }\n\n    if (typeof err.message === 'string') {\n        return err.message || defaultMessage;\n    }\n\n    return defaultMessage;\n}\n\nexport function stringify(item : mixed) : string {\n    if (typeof item === 'string') {\n        return item;\n    }\n\n    if (item && item.toString && typeof item.toString === 'function') {\n        // $FlowFixMe\n        return item.toString();\n    }\n\n    // $FlowFixMe[method-unbinding]\n    return Object.prototype.toString.call(item);\n}\n\nexport function domainMatches(hostname : string, domain : string) : boolean {\n    hostname = hostname.split('://')[1];\n    const index = hostname.indexOf(domain);\n    return (index !== -1 && hostname.slice(index) === domain);\n}\n\nexport function patchMethod(obj : Object, name : string, handler : Function) {\n    const original = obj[name];\n\n    obj[name] = function patchedMethod() : mixed {\n        return handler({\n            context:      this,\n            // $FlowFixMe[method-unbinding]\n            args:         Array.prototype.slice.call(arguments),\n            original,\n            callOriginal: () => original.apply(this, arguments)\n        });\n    };\n}\n\nexport function extend<T : Object | Function>(obj : T, source : Object) : T {\n    if (!source) {\n        return obj;\n    }\n\n    if (Object.assign) {\n        return Object.assign(obj, source);\n    }\n\n    for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n            obj[key] = source[key];\n        }\n    }\n\n    return obj;\n}\n\nexport function values<T>(obj : { [string] : T }) : $ReadOnlyArray<T> {\n    if (Object.values) {\n        // $FlowFixMe\n        return Object.values(obj);\n    }\n\n    const result : Array<T> = [];\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            // $FlowFixMe[escaped-generic]\n            result.push(obj[key]);\n        }\n    }\n\n    // $FlowFixMe\n    return result;\n}\n\n// eslint-disable-next-line no-undef\nexport const memoizedValues : <T>({ [string] : T }) => $ReadOnlyArray<T> = memoize(values);\n\nexport function perc(pixels : number, percentage : number) : number {\n    return Math.round((pixels * percentage) / 100);\n}\n\nexport function min(...args : $ReadOnlyArray<number>) : number {\n    return Math.min(...args);\n}\n\nexport function max(...args : $ReadOnlyArray<number>) : number {\n    return Math.max(...args);\n}\n\nexport function roundUp(num : number, nearest : number) : number {\n    const remainder = num % nearest;\n    return remainder\n        ? (num - remainder) + nearest\n        : num;\n}\n\nexport function regexMap<T>(str : string, regexp : RegExp, handler : () => T) : $ReadOnlyArray<T> {\n    const results = [];\n\n    // $FlowFixMe\n    str.replace(regexp, function regexMapMatcher(item) {\n        results.push(handler ? handler.apply(null, arguments) : item);\n    });\n\n    // $FlowFixMe\n    return results;\n}\n\nexport function svgToBase64(svg : string) : string {\n    return `data:image/svg+xml;base64,${ base64encode(svg) }`;\n}\n\nexport function objFilter<T, R>(obj : { [string] : T }, filter? : (T, ?string) => mixed = Boolean) : { [string] : R } {\n    const result = {};\n\n    for (const key in obj) {\n        if (!obj.hasOwnProperty(key) || !filter(obj[key], key)) {\n            continue;\n        }\n\n        result[key] = obj[key];\n    }\n\n    return result;\n}\n\nexport function identity <T>(item : T) : T {\n    return item;\n}\n\nexport function regexTokenize(text : string, regexp : RegExp) : $ReadOnlyArray<string> {\n    const result = [];\n    text.replace(regexp, token => {\n        result.push(token);\n        return '';\n    });\n    return result;\n}\n\nexport function promiseDebounce<T>(method : () => ZalgoPromise<T> | T, delay : number = 50) : () => ZalgoPromise<T> {\n\n    let promise;\n    let timeout;\n\n    const promiseDebounced = function() : ZalgoPromise<T> {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n\n        const localPromise = promise = promise || new ZalgoPromise();\n\n        timeout = setTimeout(() => {\n            promise = null;\n            timeout = null;\n\n            ZalgoPromise.try(method).then(\n                result => { localPromise.resolve(result); },\n                err => { localPromise.reject(err); }\n            );\n        }, delay);\n\n        return localPromise;\n    };\n\n    return setFunctionName(promiseDebounced, `${ getFunctionName(method) }::promiseDebounced`);\n}\n\nexport function safeInterval(method : Function, time : number) : {| cancel : () => void |} {\n\n    let timeout;\n\n    function loop() {\n        timeout = setTimeout(() => {\n            method();\n            loop();\n        }, time);\n    }\n\n    loop();\n\n    return {\n        cancel() {\n            clearTimeout(timeout);\n        }\n    };\n}\n\nexport function isInteger(str : string) : boolean {\n    return Boolean(str.match(/^[0-9]+$/));\n}\n\nexport function isFloat(str : string) : boolean {\n    return Boolean(str.match(/^[0-9]+\\.[0-9]+$/));\n}\n\nexport function serializePrimitive(value : string | number | boolean) : string {\n    return value.toString();\n}\n\nexport function deserializePrimitive(value : string) : string | number | boolean {\n    if (value === 'true') {\n        return true;\n    } else if (value === 'false') {\n        return false;\n    } else if (isInteger(value)) {\n        return parseInt(value, 10);\n    } else if (isFloat(value)) {\n        return parseFloat(value);\n    } else {\n        return value;\n    }\n}\n\nexport function dotify(obj : Object, prefix : string = '', newobj : Object = {}) : { [string] : string } {\n    prefix = prefix ? `${ prefix }.` : prefix;\n    for (const key in obj) {\n        if (!obj.hasOwnProperty(key) || obj[key] === undefined || obj[key] === null || typeof obj[key] === 'function') {\n            continue;\n        } else if (obj[key] && Array.isArray(obj[key]) && obj[key].length && obj[key].every(val => typeof val !== 'object')) {\n            newobj[`${ prefix }${ key }[]`] = obj[key].join(',');\n        } else if (obj[key] && typeof obj[key] === 'object') {\n            newobj = dotify(obj[key], `${ prefix }${ key }`, newobj);\n        } else {\n            newobj[`${ prefix }${ key }`] = serializePrimitive(obj[key]);\n        }\n    }\n    return newobj;\n}\n\nexport function undotify(obj : { [string] : string }) : Object {\n\n    const result = {};\n\n    for (let key in obj) {\n        if (!obj.hasOwnProperty(key) || typeof obj[key] !== 'string') {\n            continue;\n        }\n\n        let value = obj[key];\n\n        if (key.match(/^.+\\[\\]$/)) {\n            key = key.slice(0, -2);\n            value = value.split(',').map(deserializePrimitive);\n        } else {\n            value = deserializePrimitive(value);\n        }\n\n        let keyResult = result;\n        const parts = key.split('.');\n        for (let i = 0; i < parts.length; i++) {\n            const part = parts[i];\n            const isLast = (i + 1 === parts.length);\n            const isIndex = !isLast && isInteger(parts[i + 1]);\n\n            if (part === 'constructor' || part === 'prototype' || part === '__proto__') {\n                throw new Error(`Disallowed key: ${ part }`);\n            }\n\n            if (isLast) {\n                // $FlowFixMe\n                keyResult[part] = value;\n            } else {\n                // $FlowFixMe\n                keyResult = keyResult[part] = keyResult[part] || (isIndex ? [] : {});\n            }\n        }\n    }\n\n    return result;\n}\n\nexport type EventEmitterType = {|\n    on : (eventName : string, handler : Function) => CancelableType,\n    once : (eventName : string, handler : Function) => CancelableType,\n    trigger : (eventName : string, ...args : $ReadOnlyArray<mixed>) => ZalgoPromise<void>,\n    triggerOnce : (eventName : string, ...args : $ReadOnlyArray<mixed>) => ZalgoPromise<void>,\n    reset : () => void\n|};\n\nexport function eventEmitter() : EventEmitterType {\n    const triggered = {};\n    let handlers = {};\n\n    const emitter = {\n\n        on(eventName : string, handler : Function) : CancelableType {\n            const handlerList = handlers[eventName] = handlers[eventName] || [];\n\n            handlerList.push(handler);\n\n            let cancelled = false;\n\n            return {\n                cancel() {\n                    if (!cancelled) {\n                        cancelled = true;\n                        handlerList.splice(handlerList.indexOf(handler), 1);\n                    }\n\n                }\n            };\n        },\n\n        once(eventName : string, handler : Function) : CancelableType {\n\n            const listener = emitter.on(eventName, () => {\n                listener.cancel();\n                handler();\n            });\n\n            return listener;\n        },\n\n        trigger(eventName : string, ...args : $ReadOnlyArray<mixed>) : ZalgoPromise<void> {\n\n            const handlerList = handlers[eventName];\n            const promises = [];\n\n            if (handlerList) {\n                for (const handler of handlerList) {\n                    promises.push(ZalgoPromise.try(() => handler(...args)));\n                }\n            }\n\n            return ZalgoPromise.all(promises).then(noop);\n        },\n\n        triggerOnce(eventName : string, ...args : $ReadOnlyArray<mixed>) : ZalgoPromise<void> {\n\n            if (triggered[eventName]) {\n                return ZalgoPromise.resolve();\n            }\n\n            triggered[eventName] = true;\n            return emitter.trigger(eventName, ...args);\n        },\n\n        reset() {\n            handlers = {};\n        }\n    };\n\n    return emitter;\n}\n\nexport function camelToDasherize(string : string) : string {\n    return string.replace(/([A-Z])/g, (g) => {\n        return `-${ g.toLowerCase() }`;\n    });\n}\n\nexport function dasherizeToCamel(string : string) : string {\n    return string.replace(/-([a-z])/g, (g) => {\n        return g[1].toUpperCase();\n    });\n}\n\nexport function capitalizeFirstLetter(string : string) : string {\n    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n\nexport function get(item : Object, path : string, def : mixed) : mixed {\n\n    if (!path) {\n        return def;\n    }\n\n    const pathParts = path.split('.');\n\n    // Loop through each section of our key path\n\n    for (let i = 0; i < pathParts.length; i++) {\n\n        // If we have an object, we can get the key\n        if (typeof item === 'object' && item !== null) {\n            item = item[pathParts[i]];\n\n        // Otherwise, we should return the default (undefined if not provided)\n        } else {\n            return def;\n        }\n    }\n\n    // If our final result is undefined, we should return the default\n\n    return item === undefined ? def : item;\n}\n\nexport function safeTimeout(method : Function, time : number) {\n\n    const interval = safeInterval(() => {\n        time -= 100;\n        if (time <= 0) {\n            interval.cancel();\n            method();\n        }\n    }, 100);\n}\n\nexport function defineLazyProp<T>(obj : Object | $ReadOnlyArray<mixed>, key : string | number, getter : () => T) {\n    if (Array.isArray(obj)) {\n        if (typeof key !== 'number') {\n            throw new TypeError(`Array key must be number`);\n        }\n    } else if (typeof obj === 'object' && obj !== null) {\n        if (typeof key !== 'string') {\n            throw new TypeError(`Object key must be string`);\n        }\n    }\n\n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable:   true,\n        get:          () => {\n            // $FlowFixMe\n            delete obj[key];\n            const value = getter();\n            // $FlowFixMe\n            obj[key] = value;\n            return value;\n        },\n        set: (value : T) => {\n            // $FlowFixMe\n            delete obj[key];\n            // $FlowFixMe\n            obj[key] = value;\n        }\n    });\n}\n\nexport function arrayFrom<T>(item : Iterable<T>) : $ReadOnlyArray<T> { // eslint-disable-line no-undef\n    // $FlowFixMe[method-unbinding]\n    return Array.prototype.slice.call(item);\n}\n\nexport function isObject(item : mixed) : boolean {\n    return (typeof item === 'object' && item !== null);\n}\n\nexport function isObjectObject(obj : mixed) : boolean {\n    // $FlowFixMe[method-unbinding]\n    return isObject(obj) && Object.prototype.toString.call(obj) === '[object Object]';\n}\n\nexport function isPlainObject(obj : mixed) : boolean {\n    if (!isObjectObject(obj)) {\n        return false;\n    }\n\n    // $FlowFixMe\n    const constructor = obj.constructor;\n\n    if (typeof constructor !== 'function') {\n        return false;\n    }\n\n    const prototype = constructor.prototype;\n\n    if (!isObjectObject(prototype)) {\n        return false;\n    }\n\n    if (!prototype.hasOwnProperty('isPrototypeOf')) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function replaceObject<T : $ReadOnlyArray<mixed> | Object> (item : T, replacer : (mixed, string | number, string) => mixed, fullKey : string = '') : T {\n\n    if (Array.isArray(item)) {\n        const length = item.length;\n        const result : Array<mixed> = [];\n\n        for (let i = 0; i < length; i++) {\n\n\n            defineLazyProp(result, i, () => {\n                const itemKey = fullKey ? `${ fullKey }.${ i }` : `${ i }`;\n                const el = item[i];\n\n                let child = replacer(el, i, itemKey);\n\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    // $FlowFixMe\n                    child = replaceObject(child, replacer, itemKey);\n                }\n\n                return child;\n            });\n        }\n\n        // $FlowFixMe\n        return result;\n    } else if (isPlainObject(item)) {\n        const result = {};\n\n        for (const key in item) {\n            if (!item.hasOwnProperty(key)) {\n                continue;\n            }\n\n            defineLazyProp(result, key, () => {\n                const itemKey = fullKey ? `${ fullKey }.${ key }` : `${ key }`;\n                // $FlowFixMe\n                const el = item[key];\n\n                let child = replacer(el, key, itemKey);\n\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    // $FlowFixMe\n                    child = replaceObject(child, replacer, itemKey);\n                }\n\n                return child;\n            });\n        }\n\n        // $FlowFixMe\n        return result;\n    } else {\n        throw new Error(`Pass an object or array`);\n    }\n}\n\n\nexport function copyProp(source : Object, target : Object, name : string, def : mixed) {\n    if (source.hasOwnProperty(name)) {\n        const descriptor = Object.getOwnPropertyDescriptor(source, name);\n        // $FlowFixMe\n        Object.defineProperty(target, name, descriptor);\n\n    } else {\n        target[name] = def;\n    }\n}\n\ntype RegexResultType = {|\n    text : string,\n    groups : $ReadOnlyArray<string>,\n    start : number,\n    end : number,\n    length : number,\n    replace : (text : string) => string\n|};\n\nexport function regex(pattern : string | RegExp, string : string, start : number = 0) : ?RegexResultType {\n\n    if (typeof pattern === 'string') {\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        pattern = new RegExp(pattern);\n    }\n\n    const result = string.slice(start).match(pattern);\n\n    if (!result) {\n        return;\n    }\n\n    // $FlowFixMe\n    const index : number = result.index;\n    const regmatch = result[0];\n\n    return {\n        text:   regmatch,\n        groups: result.slice(1),\n        start:  start + index,\n        end:    start + index + regmatch.length,\n        length: regmatch.length,\n\n        replace(text : string) : string {\n\n            if (!regmatch) {\n                return '';\n            }\n\n            return `${ regmatch.slice(0, start + index) }${ text }${ regmatch.slice(index + regmatch.length) }`;\n        }\n    };\n}\n\nexport function regexAll(pattern : string | RegExp, string : string) : $ReadOnlyArray<RegexResultType> {\n\n    const matches = [];\n    let start = 0;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const regmatch = regex(pattern, string, start);\n\n        if (!regmatch) {\n            break;\n        }\n\n        matches.push(regmatch);\n        start = match.end;\n    }\n\n    return matches;\n}\n\nexport function isDefined(value : ?mixed) : boolean {\n    return value !== null && value !== undefined;\n}\n\nexport function cycle(method : Function) : ZalgoPromise<void> {\n    return ZalgoPromise.try(method).then(() => cycle(method));\n}\n\nexport function debounce<T>(method : (...args : $ReadOnlyArray<mixed>) => T, time : number = 100) : (...args : $ReadOnlyArray<mixed>) => void {\n\n    let timeout;\n\n    const debounceWrapper = function() {\n        clearTimeout(timeout);\n\n        timeout = setTimeout(() => {\n            return method.apply(this, arguments);\n        }, time);\n    };\n\n    return setFunctionName(debounceWrapper, `${ getFunctionName(method) }::debounced`);\n}\n\nexport function isRegex(item : mixed) : boolean {\n    // $FlowFixMe[method-unbinding]\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\n\ntype FunctionProxy<T : Function> = (method : T) => T;\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport const weakMapMemoize : FunctionProxy<*> = <R : mixed>(method : (arg : any) => R) : ((...args : $ReadOnlyArray<any>) => R) => {\n\n    const weakmap = new WeakMap();\n\n    // eslint-disable-next-line flowtype/no-weak-types\n    return function weakmapMemoized(arg : any) : R {\n        return weakmap.getOrSet(arg, () => method.call(this, arg));\n    };\n};\n\ntype FunctionPromiseProxy<R : mixed, T : (...args : $ReadOnlyArray<mixed>) => ZalgoPromise<R>> = (T) => T;\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport const weakMapMemoizePromise : FunctionPromiseProxy<*, *> = <R : mixed>(method : (arg : any) => ZalgoPromise<R>) : ((...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) => {\n\n    const weakmap = new WeakMap();\n\n    // eslint-disable-next-line flowtype/no-weak-types\n    return function weakmapMemoizedPromise(arg : any) : ZalgoPromise<R> {\n        return weakmap.getOrSet(arg, () =>\n            method.call(this, arg).finally(() => {\n                weakmap.delete(arg);\n            }));\n    };\n};\n\nexport function getOrSet<O : Object, T : mixed>(obj : O, key : string, getter : () => T) : T {\n    if (obj.hasOwnProperty(key)) {\n        return obj[key];\n    }\n\n    const val = getter();\n    obj[key] = val;\n    return val;\n}\n\nexport type CleanupType = {|\n    set : <T : mixed>(string, T) => T, // eslint-disable-line no-undef\n    register : (Function) => {| cancel : () => void |},\n    all : (err? : mixed) => ZalgoPromise<void>\n|};\n\nexport function cleanup(obj : Object) : CleanupType {\n\n    const tasks = [];\n    let cleaned = false;\n    let cleanErr;\n\n    const cleaner = {\n        set<T : mixed>(name : string, item : T) : T {\n            if (!cleaned) {\n                obj[name] = item;\n                cleaner.register(() => {\n                    delete obj[name];\n                });\n            }\n            return item;\n        },\n\n        register(method : Function) : {| cancel : () => void |} {\n            const task = once(() => method(cleanErr));\n\n            if (cleaned) {\n                method(cleanErr);\n            } else {\n                tasks.push(task);\n            }\n\n            return {\n                cancel: () => {\n                    const index = tasks.indexOf(task);\n                    if (index !== -1) {\n                        tasks.splice(index, 1);\n                    }\n                }\n            };\n        },\n\n        all(err? : mixed) : ZalgoPromise<void> {\n            cleanErr = err;\n\n            const results = [];\n            cleaned = true;\n\n            while (tasks.length) {\n                const task = tasks.shift();\n                results.push(task());\n            }\n\n            return ZalgoPromise.all(results).then(noop);\n        }\n    };\n\n    return cleaner;\n}\n\nexport function tryCatch<T>(fn : () => T) : {| result : T, error : void |} | {| result : void, error : mixed |} {\n    let result;\n    let error;\n\n    try {\n        result = fn();\n    } catch (err) {\n        error = err;\n    }\n\n    // $FlowFixMe\n    return { result, error };\n}\n\n// eslint-disable-next-line flowtype/no-mutable-array\nexport function removeFromArray<X, T : Array<X>>(arr : T, item : X) {\n    const index = arr.indexOf(item);\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n}\n\nexport function assertExists<T>(name : string, thing : void | null | T) : T {\n    if (thing === null || typeof thing === 'undefined') {\n        throw new Error(`Expected ${ name } to be present`);\n    }\n\n    return thing;\n}\n\nexport function unique(arr : $ReadOnlyArray<string>) : $ReadOnlyArray<string> {\n    const result = {};\n    for (const item of arr) {\n        result[item] = true;\n    }\n    return Object.keys(result);\n}\n\nexport const constHas = <X : (string | boolean | number), T : { [string] : X }>(constant : T, value : X) : boolean => {\n    return memoizedValues(constant).indexOf(value) !== -1;\n};\n\nexport function dedupeErrors<T>(handler : (mixed) => T) : (mixed) => (T | void) {\n    const seenErrors = [];\n    const seenStringifiedErrors = {};\n\n    return (err) => {\n        if (seenErrors.indexOf(err) !== -1) {\n            return;\n        }\n\n        seenErrors.push(err);\n\n        const stringifiedError = stringifyError(err);\n        if (seenStringifiedErrors[stringifiedError]) {\n            return;\n        }\n\n        seenStringifiedErrors[stringifiedError] = true;\n        return handler(err);\n    };\n}\n\nexport class ExtendableError extends Error {\n    constructor(message : string) {\n        super(message);\n        // eslint-disable-next-line unicorn/custom-error-definition\n        this.name = this.constructor.name;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            this.stack = (new Error(message)).stack;\n        }\n    }\n}\n","/* @flow */\n\nexport function hasNativeWeakMap() : boolean {\n\n    if (typeof WeakMap === 'undefined') {\n        return false;\n    }\n\n    if (typeof Object.freeze === 'undefined') {\n        return false;\n    }\n\n    try {\n\n        const testWeakMap = new WeakMap();\n        const testKey = {};\n        const testValue = '__testvalue__';\n\n        Object.freeze(testKey);\n\n        testWeakMap.set(testKey, testValue);\n\n        if (testWeakMap.get(testKey) === testValue) {\n            return true;\n        }\n\n        return false;\n\n    } catch (err) {\n\n        return false;\n    }\n}\n","/* @flow */\n/* eslint max-lines: off */\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { linkFrameWindow, isWindowClosed, assertSameDomain,\n    type SameDomainWindowType, type CrossDomainWindowType } from '@krakenjs/cross-domain-utils/src';\nimport { WeakMap } from '@krakenjs/cross-domain-safe-weakmap/src';\n\nimport { isElement, inlineMemoize, memoize, noop, stringify, capitalizeFirstLetter,\n    once, extend, safeInterval, uniqueID, arrayFrom, ExtendableError, strHashStr } from './util';\nimport { isDevice } from './device';\nimport { KEY_CODES, ATTRIBUTES, UID_HASH_LENGTH } from './constants';\nimport type { CancelableType } from './types';\n\ntype ElementRefType = string | HTMLElement;\n\nexport function getBody() : HTMLBodyElement {\n    // eslint-disable-next-line compat/compat\n    const body = document.body;\n\n    if (!body) {\n        throw new Error(`Body element not found`);\n    }\n\n    return body;\n}\n\nexport function isDocumentReady() : boolean {\n    // eslint-disable-next-line compat/compat\n    return Boolean(document.body) && (document.readyState === 'complete');\n}\n\nexport function isDocumentInteractive() : boolean {\n    // eslint-disable-next-line compat/compat\n    return Boolean(document.body) && (document.readyState === 'interactive');\n}\n\nexport function urlEncode(str : string) : string {\n    return encodeURIComponent(str);\n}\n\nexport function waitForWindowReady() : ZalgoPromise<void> {\n    return inlineMemoize(waitForWindowReady, () : ZalgoPromise<void> => {\n        return new ZalgoPromise(resolve => {\n            if (isDocumentReady()) {\n                resolve();\n            }\n\n            window.addEventListener('load', () => resolve());\n        });\n    });\n}\n\ntype WaitForDocumentReady = () => ZalgoPromise<void>;\n\nexport const waitForDocumentReady : WaitForDocumentReady = memoize(() => {\n    return new ZalgoPromise(resolve => {\n\n        if (isDocumentReady() || isDocumentInteractive()) {\n            return resolve();\n        }\n\n        const interval = setInterval(() => {\n            if (isDocumentReady() || isDocumentInteractive()) {\n                clearInterval(interval);\n                return resolve();\n            }\n        }, 10);\n    });\n});\n\nexport function waitForDocumentBody() : ZalgoPromise<HTMLBodyElement> {\n    return ZalgoPromise.try(() => {\n        if (document.body) {\n            return document.body;\n        }\n\n        return waitForDocumentReady().then(() => {\n            if (document.body) {\n                return document.body;\n            }\n\n            throw new Error('Document ready but document.body not present');\n        });\n    });\n}\n\nexport function parseQuery(queryString : string) : Object {\n    return inlineMemoize(parseQuery, () : Object => {\n        const params = {};\n\n        if (!queryString) {\n            return params;\n        }\n\n        if (queryString.indexOf('=') === -1) {\n            return params;\n        }\n\n        for (let pair of queryString.split('&')) {\n            pair = pair.split('=');\n\n            if (pair[0] && pair[1]) {\n                params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n            }\n        }\n\n        return params;\n    }, [ queryString ]);\n}\n\n\nexport function getQueryParam(name : string) : string {\n    return parseQuery(window.location.search.slice(1))[name];\n}\n\nexport function urlWillRedirectPage(url : string) : boolean {\n\n    if (url.indexOf('#') === -1) {\n        return true;\n    }\n\n    if (url.indexOf('#') === 0) {\n        return false;\n    }\n\n    if (url.split('#')[0] === window.location.href.split('#')[0]) {\n        return false;\n    }\n\n    return true;\n}\n\nexport type Query = {\n    [ string ] : boolean | string\n};\n\nexport function formatQuery(obj : Query = {}) : string {\n\n    return Object.keys(obj).filter(key => {\n        return typeof obj[key] === 'string' || typeof obj[key] === 'boolean';\n    }).map(key => {\n        const val = obj[key];\n\n        if (typeof val !== 'string' && typeof val !== 'boolean') {\n            throw new TypeError(`Invalid type for query`);\n        }\n\n        return `${ urlEncode(key) }=${ urlEncode(val.toString()) }`;\n    }).join('&');\n}\n\nexport function extendQuery(originalQuery : string, props : Query = {}) : string {\n\n    if (!props || !Object.keys(props).length) {\n        return originalQuery;\n    }\n\n    return formatQuery({\n        ...parseQuery(originalQuery),\n        ...props\n    });\n}\n\nexport function extendUrl(url : string, options : {| query? : Query, hash? : Query |}) : string {\n\n    const query = options.query || {};\n    const hash = options.hash || {};\n\n    let originalUrl;\n    let originalQuery;\n    let originalHash;\n\n    [ originalUrl, originalHash ] = url.split('#');\n    [ originalUrl, originalQuery ] = originalUrl.split('?');\n\n    const queryString = extendQuery(originalQuery, query);\n    const hashString = extendQuery(originalHash, hash);\n\n    if (queryString) {\n        originalUrl = `${ originalUrl }?${ queryString }`;\n    }\n\n    if (hashString) {\n        originalUrl = `${ originalUrl }#${ hashString }`;\n    }\n\n    return originalUrl;\n}\n\nexport function redirect(url : string, win : CrossDomainWindowType = window) : ZalgoPromise<void> {\n    return new ZalgoPromise(resolve => {\n        win.location = url;\n        if (!urlWillRedirectPage(url)) {\n            resolve();\n        }\n    });\n}\n\nexport function hasMetaViewPort() : boolean {\n    const meta = document.querySelector('meta[name=viewport]');\n\n    if (isDevice() && window.screen.width < 660 && !meta) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function isElementVisible(el : HTMLElement) : boolean {\n    return Boolean(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n}\n\nexport function getPerformance() : ?Performance {\n    return inlineMemoize(getPerformance, () : ?Performance => {\n        const performance = window.performance;\n\n        if (\n            performance &&\n            performance.now &&\n            performance.timing &&\n            performance.timing.connectEnd &&\n            performance.timing.navigationStart &&\n            (Math.abs(performance.now() - Date.now()) > 1000) &&\n            (performance.now() - (performance.timing.connectEnd - performance.timing.navigationStart)) > 0\n        ) {\n            return performance;\n        }\n    });\n}\n\nexport function enablePerformance() : boolean {\n    return Boolean(getPerformance());\n}\n\nexport function getPageRenderTime() : ZalgoPromise<?number> {\n    return waitForDocumentReady().then(() => {\n        const performance = getPerformance();\n\n        if (!performance) {\n            return;\n        }\n\n        const timing = performance.timing;\n\n        if (timing.connectEnd && timing.domInteractive) {\n            return timing.domInteractive - timing.connectEnd;\n        }\n    });\n}\n\nexport function htmlEncode(html : string = '') : string {\n    return html.toString()\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#39;')\n        .replace(/\\//g, '&#x2F;');\n}\n\nexport function isBrowser() : boolean {\n    return (typeof window !== 'undefined') && window.location !== undefined;\n}\n\nexport function querySelectorAll(selector : string, doc : HTMLElement = window.document) : $ReadOnlyArray<HTMLElement> {\n    // $FlowFixMe[method-unbinding]\n    return Array.prototype.slice.call(doc.querySelectorAll(selector));\n}\n\nexport function onClick(element : HTMLElement, handler : (Event) => void) {\n    element.addEventListener('touchstart', noop);\n    element.addEventListener('click', handler);\n    element.addEventListener('keypress', (event : Event) => {\n        // $FlowFixMe\n        if (event.keyCode === KEY_CODES.ENTER || event.keyCode === KEY_CODES.SPACE) {\n            return handler(event);\n        }\n    });\n}\n\nexport function getScript({ host = window.location.host, path, reverse = false } : {| host? : string, path : string, reverse? : boolean |}) : ?HTMLScriptElement {\n    return inlineMemoize(getScript, () : ?HTMLScriptElement => {\n\n        const url = `${ host }${ path }`;\n        // $FlowFixMe[method-unbinding]\n        const scripts = Array.prototype.slice.call(document.getElementsByTagName('script'));\n\n        if (reverse) {\n            scripts.reverse();\n        }\n\n        for (const script of scripts) {\n            if (!script.src) {\n                continue;\n            }\n\n            const src = script.src.replace(/^https?:\\/\\//, '').split('?')[0];\n\n            if (src === url) {\n                return script;\n            }\n        }\n    }, [ path ]);\n}\n\nexport function isLocalStorageEnabled() : boolean {\n    return inlineMemoize(isLocalStorageEnabled, () => {\n        try {\n            if (typeof window === 'undefined') {\n                return false;\n            }\n\n            if (window.localStorage) {\n                const value = Math.random().toString();\n                window.localStorage.setItem('__test__localStorage__', value);\n                const result = window.localStorage.getItem('__test__localStorage__');\n                window.localStorage.removeItem('__test__localStorage__');\n                if (value === result) {\n                    return true;\n                }\n            }\n        } catch (err) {\n            // pass\n        }\n        return false;\n    });\n}\n\nexport function getBrowserLocales() : $ReadOnlyArray<{| country? : string, lang : string |}> {\n    const nav = window.navigator;\n\n    const locales = nav.languages\n        ? [ ...nav.languages ]\n        : [];\n\n    if (nav.language) {\n        locales.push(nav.language);\n    }\n\n    if (nav.userLanguage) {\n        locales.push(nav.userLanguage);\n    }\n\n    return locales.map(locale => {\n\n        if (locale && locale.match(/^[a-z]{2}[-_][A-Z]{2}$/)) {\n            const [ lang, country ] = locale.split(/[-_]/);\n            return { country, lang };\n        }\n\n        if (locale && locale.match(/^[a-z]{2}$/)) {\n            return { lang: locale };\n        }\n\n        return null;\n\n    }).filter(Boolean);\n}\n\n\nexport function appendChild(container : HTMLElement, child : HTMLElement | Text) {\n    container.appendChild(child);\n}\n\nexport function getElementSafe(id : ElementRefType, doc : Document | HTMLElement = document) : ?HTMLElement {\n\n    if (isElement(id)) {\n        // $FlowFixMe\n        return id;\n    }\n\n    if (typeof id === 'string') {\n        return doc.querySelector(id);\n    }\n}\n\nexport function getElement(id : ElementRefType, doc : Document | HTMLElement = document) : HTMLElement {\n\n    const element = getElementSafe(id, doc);\n\n    if (element) {\n        return element;\n    }\n\n    throw new Error(`Can not find element: ${ stringify(id) }`);\n}\n\nexport function elementReady(id : ElementRefType) : ZalgoPromise<HTMLElement> {\n    return new ZalgoPromise((resolve, reject) => {\n\n        const name = stringify(id);\n        let el = getElementSafe(id);\n\n        if (el) {\n            return resolve(el);\n        }\n\n        if (isDocumentReady()) {\n            return reject(new Error(`Document is ready and element ${ name } does not exist`));\n        }\n\n        const interval = setInterval(() => {\n\n            el = getElementSafe(id);\n\n            if (el) {\n                resolve(el);\n                clearInterval(interval);\n                return;\n            }\n\n            if (isDocumentReady()) {\n                clearInterval(interval);\n                return reject(new Error(`Document is ready and element ${ name } does not exist`));\n            }\n        }, 10);\n    });\n}\n\n// eslint-disable-next-line unicorn/custom-error-definition\nexport class PopupOpenError extends ExtendableError {}\n\ntype PopupOptions = {|\n    name? : string,\n    width? : number,\n    height? : number,\n    top? : number,\n    left? : number,\n    status? : 0 | 1,\n    resizable? : 0 | 1,\n    toolbar? : 0 | 1,\n    menubar? : 0 | 1,\n    scrollbars? : 0 | 1,\n    closeOnUnload? : 0 | 1\n|};\n\nexport function popup(url : string, options? : PopupOptions) : CrossDomainWindowType {\n\n    // $FlowFixMe\n    options = options || {};\n\n    const { closeOnUnload = 1, name = '', width, height } = options;\n\n    let top = 0;\n    let left = 0;\n\n    if (width) {\n        if (window.outerWidth) {\n            left = Math.round((window.outerWidth - width) / 2) + window.screenX;\n        } else if (window.screen.width) {\n            left = Math.round((window.screen.width - width) / 2);\n        }\n    }\n\n    if (height) {\n        if (window.outerHeight) {\n            top = Math.round((window.outerHeight - height) / 2) + window.screenY;\n        } else if (window.screen.height) {\n            top = Math.round((window.screen.height - height) / 2);\n        }\n    }\n\n    delete options.closeOnUnload;\n    delete options.name;\n\n    if (width && height) {\n        // $FlowFixMe\n        options = {\n            top,\n            left,\n            width,\n            height,\n            status:     1,\n            toolbar:    0,\n            menubar:    0,\n            resizable:  1,\n            scrollbars: 1,\n            ...options\n        };\n    }\n\n    // eslint-disable-next-line array-callback-return\n    const params = Object.keys(options).map(key => {\n        // $FlowFixMe\n        if (options[key] !== null && options[key] !== undefined) {\n            return `${ key }=${ stringify(options[key]) }`;\n        }\n    }).filter(Boolean).join(',');\n\n    let win;\n\n    try {\n        win = window.open(url, name, params);\n    } catch (err) {\n        throw new PopupOpenError(`Can not open popup window - ${ err.stack || err.message }`);\n    }\n\n    if (isWindowClosed(win)) {\n        const err = new PopupOpenError(`Can not open popup window - blocked`);\n        throw err;\n    }\n\n    if (closeOnUnload) {\n        window.addEventListener('unload', () => win.close());\n    }\n\n    return win;\n}\n\n\nexport function writeToWindow(win : SameDomainWindowType, html : string) {\n    try {\n        win.document.open();\n        win.document.write(html);\n        win.document.close();\n    } catch (err) {\n        try {\n            win.location = `javascript: document.open(); document.write(${ JSON.stringify(html) }); document.close();`;\n        } catch (err2) {\n            // pass\n        }\n    }\n}\n\nexport function writeElementToWindow(win : SameDomainWindowType, el : HTMLElement) {\n\n    const tag = el.tagName.toLowerCase();\n\n    if (tag !== 'html') {\n        throw new Error(`Expected element to be html, got ${ tag }`);\n    }\n\n    const documentElement = win.document.documentElement;\n\n    for (const child of arrayFrom(documentElement.children)) {\n        documentElement.removeChild(child);\n    }\n\n    for (const child of arrayFrom(el.children)) {\n        documentElement.appendChild(child);\n    }\n}\n\nexport function setStyle(el : HTMLElement, styleText : string, doc : Document = window.document) {\n    // $FlowFixMe\n    if (el.styleSheet) {\n        // $FlowFixMe\n        el.styleSheet.cssText = styleText;\n    } else {\n        el.appendChild(doc.createTextNode(styleText));\n    }\n}\n\nexport type ElementOptionsType = {|\n    style? : { [ string ] : string },\n    id? : string,\n    class? : ?$ReadOnlyArray<string>,\n    attributes? : { [ string ] : string },\n    styleSheet? : ?string,\n    html? : ?string\n|};\n\nlet awaitFrameLoadPromises : WeakMap<HTMLIFrameElement, ZalgoPromise<HTMLIFrameElement>>;\n\nexport function awaitFrameLoad(frame : HTMLIFrameElement) : ZalgoPromise<HTMLIFrameElement> {\n    awaitFrameLoadPromises = awaitFrameLoadPromises || new WeakMap();\n\n    if (awaitFrameLoadPromises.has(frame)) {\n        const promise = awaitFrameLoadPromises.get(frame);\n        if (promise) {\n            return promise;\n        }\n    }\n\n    const promise = new ZalgoPromise((resolve, reject) => {\n        frame.addEventListener('load', () => {\n            linkFrameWindow(frame);\n            resolve(frame);\n        });\n\n        frame.addEventListener('error', (err : Event) => {\n            if (frame.contentWindow) {\n                resolve(frame);\n            } else {\n                reject(err);\n            }\n        });\n    });\n\n    awaitFrameLoadPromises.set(frame, promise);\n\n    return promise;\n}\n\nexport function awaitFrameWindow(frame : HTMLIFrameElement) : ZalgoPromise<CrossDomainWindowType> {\n    return awaitFrameLoad(frame).then(loadedFrame => {\n\n        if (!loadedFrame.contentWindow) {\n            throw new Error(`Could not find window in iframe`);\n        }\n\n        return loadedFrame.contentWindow;\n    });\n}\n\nconst getDefaultCreateElementOptions = () : ElementOptionsType => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function createElement(tag : string = 'div', options : ElementOptionsType = getDefaultCreateElementOptions(), container : ?HTMLElement) : HTMLElement {\n\n    tag = tag.toLowerCase();\n    const element = document.createElement(tag);\n\n    if (options.style) {\n        extend(element.style, options.style);\n    }\n\n    if (options.class) {\n        element.className = options.class.join(' ');\n    }\n\n    if (options.id) {\n        element.setAttribute('id', options.id);\n    }\n\n    if (options.attributes) {\n        for (const key of Object.keys(options.attributes)) {\n            element.setAttribute(key, options.attributes[key]);\n        }\n    }\n\n    if (options.styleSheet) {\n        setStyle(element, options.styleSheet);\n    }\n\n    if (container) {\n        appendChild(container, element);\n    }\n\n    if (options.html) {\n        if (tag === 'iframe') {\n            // $FlowFixMe\n            if (!container || !element.contentWindow) {\n                throw new Error(`Iframe html can not be written unless container provided and iframe in DOM`);\n            }\n\n            // $FlowFixMe\n            writeToWindow(element.contentWindow, options.html);\n\n        } else {\n            element.innerHTML = options.html;\n        }\n    }\n\n    return element;\n}\n\ntype StringMap = {|\n    [ string ] : string\n|};\n\nexport type IframeElementOptionsType = {|\n    style? : StringMap,\n    class? : ?$ReadOnlyArray<string>,\n    attributes? : StringMap,\n    styleSheet? : ?string,\n    html? : ?string,\n    url? : ?string\n|};\n\nconst getDefaultIframeOptions = () : IframeElementOptionsType => {\n    // $FlowFixMe\n    return {};\n};\n\nconst getDefaultStringMap = () : StringMap => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function iframe(options : IframeElementOptionsType = getDefaultIframeOptions(), container : ?HTMLElement) : HTMLIFrameElement {\n\n    const attributes = options.attributes || getDefaultStringMap();\n    const style = options.style || getDefaultStringMap();\n\n    // $FlowFixMe\n    const newAttributes = {\n        allowTransparency: 'true',\n        ...attributes\n    };\n\n    // $FlowFixMe\n    const newStyle = {\n        backgroundColor: 'transparent',\n        border:          'none',\n        ...style\n    };\n\n    const frame = createElement('iframe', {\n        attributes: newAttributes,\n        style:      newStyle,\n        html:       options.html,\n        class:      options.class\n    });\n\n    const isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n\n    if (!frame.hasAttribute('id')) {\n        frame.setAttribute('id', uniqueID());\n    }\n\n    // $FlowFixMe\n    awaitFrameLoad(frame);\n\n    if (container) {\n        const el = getElement(container);\n        el.appendChild(frame);\n    }\n\n    if (options.url || isIE) {\n        frame.setAttribute('src', options.url || 'about:blank');\n    }\n\n    // $FlowFixMe\n    return frame;\n}\n\nexport function addEventListener(obj : HTMLElement, event : string, handler : (event : Event) => void) : CancelableType {\n    obj.addEventListener(event, handler);\n    return {\n        cancel() {\n            obj.removeEventListener(event, handler);\n        }\n    };\n}\n\nexport function bindEvents(element : HTMLElement, eventNames : $ReadOnlyArray<string>, handler : (event : Event) => void) : CancelableType {\n\n    handler = once(handler);\n\n    for (const eventName of eventNames) {\n        element.addEventListener(eventName, handler);\n    }\n\n    return {\n        cancel: once(() => {\n            for (const eventName of eventNames) {\n                element.removeEventListener(eventName, handler);\n            }\n        })\n    };\n}\n\nconst VENDOR_PREFIXES = [ 'webkit', 'moz', 'ms', 'o' ];\n\nexport function setVendorCSS(element : HTMLElement, name : string, value : string) {\n\n    // $FlowFixMe\n    element.style[name] = value;\n\n    const capitalizedName = capitalizeFirstLetter(name);\n\n    for (const prefix of VENDOR_PREFIXES) {\n        // $FlowFixMe\n        element.style[`${ prefix }${ capitalizedName }`] = value;\n    }\n}\n\nconst ANIMATION_START_EVENTS = [ 'animationstart', 'webkitAnimationStart', 'oAnimationStart', 'MSAnimationStart' ];\nconst ANIMATION_END_EVENTS   = [ 'animationend', 'webkitAnimationEnd', 'oAnimationEnd', 'MSAnimationEnd' ];\n\nexport function animate(element : ElementRefType, name : string, clean : (Function) => void, timeout : number = 1000) : ZalgoPromise<void> {\n    return new ZalgoPromise((resolve, reject) => {\n\n        const el = getElement(element);\n\n        if (!el) {\n            return resolve();\n        }\n\n        let hasStarted = false;\n\n        // eslint-disable-next-line prefer-const\n        let startTimeout;\n        let endTimeout;\n        // eslint-disable-next-line prefer-const\n        let startEvent;\n        // eslint-disable-next-line prefer-const\n        let endEvent;\n\n        function cleanUp() {\n            clearTimeout(startTimeout);\n            clearTimeout(endTimeout);\n            startEvent.cancel();\n            endEvent.cancel();\n        }\n\n        startEvent = bindEvents(el, ANIMATION_START_EVENTS, event => {\n\n            // $FlowFixMe\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n\n            clearTimeout(startTimeout);\n\n            event.stopPropagation();\n\n            startEvent.cancel();\n            hasStarted = true;\n\n            endTimeout = setTimeout(() => {\n                cleanUp();\n                resolve();\n            }, timeout);\n        });\n\n        endEvent = bindEvents(el, ANIMATION_END_EVENTS, event => {\n\n            // $FlowFixMe\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n\n            cleanUp();\n\n            // $FlowFixMe\n            if (typeof event.animationName === 'string' && event.animationName !== name) {\n                return reject(`Expected animation name to be ${ name }, found ${ event.animationName }`);\n            }\n\n            return resolve();\n        });\n\n        setVendorCSS(el, 'animationName', name);\n\n        startTimeout = setTimeout(() => {\n            if (!hasStarted) {\n                cleanUp();\n                return resolve();\n            }\n        }, 200);\n\n        if (clean) {\n            clean(cleanUp);\n        }\n    });\n}\n\nexport function makeElementVisible(element : HTMLElement) {\n    element.style.setProperty('visibility', '');\n}\n\nexport function makeElementInvisible(element : HTMLElement) {\n    element.style.setProperty('visibility', 'hidden', 'important');\n}\n\n\nexport function showElement(element : HTMLElement) {\n    element.style.setProperty('display', '');\n}\n\nexport function hideElement(element : HTMLElement) {\n    element.style.setProperty('display', 'none', 'important');\n}\n\nexport function destroyElement(element : HTMLElement) {\n    if (element && element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n}\n\nexport function showAndAnimate(element : HTMLElement, name : string, clean : (Function) => void) : ZalgoPromise<void> {\n    const animation = animate(element, name, clean);\n    showElement(element);\n    return animation;\n}\n\nexport function animateAndHide(element : HTMLElement, name : string, clean : (Function) => void) : ZalgoPromise<void> {\n    return animate(element, name, clean).then(() => {\n        hideElement(element);\n    });\n}\n\nexport function addClass(element : HTMLElement, name : string) {\n    element.classList.add(name);\n}\n\nexport function removeClass(element : HTMLElement, name : string) {\n    element.classList.remove(name);\n}\n\nexport function isElementClosed(el : HTMLElement) : boolean {\n    if (!el || !el.parentNode || !el.ownerDocument || !el.ownerDocument.documentElement || !el.ownerDocument.documentElement.contains(el)) {\n        return true;\n    }\n    return false;\n}\n\nexport function watchElementForClose(element : HTMLElement, handler : () => mixed) : CancelableType {\n    handler = once(handler);\n\n    let cancelled = false;\n    const mutationObservers = [];\n    // eslint-disable-next-line prefer-const\n    let interval;\n    // eslint-disable-next-line prefer-const\n    let sacrificialFrame;\n    let sacrificialFrameWin;\n\n    const cancel = () => {\n        cancelled = true;\n        for (const observer of mutationObservers) {\n            observer.disconnect();\n        }\n        if (interval) {\n            interval.cancel();\n        }\n        if (sacrificialFrameWin) {\n            // eslint-disable-next-line no-use-before-define\n            sacrificialFrameWin.removeEventListener('unload', elementClosed);\n        }\n        if (sacrificialFrame) {\n            destroyElement(sacrificialFrame);\n        }\n    };\n\n    const elementClosed = () => {\n        if (!cancelled) {\n            handler();\n            cancel();\n        }\n    };\n\n    if (isElementClosed(element)) {\n        elementClosed();\n        return { cancel };\n    }\n\n    // Strategy 1: Mutation observer\n\n    if (window.MutationObserver) {\n        let mutationElement = element.parentElement;\n        while (mutationElement) {\n            const mutationObserver = new window.MutationObserver(() => {\n                if (isElementClosed(element)) {\n                    elementClosed();\n                }\n            });\n\n            mutationObserver.observe(mutationElement, { childList: true });\n            mutationObservers.push(mutationObserver);\n            mutationElement = mutationElement.parentElement;\n        }\n    }\n\n    // Strategy 2: Sacrificial iframe\n\n    sacrificialFrame = document.createElement('iframe');\n    sacrificialFrame.setAttribute('name', `__detect_close_${ uniqueID() }__`);\n    sacrificialFrame.style.display = 'none';\n    awaitFrameWindow(sacrificialFrame).then(frameWin => {\n        sacrificialFrameWin = assertSameDomain(frameWin);\n        sacrificialFrameWin.addEventListener('unload', elementClosed);\n    });\n    element.appendChild(sacrificialFrame);\n\n    // Strategy 3: Poller\n\n    const check = () => {\n        if (isElementClosed(element)) {\n            elementClosed();\n        }\n    };\n    interval = safeInterval(check, 1000);\n\n    return { cancel };\n}\n\nexport function fixScripts(el : HTMLElement, doc : Document = window.document) {\n    for (const script of querySelectorAll('script', el)) {\n        const parentNode = script.parentNode;\n\n        if (!parentNode) {\n            continue;\n        }\n\n        const newScript = doc.createElement('script');\n        newScript.text = script.textContent;\n        parentNode.replaceChild(newScript, script);\n    }\n}\n\ntype OnResizeOptions = {|\n    width? : boolean,\n    height? : boolean,\n    interval? : number,\n    win? : SameDomainWindowType\n|};\n\nexport function onResize(el : HTMLElement, handler : ({| width : number, height : number |}) => void, { width = true, height = true, interval = 100, win = window } : OnResizeOptions = {}) : {| cancel : () => void |} {\n    let currentWidth = el.offsetWidth;\n    let currentHeight = el.offsetHeight;\n    let canceled = false;\n\n    handler({ width: currentWidth, height: currentHeight });\n\n    const check = () => {\n        if (canceled || !isElementVisible(el)) {\n            return;\n        }\n\n        const newWidth = el.offsetWidth;\n        const newHeight = el.offsetHeight;\n\n        if ((width && newWidth !== currentWidth) || (height && newHeight !== currentHeight)) {\n            handler({ width: newWidth, height: newHeight });\n        }\n\n        currentWidth = newWidth;\n        currentHeight = newHeight;\n    };\n\n    let observer;\n    let timeout;\n\n    win.addEventListener('resize', check);\n\n    if (typeof win.ResizeObserver !== 'undefined') {\n        observer = new win.ResizeObserver(check);\n        observer.observe(el);\n        timeout = safeInterval(check, interval * 10);\n\n    } else if (typeof win.MutationObserver !== 'undefined') {\n        observer = new win.MutationObserver(check);\n        observer.observe(el, {\n            attributes:    true,\n            childList:     true,\n            subtree:       true,\n            characterData: false\n        });\n        timeout = safeInterval(check, interval * 10);\n    } else {\n        timeout = safeInterval(check, interval);\n    }\n\n    return {\n        cancel: () => {\n            canceled = true;\n            observer.disconnect();\n            window.removeEventListener('resize', check);\n            timeout.cancel();\n        }\n    };\n}\n\nexport function getResourceLoadTime(url : string) : ?number {\n    const performance = getPerformance();\n\n    if (!performance) {\n        return;\n    }\n\n    // $FlowFixMe[method-unbinding]\n    if (typeof performance.getEntries !== 'function') {\n        return;\n    }\n\n    const entries = performance.getEntries();\n\n    for (let i = 0; i < entries.length; i++) {\n        const entry = entries[i];\n\n        if (entry && entry.name && entry.name.indexOf(url) === 0 && typeof entry.duration === 'number') {\n            return Math.floor(entry.duration);\n        }\n    }\n}\n\nexport function isShadowElement(element : Node) : boolean {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n\n    return element.toString() === '[object ShadowRoot]';\n}\n\nexport function getShadowRoot(element : Node) : ?Node {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n\n    if (isShadowElement(element)) {\n        return element;\n    }\n}\n\nexport function getShadowHost(element : Node) : ?HTMLElement {\n    const shadowRoot = getShadowRoot(element);\n\n    // $FlowFixMe\n    if (shadowRoot && shadowRoot.host) {\n        // $FlowFixMe\n        return shadowRoot.host;\n    }\n}\n\n\nexport function insertShadowSlot(element : HTMLElement) : HTMLElement {\n    const shadowHost = getShadowHost(element);\n\n    if (!shadowHost) {\n        throw new Error(`Element is not in shadow dom`);\n    }\n\n    const slotName = `shadow-slot-${ uniqueID() }`;\n    const slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n    element.appendChild(slot);\n\n    const slotProvider = document.createElement('div');\n    slotProvider.setAttribute('slot', slotName);\n    shadowHost.appendChild(slotProvider);\n\n    if (isShadowElement(shadowHost)) {\n        return insertShadowSlot(slotProvider);\n    }\n\n    return slotProvider;\n}\n\nexport function preventClickFocus(el : HTMLElement) {\n    const onFocus = (event : Event) => {\n        el.removeEventListener('focus', onFocus);\n        event.preventDefault();\n        el.blur();\n        return false;\n    };\n\n    el.addEventListener('mousedown', () => {\n        el.addEventListener('focus', onFocus);\n        setTimeout(() => {\n            el.removeEventListener('focus', onFocus);\n        }, 1);\n    });\n}\n\nexport function getStackTrace() : string {\n    try {\n        throw new Error('_');\n    }\n    catch (err) {\n        return err.stack || '';\n    }\n}\n\nfunction inferCurrentScript() : ?HTMLScriptElement {\n    try {\n        const stack = getStackTrace();\n        const stackDetails = (/.*at [^(]*\\((.*):(.+):(.+)\\)$/ig).exec(stack);\n        const scriptLocation = stackDetails && stackDetails[1];\n\n        if (!scriptLocation) {\n            return;\n        }\n\n        // $FlowFixMe[method-unbinding]\n        for (const script of Array.prototype.slice.call(document.getElementsByTagName('script')).reverse()) {\n            if (script.src && script.src === scriptLocation) {\n                return script;\n            }\n        }\n\n    } catch (err) {\n        // pass\n    }\n}\n\n// eslint-disable-next-line compat/compat\nlet currentScript = typeof document !== 'undefined' ? document.currentScript : null;\n\ntype GetCurrentScript = () => HTMLScriptElement;\n\nexport const getCurrentScript : GetCurrentScript = memoize(() => {\n    if (currentScript) {\n        return currentScript;\n    }\n\n    currentScript = inferCurrentScript();\n\n    if (currentScript) {\n        return currentScript;\n    }\n\n    throw new Error('Can not determine current script');\n});\n\nconst currentUID = uniqueID();\n\ntype GetCurrentScriptUID = () => string;\n\nexport const getCurrentScriptUID : GetCurrentScriptUID = memoize(() => {\n    let script;\n\n    try {\n        script = getCurrentScript();\n    } catch (err) {\n        return currentUID;\n    }\n\n    let uid = script.getAttribute(ATTRIBUTES.UID);\n\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n\n    uid = script.getAttribute(`${ ATTRIBUTES.UID }-auto`);\n\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n\n    if (script.src) {\n\n        const { src, dataset } = script;\n        const stringToHash = JSON.stringify({ src, dataset });\n        const hashedString = strHashStr(stringToHash);\n        const hashResult = hashedString.slice(hashedString.length - UID_HASH_LENGTH);\n\n        uid = `uid_${ hashResult }`;\n    } else {\n        uid = uniqueID();\n    }\n\n    script.setAttribute(`${ ATTRIBUTES.UID }-auto`, uid);\n\n    return uid;\n});\n\ntype SubmitFormOptions = {|\n    url : string,\n    target : string,\n    body? : {| [string] : string | boolean |},\n    method? : string\n|};\n\nexport function submitForm({ url, target, body, method = 'post' } : SubmitFormOptions) {\n    const form = document.createElement('form');\n    form.setAttribute('target', target);\n    form.setAttribute('method', method);\n    form.setAttribute('action', url);\n    form.style.display = 'none';\n\n    if (body) {\n        for (const key of Object.keys(body)) {\n            const input = document.createElement('input');\n            input.setAttribute('name', key);\n            input.setAttribute('value', body[key]?.toString());\n            form.appendChild(input);\n        }\n    }\n\n    getBody().appendChild(form);\n    form.submit();\n    getBody().removeChild(form);\n}\n","/* @flow */\n\nexport const KEY_CODES = {\n    ENTER: 13,\n    SPACE: 32\n};\n\nexport const ATTRIBUTES = {\n    UID: 'data-uid'\n};\n\nexport const UID_HASH_LENGTH = 30;\n","/* @flow */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { type SameDomainWindowType } from '@krakenjs/cross-domain-utils/src';\n\ntype RequestOptionsType = {|\n    url : string,\n    method? : string,\n    headers? : { [key : string] : string },\n    json? : $ReadOnlyArray<mixed> | Object,\n    data? : { [key : string] : string },\n    body? : string,\n    win? : SameDomainWindowType,\n    timeout? : number\n|};\n\ntype ResponseType = {|\n    status : number,\n    headers : { [string] : string },\n    body : Object\n|};\n\nconst HEADERS = {\n    CONTENT_TYPE: 'content-type',\n    ACCEPT:       'accept'\n};\n\nconst headerBuilders = [];\n\nfunction parseHeaders(rawHeaders : string = '') : { [string] : string } {\n    const result = {};\n    for (const line of rawHeaders.trim().split('\\n')) {\n        const [ key, ...values ] = line.split(':');\n        result[key.toLowerCase()] = values.join(':').trim();\n    }\n    return result;\n}\n\nexport function request({ url, method = 'get', headers = {}, json, data, body, win = window, timeout = 0 } : RequestOptionsType) : ZalgoPromise<ResponseType> {\n    return new ZalgoPromise((resolve, reject) => {\n\n        if ((json && data) || (json && body) || (data && json)) {\n            throw new Error(`Only options.json or options.data or options.body should be passed`);\n        }\n\n        const normalizedHeaders = {};\n\n        for (const key of Object.keys(headers)) {\n            normalizedHeaders[key.toLowerCase()] = headers[key];\n        }\n\n        if (json) {\n            normalizedHeaders[HEADERS.CONTENT_TYPE] = normalizedHeaders[HEADERS.CONTENT_TYPE] || 'application/json';\n        } else if (data || body) {\n            normalizedHeaders[HEADERS.CONTENT_TYPE] = normalizedHeaders[HEADERS.CONTENT_TYPE] || 'application/x-www-form-urlencoded; charset=utf-8';\n        }\n\n        normalizedHeaders[HEADERS.ACCEPT] = normalizedHeaders[HEADERS.ACCEPT] || 'application/json';\n\n        for (const headerBuilder of headerBuilders) {\n            const builtHeaders = headerBuilder();\n\n            for (const key of Object.keys(builtHeaders)) {\n                normalizedHeaders[key.toLowerCase()] = builtHeaders[key];\n            }\n        }\n\n        const xhr = new win.XMLHttpRequest();\n\n        xhr.addEventListener('load', function xhrLoad() : void {\n\n            const responseHeaders = parseHeaders(this.getAllResponseHeaders());\n\n            if (!this.status) {\n                return reject(new Error(`Request to ${ method.toLowerCase() } ${ url } failed: no response status code.`));\n            }\n\n            const contentType = responseHeaders['content-type'];\n            const isJSON = contentType && (contentType.indexOf('application/json') === 0 || contentType.indexOf('text/json') === 0);\n            let responseBody = this.responseText;\n\n            try {\n                responseBody = JSON.parse(responseBody);\n            } catch (err) {\n                if (isJSON) {\n                    return reject(new Error(`Invalid json: ${ this.responseText }.`));\n                }\n            }\n\n            const res = {\n                status:  this.status,\n                headers: responseHeaders,\n                body:    responseBody\n            };\n\n            return resolve(res);\n\n        }, false);\n\n        xhr.addEventListener('error', (evt) => {\n            reject(new Error(`Request to ${ method.toLowerCase() } ${ url } failed: ${ evt.toString() }.`));\n        }, false);\n\n        xhr.open(method, url, true);\n\n        for (const key in normalizedHeaders) {\n            if (normalizedHeaders.hasOwnProperty(key)) {\n                xhr.setRequestHeader(key, normalizedHeaders[key]);\n            }\n        }\n\n        if (json) {\n            body = JSON.stringify(json);\n        } else if (data) {\n            body = Object.keys(data).map(key => {\n                return `${ encodeURIComponent(key) }=${ data ? encodeURIComponent(data[key]) : '' }`;\n            }).join('&');\n        }\n\n        xhr.timeout = timeout;\n        xhr.ontimeout = function xhrTimeout() {\n            reject(new Error(`Request to ${ method.toLowerCase() } ${ url } has timed out`));\n        };\n\n        xhr.send(body);\n    });\n}\n\nexport function addHeaderBuilder(method : () => { [string] : string }) {\n    headerBuilders.push(method);\n}\n","/* eslint max-lines: 0, @typescript-eslint/prefer-optional-chain: 0 */\n\n/* global NodeJS */\nimport { isRegex, noop } from \"./util\";\nimport { PROTOCOL, WILDCARD } from \"./constants\";\nvar IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\nexport function getActualProtocol(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return win.location.protocol;\n}\nexport function getProtocol(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  // @ts-ignore mockDomain does not exist on window\n  if (win.mockDomain) {\n    // @ts-ignore mockDomain does not exist on window\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call\n    var protocol = win.mockDomain.split(\"//\")[0];\n\n    if (protocol) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n      return protocol;\n    }\n  }\n\n  return getActualProtocol(win);\n}\nexport function isFileProtocol(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return getProtocol(win) === PROTOCOL.FILE;\n}\nexport function isAboutProtocol(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return getProtocol(win) === PROTOCOL.ABOUT;\n}\nexport function isMockProtocol(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return getProtocol(win) === PROTOCOL.MOCK;\n}\nexport function getParent(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  if (!win) {\n    return;\n  }\n\n  try {\n    if (win.parent && win.parent !== win) {\n      return win.parent;\n    }\n  } catch (err) {// pass\n  }\n}\nexport function getOpener(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  if (!win) {\n    return;\n  } // Make sure we're not actually an iframe which has had window.open() called on us\n\n\n  if (getParent(win)) {\n    return;\n  }\n\n  try {\n    return win.opener;\n  } catch (err) {// pass\n  }\n}\nexport function canReadFromWindow(win) {\n  try {\n    noop(win && win.location && win.location.href);\n    return true;\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function getActualDomain(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var location = win.location;\n\n  if (!location) {\n    throw new Error(\"Can not read window location\");\n  }\n\n  var protocol = getActualProtocol(win);\n\n  if (!protocol) {\n    throw new Error(\"Can not read window protocol\");\n  }\n\n  if (protocol === PROTOCOL.FILE) {\n    return PROTOCOL.FILE + \"//\";\n  }\n\n  if (protocol === PROTOCOL.ABOUT) {\n    // @ts-ignore - trying to reassing to something that might be window\n    var parent = getParent(win);\n\n    if (parent && canReadFromWindow(parent)) {\n      // @ts-ignore\n      return getActualDomain(parent);\n    }\n\n    return PROTOCOL.ABOUT + \"//\";\n  }\n\n  var host = location.host;\n\n  if (!host) {\n    throw new Error(\"Can not read window host\");\n  }\n\n  return protocol + \"//\" + host;\n}\nexport function getDomain(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var domain = getActualDomain(win);\n\n  if (domain && // @ts-ignore - mockDomain\n  win.mockDomain && // @ts-ignore - mockDomain\n  win.mockDomain.indexOf(PROTOCOL.MOCK) === 0) {\n    // @ts-ignore - mockDomain\n    return win.mockDomain;\n  }\n\n  return domain;\n}\nexport function isBlankDomain(win) {\n  try {\n    if (!win.location.href) {\n      return true;\n    }\n\n    if (win.location.href === \"about:blank\") {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function isActuallySameDomain(win) {\n  try {\n    if (win === window) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    var desc = Object.getOwnPropertyDescriptor(win, \"location\");\n\n    if (desc && desc.enumerable === false) {\n      return false;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    if (isAboutProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    if (isMockProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    if (getActualDomain(win) === getActualDomain(window)) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function isSameDomain(win) {\n  if (!isActuallySameDomain(win)) {\n    return false;\n  }\n\n  try {\n    if (win === window) {\n      return true;\n    }\n\n    if (isAboutProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n\n    if (getDomain(window) === getDomain(win)) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function assertSameDomain(win) {\n  if (!isSameDomain(win)) {\n    throw new Error(\"Expected window to be same domain\");\n  }\n\n  return win;\n}\nexport function getParents(win) {\n  var result = [];\n\n  try {\n    while (win.parent !== win) {\n      result.push(win.parent);\n      win = win.parent;\n    }\n  } catch (err) {// pass\n  }\n\n  return result;\n}\nexport function isAncestorParent(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n\n  var childParent = getParent(child);\n\n  if (childParent) {\n    return childParent === parent;\n  }\n\n  if (getParents(child).indexOf(parent) !== -1) {\n    return true;\n  }\n\n  return false;\n}\nexport function getFrames(win) {\n  var result = [];\n  var frames;\n\n  try {\n    frames = win.frames;\n  } catch (err) {\n    frames = win;\n  }\n\n  var len;\n\n  try {\n    len = frames.length;\n  } catch (err) {// pass\n  }\n\n  if (len === 0) {\n    return result;\n  }\n\n  if (len) {\n    for (var i = 0; i < len; i++) {\n      var frame = void 0;\n\n      try {\n        frame = frames[i];\n      } catch (err) {\n        continue;\n      }\n\n      result.push(frame);\n    }\n\n    return result;\n  }\n\n  for (var _i = 0; _i < 100; _i++) {\n    var _frame = void 0;\n\n    try {\n      _frame = frames[_i];\n    } catch (err) {\n      return result;\n    }\n\n    if (!_frame) {\n      return result;\n    }\n\n    result.push(_frame);\n  }\n\n  return result;\n}\nexport function getAllChildFrames(win) {\n  var result = [];\n\n  for (var _i3 = 0, _getFrames2 = getFrames(win); _i3 < _getFrames2.length; _i3++) {\n    var frame = _getFrames2[_i3];\n    result.push(frame);\n\n    for (var _i5 = 0, _getAllChildFrames2 = getAllChildFrames(frame); _i5 < _getAllChildFrames2.length; _i5++) {\n      var childFrame = _getAllChildFrames2[_i5];\n      result.push(childFrame);\n    }\n  }\n\n  return result;\n}\nexport function getTop(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  try {\n    if (win.top) {\n      return win.top;\n    }\n  } catch (err) {// pass\n  }\n\n  if (getParent(win) === win) {\n    return win;\n  }\n\n  try {\n    if (isAncestorParent(window, win) && window.top) {\n      return window.top;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    if (isAncestorParent(win, window) && window.top) {\n      return window.top;\n    }\n  } catch (err) {// pass\n  }\n\n  for (var _i7 = 0, _getAllChildFrames4 = getAllChildFrames(win); _i7 < _getAllChildFrames4.length; _i7++) {\n    var frame = _getAllChildFrames4[_i7];\n\n    try {\n      if (frame.top) {\n        return frame.top;\n      }\n    } catch (err) {// pass\n    }\n\n    if (getParent(frame) === frame) {\n      return frame;\n    }\n  }\n}\nexport function getNextOpener(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return getOpener(getTop(win) || win);\n}\nexport function getUltimateTop(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var opener = getNextOpener(win);\n\n  if (opener) {\n    return getUltimateTop(opener);\n  }\n\n  return top;\n}\nexport function getAllFramesInWindow(win) {\n  var top = getTop(win);\n\n  if (!top) {\n    throw new Error(\"Can not determine top window\");\n  }\n\n  var result = [].concat(getAllChildFrames(top), [top]); // Win may be in shadow dom\n\n  if (result.indexOf(win) === -1) {\n    result = [].concat(result, [win], getAllChildFrames(win));\n  }\n\n  return result;\n}\nexport function getAllWindows(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var frames = getAllFramesInWindow(win);\n  var opener = getNextOpener(win);\n\n  if (opener) {\n    return [].concat(getAllWindows(opener), frames);\n  } else {\n    return frames;\n  }\n}\nexport function isTop(win) {\n  return win === getTop(win);\n}\nexport function isFrameWindowClosed(frame) {\n  if (!frame.contentWindow) {\n    return true;\n  }\n\n  if (!frame.parentNode) {\n    return true;\n  }\n\n  var doc = frame.ownerDocument;\n\n  if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n    var parent = frame;\n\n    while (parent.parentNode && parent.parentNode !== parent) {\n      // @ts-ignore\n      parent = parent.parentNode;\n    } // @ts-ignore - host does not exist on type frame\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n\n\n    if (!parent.host || !doc.documentElement.contains(parent.host)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction safeIndexOf(collection, item) {\n  for (var i = 0; i < collection.length; i++) {\n    try {\n      if (collection[i] === item) {\n        return i;\n      }\n    } catch (err) {// pass\n    }\n  }\n\n  return -1;\n}\n\nvar iframeWindows = [];\nvar iframeFrames = [];\nexport function isWindowClosed(win, allowMock) {\n  if (allowMock === void 0) {\n    allowMock = true;\n  }\n\n  try {\n    if (win === window) {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (!win) {\n      return true;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (win.closed) {\n      return true;\n    }\n  } catch (err) {\n    // I love you so much IE\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return false;\n    }\n\n    return true;\n  }\n\n  if (allowMock && isSameDomain(win)) {\n    try {\n      // @ts-ignore\n      if (win.mockclosed) {\n        return true;\n      }\n    } catch (err) {// pass\n    }\n  } // Mobile safari\n\n\n  try {\n    if (!win.parent || !win.top) {\n      return true;\n    }\n  } catch (err) {// pass\n  } // Yes, this actually happens in IE. win === win errors out when the window\n  // is from an iframe, and the iframe was removed from the page.\n\n\n  try {\n    noop(win === win); // eslint-disable-line no-self-compare\n  } catch (err) {\n    return true;\n  } // IE orphaned frame\n\n\n  var iframeIndex = safeIndexOf(iframeWindows, win);\n\n  if (iframeIndex !== -1) {\n    var frame = iframeFrames[iframeIndex];\n\n    if (frame && isFrameWindowClosed(frame)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction cleanIframes() {\n  for (var i = 0; i < iframeWindows.length; i++) {\n    var closed = false;\n\n    try {\n      closed = iframeWindows[i].closed;\n    } catch (err) {// pass\n    }\n\n    if (closed) {\n      iframeFrames.splice(i, 1);\n      iframeWindows.splice(i, 1);\n    }\n  }\n}\n\nexport function linkFrameWindow(frame) {\n  cleanIframes();\n\n  if (frame && frame.contentWindow) {\n    try {\n      iframeWindows.push(frame.contentWindow);\n      iframeFrames.push(frame);\n    } catch (err) {// pass\n    }\n  }\n}\nexport function getUserAgent(win) {\n  win = win || window; // @ts-ignore\n\n  return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\nexport function getFrameByName(win, name) {\n  var winFrames = getFrames(win);\n\n  for (var _i9 = 0; _i9 < winFrames.length; _i9++) {\n    var childFrame = winFrames[_i9];\n\n    try {\n      if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n        return childFrame;\n      }\n    } catch (err) {// pass\n    }\n  }\n\n  try {\n    // @ts-ignore\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    if (winFrames.indexOf(win.frames[name]) !== -1) {\n      // @ts-ignore\n      return win.frames[name];\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    // @ts-ignore\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    if (winFrames.indexOf(win[name]) !== -1) {\n      // @ts-ignore\n      return win[name];\n    }\n  } catch (err) {// pass\n  }\n}\nexport function findChildFrameByName(win, name) {\n  var frame = getFrameByName(win, name);\n\n  if (frame) {\n    return frame;\n  }\n\n  for (var _i11 = 0, _getFrames4 = getFrames(win); _i11 < _getFrames4.length; _i11++) {\n    var childFrame = _getFrames4[_i11];\n    var namedFrame = findChildFrameByName(childFrame, name);\n\n    if (namedFrame) {\n      return namedFrame;\n    }\n  }\n}\nexport function findFrameByName(win, name) {\n  var frame = getFrameByName(win, name);\n\n  if (frame) {\n    return frame;\n  }\n\n  var top = getTop(win) || win;\n  return findChildFrameByName(top, name);\n}\nexport function isParent(win, frame) {\n  var frameParent = getParent(frame);\n\n  if (frameParent) {\n    return frameParent === win;\n  }\n\n  for (var _i13 = 0, _getFrames6 = getFrames(win); _i13 < _getFrames6.length; _i13++) {\n    var childFrame = _getFrames6[_i13];\n\n    if (childFrame === frame) {\n      return true;\n    }\n  }\n\n  return false;\n}\nexport function isOpener(parent, child) {\n  return parent === getOpener(child);\n}\nexport function getAncestor(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  win = win || window;\n  var opener = getOpener(win);\n\n  if (opener) {\n    return opener;\n  }\n\n  var parent = getParent(win);\n\n  if (parent) {\n    return parent;\n  }\n}\nexport function getAncestors(win) {\n  var results = [];\n  var ancestor = win;\n\n  while (ancestor) {\n    // @ts-ignore\n    ancestor = getAncestor(ancestor);\n\n    if (ancestor) {\n      results.push(ancestor);\n    }\n  }\n\n  return results;\n}\nexport function isAncestor(parent, child) {\n  var actualParent = getAncestor(child);\n\n  if (actualParent) {\n    if (actualParent === parent) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (child === parent) {\n    return false;\n  }\n\n  if (getTop(child) === child) {\n    return false;\n  }\n\n  for (var _i15 = 0, _getFrames8 = getFrames(parent); _i15 < _getFrames8.length; _i15++) {\n    var frame = _getFrames8[_i15];\n\n    if (frame === child) {\n      return true;\n    }\n  }\n\n  return false;\n}\nexport function isPopup(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return Boolean(getOpener(win));\n}\nexport function isIframe(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return Boolean(getParent(win));\n}\nexport function isFullpage(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return Boolean(!isIframe(win) && !isPopup(win));\n}\n\nfunction anyMatch(collection1, collection2) {\n  for (var _i17 = 0; _i17 < collection1.length; _i17++) {\n    var item1 = collection1[_i17];\n\n    for (var _i19 = 0; _i19 < collection2.length; _i19++) {\n      var item2 = collection2[_i19];\n\n      if (item1 === item2) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function getDistanceFromTop(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var distance = 0;\n  var parent = win;\n\n  while (parent) {\n    // @ts-ignore - trying to reassing to something that might be window\n    parent = getParent(parent);\n\n    if (parent) {\n      distance += 1;\n    }\n  }\n\n  return distance;\n}\nexport function getNthParent(win, n) {\n  if (n === void 0) {\n    n = 1;\n  }\n\n  var parent = win;\n\n  for (var i = 0; i < n; i++) {\n    if (!parent) {\n      return;\n    } // @ts-ignore - trying to reassign to something that might be window\n\n\n    parent = getParent(parent);\n  }\n\n  return parent;\n}\nexport function getNthParentFromTop(win, n) {\n  if (n === void 0) {\n    n = 1;\n  }\n\n  return getNthParent(win, getDistanceFromTop(win) - n);\n}\nexport function isSameTopWindow(win1, win2) {\n  var top1 = getTop(win1) || win1;\n  var top2 = getTop(win2) || win2;\n\n  try {\n    if (top1 && top2) {\n      if (top1 === top2) {\n        return true;\n      }\n\n      return false;\n    }\n  } catch (err) {// pass\n  }\n\n  var allFrames1 = getAllFramesInWindow(win1);\n  var allFrames2 = getAllFramesInWindow(win2);\n\n  if (anyMatch(allFrames1, allFrames2)) {\n    return true;\n  }\n\n  var opener1 = getOpener(top1);\n  var opener2 = getOpener(top2);\n\n  if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n    return false;\n  }\n\n  if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n    return false;\n  }\n\n  return false;\n}\nexport function matchDomain(pattern, origin) {\n  if (typeof pattern === \"string\") {\n    if (typeof origin === \"string\") {\n      return pattern === WILDCARD || origin === pattern;\n    }\n\n    if (isRegex(origin)) {\n      return false;\n    }\n\n    if (Array.isArray(origin)) {\n      return false;\n    }\n  }\n\n  if (isRegex(pattern)) {\n    if (isRegex(origin)) {\n      return pattern.toString() === origin.toString();\n    }\n\n    if (Array.isArray(origin)) {\n      return false;\n    } // @ts-ignore - earlier already shortcutted the string case\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n\n\n    return Boolean(origin.match(pattern));\n  }\n\n  if (Array.isArray(pattern)) {\n    if (Array.isArray(origin)) {\n      return JSON.stringify(pattern) === JSON.stringify(origin);\n    }\n\n    if (isRegex(origin)) {\n      return false;\n    }\n\n    return pattern.some(function (subpattern) {\n      return matchDomain(subpattern, origin);\n    });\n  }\n\n  return false;\n}\nexport function stringifyDomainPattern(pattern) {\n  if (Array.isArray(pattern)) {\n    return \"(\" + pattern.join(\" | \") + \")\";\n  } else if (isRegex(pattern)) {\n    return \"RegExp(\" + pattern.toString() + \")\";\n  } else {\n    return pattern.toString();\n  }\n}\nexport function getDomainFromUrl(url) {\n  var domain;\n\n  if (url.match(/^(https?|mock|file):\\/\\//)) {\n    domain = url;\n  } else {\n    return getDomain();\n  }\n\n  domain = domain.split(\"/\").slice(0, 3).join(\"/\");\n  return domain;\n}\nexport function onCloseWindow(win, callback, delay, maxtime) {\n  if (delay === void 0) {\n    delay = 1000;\n  }\n\n  if (maxtime === void 0) {\n    maxtime = Infinity;\n  }\n\n  var timeout;\n\n  var check = function check() {\n    if (isWindowClosed(win)) {\n      if (timeout) {\n        clearTimeout(timeout);\n      } // eslint-disable-next-line @typescript-eslint/no-confusing-void-expression\n\n\n      return callback();\n    }\n\n    if (maxtime <= 0) {\n      clearTimeout(timeout);\n    } else {\n      maxtime -= delay;\n      timeout = setTimeout(check, delay);\n    }\n  };\n\n  check();\n  return {\n    cancel: function cancel() {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    }\n  };\n} // eslint-disable-next-line complexity\n\nexport function isWindow(obj) {\n  try {\n    if (obj === window) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (Object.prototype.toString.call(obj) === \"[object Window]\") {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (window.Window && obj instanceof window.Window) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    // @ts-ignore not complete sure that obj has self. needs guard\n    if (obj && obj.self === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    // @ts-ignore not complete sure that obj has parent. needs guard\n    if (obj && obj.parent === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    // @ts-ignore not complete sure that obj has top. needs guard\n    if (obj && obj.top === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    // @ts-ignore this equality check is a self compare\n    // eslint-disable-next-line  @typescript-eslint/no-confusing-void-expression, no-self-compare\n    if (noop(obj === obj) === \"__unlikely_value__\") {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (obj && // @ts-ignore more shenanigans\n    obj.__cross_domain_utils_window_check__ === \"__unlikely_value__\") {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    // @ts-ignore needs guard\n    if (\"postMessage\" in obj && \"self\" in obj && \"location\" in obj) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function isBrowser() {\n  return typeof window !== \"undefined\" && typeof window.location !== \"undefined\";\n}\nexport function isCurrentDomain(domain) {\n  if (!isBrowser()) {\n    return false;\n  }\n\n  return getDomain() === domain;\n}\nexport function isMockDomain(domain) {\n  return domain.indexOf(PROTOCOL.MOCK) === 0;\n}\nexport function normalizeMockUrl(url) {\n  if (!isMockDomain(getDomainFromUrl(url))) {\n    return url;\n  } // @ts-ignore - global\n\n\n  if (!__TEST__) {\n    throw new Error(\"Mock urls not supported out of test mode\");\n  }\n\n  return url.replace(/^mock:\\/\\/[^/]+/, getActualDomain(window));\n}\nexport function getFrameForWindow(win) {\n  if (isSameDomain(win)) {\n    return assertSameDomain(win).frameElement;\n  } // @ts-ignore not an array type, but is iterable so fine\n\n\n  for (var _i21 = 0, _document$querySelect2 = document.querySelectorAll(\"iframe\"); _i21 < _document$querySelect2.length; _i21++) {\n    var frame = _document$querySelect2[_i21];\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (frame && frame.contentWindow && frame.contentWindow === win) {\n      return frame;\n    }\n  }\n}\nexport function closeWindow(win) {\n  if (isIframe(win)) {\n    var frame = getFrameForWindow(win);\n\n    if (frame && frame.parentElement) {\n      frame.parentElement.removeChild(frame);\n      return;\n    }\n  }\n\n  try {\n    win.close();\n  } catch (err) {// pass\n  }\n}","export var PROTOCOL = {\n  MOCK: \"mock:\",\n  FILE: \"file:\",\n  ABOUT: \"about:\"\n};\nexport var WILDCARD = \"*\";\nexport var WINDOW_TYPE = {\n  IFRAME: \"iframe\",\n  POPUP: \"popup\"\n};","// @ts-ignore\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise\";\n// @ts-ignore\nimport { request, noop } from \"@krakenjs/belter/src\"; // eslint-disable-line import/named\nimport type { CrossDomainWindowType } from \"@krakenjs/cross-domain-utils/dist/esm\";\nimport {\n  isSameDomain,\n  assertSameDomain,\n} from \"@krakenjs/cross-domain-utils/dist/esm\";\n\nimport { canUseSendBeacon, isAmplitude, sendBeacon } from \"./util\";\n\nexport type TransportOptions = {\n  url: string;\n  method: string;\n  headers: Record<string, unknown>;\n  json: Record<string, unknown>;\n  enableSendBeacon?: boolean;\n};\n\nexport type Transport = (arg0: TransportOptions) => ZalgoPromise<void>;\n\nexport function getHTTPTransport(\n  httpWin: CrossDomainWindowType = window\n): Transport {\n  const win = isSameDomain(httpWin) ? assertSameDomain(httpWin) : window;\n  return ({\n    url,\n    method,\n    headers,\n    json,\n    enableSendBeacon = false,\n  }: TransportOptions): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      let beaconResult = false;\n\n      if (\n        canUseSendBeacon({\n          headers,\n          enableSendBeacon,\n        })\n      ) {\n        if (isAmplitude(url)) {\n          beaconResult = sendBeacon({\n            win,\n            url,\n            data: JSON,\n            useBlob: false,\n          });\n        } else {\n          beaconResult = sendBeacon({\n            win,\n            url,\n            data: JSON,\n            useBlob: true,\n          });\n        }\n      }\n\n      return beaconResult\n        ? beaconResult\n        : request({\n            win,\n            url,\n            method,\n            headers,\n            json,\n          });\n    }).then(noop);\n  };\n}\n","// @ts-ignore\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise\";\nimport {\n  isBrowser,\n  promiseDebounce,\n  noop,\n  safeInterval,\n  objFilter,\n  // @ts-ignore\n} from \"@krakenjs/belter\";\nimport type { $Values } from \"utility-types\";\n\nimport {\n  DEFAULT_LOG_LEVEL,\n  LOG_LEVEL_PRIORITY,\n  AUTO_FLUSH_LEVEL,\n  FLUSH_INTERVAL,\n  AMPLITUDE_URL,\n} from \"./config\";\nimport { LOG_LEVEL, PROTOCOL } from \"./constants\";\nimport { extendIfDefined } from \"./util\";\nimport type { Transport } from \"./http\";\nimport { getHTTPTransport } from \"./http\";\nimport type { Payload } from \"./types\";\n\ntype LoggerOptions = {\n  url?: string;\n  prefix?: string;\n  logLevel?: string;\n  transport?: Transport;\n  flushInterval?: number;\n  enableSendBeacon?: boolean;\n  amplitudeApiKey?: string;\n};\ntype ClientPayload = Payload;\ntype Log = (name: string, payload?: ClientPayload) => LoggerType;\n\ntype Track = (payload: ClientPayload) => LoggerType;\n\ntype Builder = (arg0: Payload) => ClientPayload;\ntype AddBuilder = (arg0: Builder) => LoggerType;\n\nexport type LoggerType = {\n  debug: Log;\n  info: Log;\n  warn: Log;\n  error: Log;\n  track: Track;\n  flush: () => ZalgoPromise<void>;\n  immediateFlush: () => ZalgoPromise<void>;\n  addPayloadBuilder: AddBuilder;\n  addMetaBuilder: AddBuilder;\n  addTrackingBuilder: AddBuilder;\n  addHeaderBuilder: AddBuilder;\n  setTransport: (arg0: Transport) => LoggerType;\n  configure: (arg0: LoggerOptions) => LoggerType;\n};\nexport function Logger({\n  url,\n  prefix,\n  logLevel = DEFAULT_LOG_LEVEL,\n  transport = getHTTPTransport(),\n  amplitudeApiKey,\n  flushInterval = FLUSH_INTERVAL,\n  enableSendBeacon = false,\n}: LoggerOptions): LoggerType {\n  let events: Array<{\n    level: $Values<typeof LOG_LEVEL>;\n    event: string;\n    payload: Payload;\n  }> = [];\n  let tracking: Array<Payload> = [];\n  const payloadBuilders: Array<Builder> = [];\n  const metaBuilders: Array<Builder> = [];\n  const trackingBuilders: Array<Builder> = [];\n  const headerBuilders: Array<Builder> = [];\n\n  function print(\n    level: $Values<typeof LOG_LEVEL>,\n    event: string,\n    payload: Payload\n  ): void {\n    if (!isBrowser() || !window.console || !window.console.log) {\n      return;\n    }\n\n    if (\n      LOG_LEVEL_PRIORITY.indexOf(level) >\n      LOG_LEVEL_PRIORITY.indexOf(logLevel as $Values<typeof LOG_LEVEL>)\n    ) {\n      return;\n    }\n\n    const args: Array<string | unknown> = [event as Payload];\n    args.push(payload);\n\n    if (payload.error || payload.warning) {\n      args.push(\"\\n\\n\", payload.error || payload.warning);\n    }\n\n    try {\n      // @ts-ignore\n      if (window.console[level] && window.console[level].apply) {\n        window.console[level].apply(window.console, args);\n      } else if (window.console.log && window.console.log.apply) {\n        window.console.log.apply(window.console, args);\n      }\n    } catch (err) {\n      // pass\n    }\n  }\n\n  function immediateFlush(): ZalgoPromise<void> {\n    return ZalgoPromise.try(() => {\n      if (!isBrowser() || window.location.protocol === PROTOCOL.FILE) {\n        return;\n      }\n\n      if (!events.length && !tracking.length) {\n        return;\n      }\n\n      const meta = {};\n\n      for (const builder of metaBuilders) {\n        extendIfDefined(meta, builder(meta));\n      }\n\n      const headers = {};\n\n      for (const builder of headerBuilders) {\n        extendIfDefined(headers, builder(headers));\n      }\n\n      let res;\n\n      if (url) {\n        res = transport({\n          method: \"POST\",\n          url,\n          headers,\n          json: {\n            events,\n            meta,\n            tracking,\n          },\n          enableSendBeacon,\n        }).catch(noop);\n      }\n\n      if (amplitudeApiKey) {\n        transport({\n          method: \"POST\",\n          url: AMPLITUDE_URL,\n          headers: {},\n          json: {\n            api_key: amplitudeApiKey,\n            events: tracking.map((payload: Payload) => {\n              // $FlowFixMe\n              return {\n                event_type: payload.transitionName || \"event\",\n                event_properties: payload,\n                ...payload,\n              };\n            }),\n          },\n          enableSendBeacon,\n        }).catch(noop);\n      }\n\n      events = [];\n      tracking = [];\n      return ZalgoPromise.resolve(res).then(noop);\n    });\n  }\n\n  const flush = promiseDebounce(immediateFlush);\n\n  function enqueue(\n    level: $Values<typeof LOG_LEVEL>,\n    event: string,\n    payload: Payload\n  ): void {\n    events.push({\n      level,\n      event,\n      payload,\n    });\n    // @ts-ignore\n    if (AUTO_FLUSH_LEVEL.indexOf(level) !== -1) {\n      flush();\n    }\n  }\n\n  function debug(event: string, payload: Payload): LoggerType {\n    return log(LOG_LEVEL.DEBUG, event, payload);\n  }\n\n  function info(event: string, payload: Payload): LoggerType {\n    return log(LOG_LEVEL.INFO, event, payload);\n  }\n\n  function warn(event: string, payload: Payload): LoggerType {\n    return log(LOG_LEVEL.WARN, event, payload);\n  }\n\n  function error(event: string, payload: Payload): LoggerType {\n    return log(LOG_LEVEL.ERROR, event, payload);\n  }\n\n  const logger = {\n    debug,\n    info,\n    warn,\n    error,\n    track,\n    flush,\n    immediateFlush,\n    addPayloadBuilder,\n    addMetaBuilder,\n    addTrackingBuilder,\n    addHeaderBuilder,\n    setTransport,\n    configure,\n  } as LoggerType;\n\n  function log(\n    level: $Values<typeof LOG_LEVEL>,\n    event: string,\n    payload: Payload\n  ): LoggerType {\n    if (!isBrowser()) {\n      return logger;\n    }\n\n    if (prefix) {\n      event = `${prefix}_${event}`;\n    }\n\n    const logPayload: Payload = {\n      ...objFilter(payload),\n      timestamp: Date.now().toString(),\n    };\n\n    for (const builder of payloadBuilders) {\n      extendIfDefined(logPayload, builder(logPayload));\n    }\n\n    enqueue(level, event, logPayload);\n    print(level, event, logPayload);\n\n    return logger;\n  }\n\n  function addBuilder(builders: Array<unknown>, builder: unknown): LoggerType {\n    builders.push(builder);\n    return logger;\n  }\n\n  function addPayloadBuilder(builder: unknown): LoggerType {\n    return addBuilder(payloadBuilders, builder);\n  }\n\n  function addMetaBuilder(builder: unknown): LoggerType {\n    return addBuilder(metaBuilders, builder);\n  }\n\n  function addTrackingBuilder(builder: unknown): LoggerType {\n    return addBuilder(trackingBuilders, builder);\n  }\n\n  function addHeaderBuilder(builder: unknown): LoggerType {\n    return addBuilder(headerBuilders, builder);\n  }\n\n  function track(payload = {}): LoggerType {\n    if (!isBrowser()) {\n      return logger;\n    }\n\n    const trackingPayload: Payload = objFilter(payload);\n\n    for (const builder of trackingBuilders) {\n      extendIfDefined(trackingPayload, builder(trackingPayload));\n    }\n\n    print(LOG_LEVEL.DEBUG, \"track\", trackingPayload);\n    tracking.push(trackingPayload);\n\n    return logger;\n  }\n\n  function setTransport(newTransport: Transport): LoggerType {\n    transport = newTransport;\n    return logger;\n  }\n\n  function configure(opts: LoggerOptions): LoggerType {\n    if (opts.url) {\n      url = opts.url;\n    }\n\n    if (opts.prefix) {\n      prefix = opts.prefix;\n    }\n\n    if (opts.logLevel) {\n      logLevel = opts.logLevel;\n    }\n\n    if (opts.transport) {\n      transport = opts.transport;\n    }\n\n    if (opts.amplitudeApiKey) {\n      amplitudeApiKey = opts.amplitudeApiKey;\n    }\n\n    if (opts.flushInterval) {\n      flushInterval = opts.flushInterval;\n    }\n\n    if (opts.enableSendBeacon) {\n      enableSendBeacon = opts.enableSendBeacon;\n    }\n\n    return logger;\n  }\n\n  if (isBrowser()) {\n    safeInterval(flush, flushInterval);\n  }\n\n  if (typeof window === \"object\") {\n    window.addEventListener(\"beforeunload\", () => {\n      immediateFlush();\n    });\n    window.addEventListener(\"unload\", () => {\n      immediateFlush();\n    });\n    window.addEventListener(\"pagehide\", () => {\n      immediateFlush();\n    });\n  }\n\n  return logger;\n}\n"],"sourceRoot":""}